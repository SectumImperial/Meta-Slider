!function(){"use strict";var e,t={774:function(e,t,r){var i=r(755),n=r.n(i);r(272);function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.content=t.querySelector(".slider__content"),this.init()}var t,r,i;return t=e,(r=[{key:"init",value:function(){var e,t;this.findElems(),this.stateObject={min:this.min||0,max:this.max||10,valueFrom:this.from||0,valueTo:this.to||0,step:this.step||1,scalePercentGap:this.gap||1,scaleMarks:this.marks,isTip:this.tip,isProgress:this.progress,isRange:this.range,isVertical:this.vertical},this.addSlider(this.stateObject),this.updateForm(),(null===(e=this.content)||void 0===e?void 0:e.querySelector(".plugin-slider__thumb"))&&(this.thumb=null===(t=this.content)||void 0===t?void 0:t.querySelector(".plugin-slider__thumb")),this.addListeners()}},{key:"addListeners",value:function(){var e,t,r,i,n=this;if(this.form){var s=[];this.form.querySelectorAll(".slider__input").forEach((function(e){e&&s.push(e)})),s.forEach((function(e){return e.addEventListener("change",n.updateState.bind(n))}))}null===(e=this.content)||void 0===e||e.addEventListener("mousedown",this.handleClick.bind(this)),null===(t=this.content)||void 0===t||t.addEventListener("click",this.updateForm.bind(this)),this.thumb&&(null===(r=this.thumb)||void 0===r||r.addEventListener("keydown",this.handelKey.bind(this)),null===(i=this.thumb)||void 0===i||i.addEventListener("touchmove",this.touchDown.bind(this),{passive:!0}))}},{key:"updateState",value:function(e){var t=e.target;if(t instanceof HTMLInputElement){var r=t.dataset.role,i=this.mapElems.get("".concat(r));if(void 0===i)return;var n,s=this.slider.getValue(i);void 0!==(n="boolean"==typeof s?t.checked:"number"==typeof s?Number(t.value):void 0)&&(this.slider.setValue("".concat(i),n),this.slider.setNewState(this.slider.getState()),"boolean"!=typeof this.slider.getValue("".concat(i))&&"scalePercentGap"!==i||(this.content&&(this.content.innerHTML=""),this.addSlider(this.slider.getState())),this.updateForm())}}},{key:"addSlider",value:function(e){this.content&&(this.slider=n()(this.content).sliderPlugin(e))}},{key:"findElems",value:function(){if(this.mapElems=new Map,this.form=this.root.querySelector(".slider__form"),this.form){var e=this.form.querySelector(".slider__input[data-role = min]");this.min=Number(e.value),this.mapElems.set("min","min");var t=this.form.querySelector(".slider__input[data-role = max]");this.max=Number(t.value),this.mapElems.set("max","max");var r=this.form.querySelector(".slider__input[data-role = step]");this.step=Number(r.value),this.mapElems.set("step","step");var i=this.form.querySelector(".slider__input[data-role = from]");this.from=Number(i.value),this.mapElems.set("from","valueFrom");var n=this.form.querySelector(".slider__input[data-role = to]");this.to=Number(n.value),this.mapElems.set("to","valueTo");var s=this.form.querySelector(".slider__input[data-role = gap]");s.value&&(this.gap=Number(s.value)),this.mapElems.set("gap","scalePercentGap");var a=this.form.querySelector(".slider__input[data-role = range]");this.range=a.checked,this.range&&(n.disabled=!1),this.range||(n.disabled=!0),this.mapElems.set("range","isRange");var o=this.form.querySelector(".slider__input[data-role = marks]");this.marks=o.checked,this.marks&&(s.disabled=!1),this.marks||(s.disabled=!0),this.mapElems.set("marks","scaleMarks");var l=this.form.querySelector(".slider__input[data-role = tip]");this.tip=l.checked,this.mapElems.set("tip","isTip");var u=this.form.querySelector(".slider__input[data-role = progress]");this.progress=u.checked,this.mapElems.set("progress","isProgress");var c=this.form.querySelector(".slider__input[data-role = vertical]");this.vertical=c.checked,this.mapElems.set("vertical","isVertical")}}},{key:"updateForm",value:function(){var e=this;this.mapElems.forEach((function(t,r){var i,n=null===(i=e.form)||void 0===i?void 0:i.querySelector(".slider__input[data-role = ".concat(r,"]"));n instanceof HTMLInputElement&&(n&&"number"==typeof e.slider.getValue(t)&&(n.value="".concat(e.slider.getValue("".concat(t)))),n&&"boolean"==typeof e.slider.getValue(t)&&(e.slider.getValue("".concat(t))?n.checked=!0:n.checked=!1),e.findElems())}))}},{key:"handleClick",value:function(){var e,t,r=this,i=function(){return r.updateForm()};null===(e=this.content)||void 0===e||e.addEventListener("mousemove",i),null===(t=this.content)||void 0===t||t.addEventListener("mouseup",(function e(){var t,n;null===(t=r.content)||void 0===t||t.removeEventListener("mousemove",i),null===(n=r.content)||void 0===n||n.removeEventListener("mouseup",e)}))}},{key:"handelKey",value:function(e){var t=e.key;"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||this.updateForm()}},{key:"touchDown",value:function(){this.updateForm()}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.querySelectorAll(".slider").forEach((function(e){return new a(e)}))}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,i),s.exports}i.m=t,e=[],i.O=function(t,r,n,s){if(!r){var a=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],s=e[c][2];for(var o=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((function(e){return i.O[e](r[l])}))?r.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,n,s]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={577:0,309:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,a=r[0],o=r[1],l=r[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var c=l(i)}for(t&&t(r);u<a.length;u++)s=a[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},r=self.webpackChunkmeta_slider=self.webpackChunkmeta_slider||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var n=i.O(void 0,[755,272],(function(){return i(774)}));n=i.O(n)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVtby9kZW1vLmUxOTM2NzdlNjJmODQwNWYwZmRkLmpzIiwibWFwcGluZ3MiOiI2QkFBSUEsRSw4TkNhRUMsRUFBQUEsV0FnREosV0FBWUMsSSw0RkFBYSxTQUN2QkMsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS0MsUUFBVUYsRUFBS0csY0FBYyxvQkFDbENGLEtBQUtHLE1BQ04sQywyQ0FFTyxXLFFBQ05ILEtBQUtJLFlBRUxKLEtBQUtLLFlBQWMsQ0FDakJDLElBQUtOLEtBQUtNLEtBQU8sRUFDakJDLElBQUtQLEtBQUtPLEtBQU8sR0FDakJDLFVBQVdSLEtBQUtTLE1BQVEsRUFDeEJDLFFBQVNWLEtBQUtXLElBQU0sRUFDcEJDLEtBQU1aLEtBQUtZLE1BQVEsRUFDbkJDLGdCQUFpQmIsS0FBS2MsS0FBTyxFQUM3QkMsV0FBWWYsS0FBS2dCLE1BQ2pCQyxNQUFPakIsS0FBS2tCLElBQ1pDLFdBQVluQixLQUFLb0IsU0FDakJDLFFBQVNyQixLQUFLc0IsTUFDZEMsV0FBWXZCLEtBQUt3QixVQUduQnhCLEtBQUt5QixVQUFVekIsS0FBS0ssYUFDcEJMLEtBQUswQixjQUVXLFFBQVosRUFBQTFCLEtBQUtDLGVBQU8wQixJQUFBQSxPQUFBLEVBQUFBLEVBQUV6QixjQUFjLDRCQUM5QkYsS0FBSzRCLE1BQW9CLFFBQVosRUFBQTVCLEtBQUtDLGVBQU80QixJQUFBQSxPQUFBLEVBQUFBLEVBQUUzQixjQUFjLDBCQUczQ0YsS0FBSzhCLGNBQ04sRywwQkFFTyxXQUFZLEksUUFBQSxPQUNsQixHQUFJOUIsS0FBSytCLEtBQU0sQ0FDYixJQUFNQyxFQUEyQixHQUNqQ2hDLEtBQUsrQixLQUFLRSxpQkFBaUIsa0JBQWtCQyxTQUFRLFNBQUNDLEdBQ2hEQSxHQUNGSCxFQUFNSSxLQUFLRCxFQUVkLElBRURILEVBQU1FLFNBQVEsU0FBQ0MsR0FBRCxPQUFPQSxFQUFFRSxpQkFBaUIsU0FBVSxFQUFLQyxZQUFZQyxLQUFLLEdBQTFELEdBQ2YsQ0FFVyxRQUFaLEVBQUF2QyxLQUFLQyxlQUFPMEIsSUFBQUEsR0FBQUEsRUFBRVUsaUJBQWlCLFlBQWFyQyxLQUFLd0MsWUFBWUQsS0FBS3ZDLE9BQ3RELFFBQVosRUFBQUEsS0FBS0MsZUFBTzRCLElBQUFBLEdBQUFBLEVBQUVRLGlCQUFpQixRQUFTckMsS0FBSzBCLFdBQVdhLEtBQUt2QyxPQUV6REEsS0FBSzRCLFFBQ0csUUFBVixFQUFBNUIsS0FBSzRCLGFBQUthLElBQUFBLEdBQUFBLEVBQUVKLGlCQUFpQixVQUFXckMsS0FBSzBDLFVBQVVILEtBQUt2QyxPQUNsRCxRQUFWLEVBQUFBLEtBQUs0QixhQUFLZSxJQUFBQSxHQUFBQSxFQUFFTixpQkFDVixZQUNBckMsS0FBSzRDLFVBQVVMLEtBQUt2QyxNQUNwQixDQUFFNkMsU0FBUyxJQUdoQixHLHlCQUVPLFNBQVlWLEdBQ2xCLElBQVFXLEVBQVdYLEVBQVhXLE9BQ1IsR0FBSUEsYUFBa0JDLGlCQUFrQixDQUN0QyxJQUFRQyxFQUFTRixFQUFPRyxRQUFoQkQsS0FDRkUsRUFBUWxELEtBQUttRCxTQUFTQyxJQUFkLFVBQXFCSixJQUNuQyxRQUFjSyxJQUFWSCxFQUFxQixPQUN6QixJQUNJSSxFQURFQyxFQUFhdkQsS0FBS3dELE9BQU9DLFNBQVNQLFFBU3RCRyxLQU5oQkMsRUFEd0Isa0JBQWZDLEVBQ0dULEVBQU9ZLFFBQ1ksaUJBQWZILEVBQ0pJLE9BQU9iLEVBQU9jLFlBRWRQLEtBR1pyRCxLQUFLd0QsT0FBT0ssU0FBWixVQUF3QlgsR0FBU0ksR0FDakN0RCxLQUFLd0QsT0FBT00sWUFBWTlELEtBQUt3RCxPQUFPTyxZQUNZLGtCQUFyQy9ELEtBQUt3RCxPQUFPQyxTQUFaLFVBQXdCUCxLQUFvQyxvQkFBVkEsSUFDdkRsRCxLQUFLQyxVQUFTRCxLQUFLQyxRQUFRK0QsVUFBWSxJQUMzQ2hFLEtBQUt5QixVQUFVekIsS0FBS3dELE9BQU9PLGFBRTdCL0QsS0FBSzBCLGFBRVIsQ0FDRixHLHVCQUVPLFNBQVV1QyxHQUNYakUsS0FBS0MsVUFDVkQsS0FBS3dELE9BQVNVLElBQUVsRSxLQUFLQyxTQUFTa0UsYUFBYUYsR0FDNUMsRyx1QkFFTyxXQUlOLEdBSEFqRSxLQUFLbUQsU0FBVyxJQUFJaUIsSUFFcEJwRSxLQUFLK0IsS0FBTy9CLEtBQUtELEtBQUtHLGNBQWMsaUJBQy9CRixLQUFLK0IsS0FBVixDQUNBLElBQU16QixFQUNKTixLQUFLK0IsS0FBSzdCLGNBQWMsbUNBQzFCRixLQUFLTSxJQUFNcUQsT0FBT3JELEVBQUlzRCxPQUN0QjVELEtBQUttRCxTQUFTa0IsSUFBSSxNQUFPLE9BRXpCLElBQU05RCxFQUNKUCxLQUFLK0IsS0FBSzdCLGNBQWMsbUNBQzFCRixLQUFLTyxJQUFNb0QsT0FBT3BELEVBQUlxRCxPQUN0QjVELEtBQUttRCxTQUFTa0IsSUFBSSxNQUFPLE9BRXpCLElBQU16RCxFQUNKWixLQUFLK0IsS0FBSzdCLGNBQWMsb0NBQzFCRixLQUFLWSxLQUFPK0MsT0FBTy9DLEVBQUtnRCxPQUN4QjVELEtBQUttRCxTQUFTa0IsSUFBSSxPQUFRLFFBRTFCLElBQU01RCxFQUNKVCxLQUFLK0IsS0FBSzdCLGNBQWMsb0NBQzFCRixLQUFLUyxLQUFPa0QsT0FBT2xELEVBQUttRCxPQUN4QjVELEtBQUttRCxTQUFTa0IsSUFBSSxPQUFRLGFBRTFCLElBQU0xRCxFQUNKWCxLQUFLK0IsS0FBSzdCLGNBQWMsa0NBQzFCRixLQUFLVyxHQUFLZ0QsT0FBT2hELEVBQUdpRCxPQUNwQjVELEtBQUttRCxTQUFTa0IsSUFBSSxLQUFNLFdBRXhCLElBQU12RCxFQUNKZCxLQUFLK0IsS0FBSzdCLGNBQWMsbUNBQ3RCWSxFQUFJOEMsUUFBTzVELEtBQUtjLElBQU02QyxPQUFPN0MsRUFBSThDLFFBQ3JDNUQsS0FBS21ELFNBQVNrQixJQUFJLE1BQU8sbUJBRXpCLElBQU0vQyxFQUNKdEIsS0FBSytCLEtBQUs3QixjQUFjLHFDQUMxQkYsS0FBS3NCLE1BQVFBLEVBQU1vQyxRQUNmMUQsS0FBS3NCLFFBQU9YLEVBQUcyRCxVQUFXLEdBQ3pCdEUsS0FBS3NCLFFBQU9YLEVBQUcyRCxVQUFXLEdBQy9CdEUsS0FBS21ELFNBQVNrQixJQUFJLFFBQVMsV0FFM0IsSUFBTXJELEVBQ0poQixLQUFLK0IsS0FBSzdCLGNBQWMscUNBQzFCRixLQUFLZ0IsTUFBUUEsRUFBTTBDLFFBQ2YxRCxLQUFLZ0IsUUFBT0YsRUFBSXdELFVBQVcsR0FDMUJ0RSxLQUFLZ0IsUUFBT0YsRUFBSXdELFVBQVcsR0FDaEN0RSxLQUFLbUQsU0FBU2tCLElBQUksUUFBUyxjQUUzQixJQUFNbkQsRUFDSmxCLEtBQUsrQixLQUFLN0IsY0FBYyxtQ0FDMUJGLEtBQUtrQixJQUFNQSxFQUFJd0MsUUFDZjFELEtBQUttRCxTQUFTa0IsSUFBSSxNQUFPLFNBRXpCLElBQU1qRCxFQUNKcEIsS0FBSytCLEtBQUs3QixjQUFjLHdDQUMxQkYsS0FBS29CLFNBQVdBLEVBQVNzQyxRQUN6QjFELEtBQUttRCxTQUFTa0IsSUFBSSxXQUFZLGNBRTlCLElBQU03QyxFQUNKeEIsS0FBSytCLEtBQUs3QixjQUFjLHdDQUMxQkYsS0FBS3dCLFNBQVdBLEVBQVNrQyxRQUN6QjFELEtBQUttRCxTQUFTa0IsSUFBSSxXQUFZLGFBMURSLENBMkR2QixHLHdCQUVPLFdBQVUsV0FDaEJyRSxLQUFLbUQsU0FBU2pCLFNBQVEsU0FBQ3FDLEVBQWVYLEcsTUFDOUJZLEVBQW1CLFFBQVQsSUFBS3pDLFlBQUlKLElBQUFBLE9BQUEsRUFBQUEsRUFBRXpCLGNBQUYscUNBQThDMEQsRUFBOUMsTUFDckJZLGFBQW1CekIsbUJBQ2pCeUIsR0FBZ0QsaUJBQTlCLEVBQUtoQixPQUFPQyxTQUFTYyxLQUN6Q0MsRUFBUVosTUFBUixVQUFtQixFQUFLSixPQUFPQyxTQUFaLFVBQXdCYyxNQUd6Q0MsR0FBZ0Qsa0JBQTlCLEVBQUtoQixPQUFPQyxTQUFTYyxLQUNyQyxFQUFLZixPQUFPQyxTQUFaLFVBQXdCYyxJQUMxQkMsRUFBUWQsU0FBVSxFQUVsQmMsRUFBUWQsU0FBVSxHQUl0QixFQUFLdEQsWUFFUixHQUNGLEcseUJBRU8sV0FBVyxJLElBQUEsT0FDWHFFLEVBQVMsa0JBQU0sRUFBSy9DLFlBQVgsRUFNSCxRQUFaLEVBQUExQixLQUFLQyxlQUFPMEIsSUFBQUEsR0FBQUEsRUFBRVUsaUJBQWlCLFlBQWFvQyxHQUNoQyxRQUFaLEVBQUF6RSxLQUFLQyxlQUFPNEIsSUFBQUEsR0FBQUEsRUFBRVEsaUJBQWlCLFdBTmYsU0FBVnFDLEksUUFDUSxRQUFaLElBQUt6RSxlQUFPMEIsSUFBQUEsR0FBQUEsRUFBRWdELG9CQUFvQixZQUFhRixHQUNuQyxRQUFaLElBQUt4RSxlQUFPNEIsSUFBQUEsR0FBQUEsRUFBRThDLG9CQUFvQixVQUFXRCxFQUM5QyxHQUlGLEcsdUJBRU8sU0FBVXZDLEdBQ2hCLElBQVFvQyxFQUFRcEMsRUFBUm9DLElBQ0ksY0FBUkEsR0FBK0IsWUFBUkEsR0FBNkIsZUFBUkEsR0FBZ0MsY0FBUkEsR0FDdEV2RSxLQUFLMEIsWUFFUixHLHVCQUVPLFdBQ04xQixLQUFLMEIsWUFDTixNLGdGQXBQRzVCLEdBdVBOOEUsU0FBUzNDLGlCQUFpQixXQUFXQyxTQUFRLFNBQUNDLEdBQUQsT0FBTyxJQUFJckMsRUFBV3FDLEVBQXRCLEcsR0NuUXpDMEMsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCMUIsSUFBakIyQixFQUNILE9BQU9BLEVBQWFDLFFBR3JCLElBQUlDLEVBQVNMLEVBQXlCRSxHQUFZLENBR2pERSxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkosR0FBVUssS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0gsR0FHcEVJLEVBQU9ELE9BQ2YsQ0FHQUgsRUFBb0JPLEVBQUlGLEVGekJwQnRGLEVBQVcsR0FDZmlGLEVBQW9CUSxFQUFJLFNBQVNDLEVBQVFDLEVBQVVDLEVBQUlDLEdBQ3RELElBQUdGLEVBQUgsQ0FNQSxJQUFJRyxFQUFlQyxJQUNuQixJQUFTQyxFQUFJLEVBQUdBLEVBQUloRyxFQUFTaUcsT0FBUUQsSUFBSyxDQUNyQ0wsRUFBVzNGLEVBQVNnRyxHQUFHLEdBQ3ZCSixFQUFLNUYsRUFBU2dHLEdBQUcsR0FDakJILEVBQVc3RixFQUFTZ0csR0FBRyxHQUUzQixJQUpBLElBR0lFLEdBQVksRUFDUEMsRUFBSSxFQUFHQSxFQUFJUixFQUFTTSxPQUFRRSxNQUNwQixFQUFYTixHQUFzQkMsR0FBZ0JELElBQWFPLE9BQU9DLEtBQUtwQixFQUFvQlEsR0FBR2EsT0FBTSxTQUFTNUIsR0FBTyxPQUFPTyxFQUFvQlEsRUFBRWYsR0FBS2lCLEVBQVNRLEdBQUssSUFDaEtSLEVBQVNZLE9BQU9KLElBQUssSUFFckJELEdBQVksRUFDVEwsRUFBV0MsSUFBY0EsRUFBZUQsSUFHN0MsR0FBR0ssRUFBVyxDQUNibEcsRUFBU3VHLE9BQU9QLElBQUssR0FDckIsSUFBSVEsRUFBSVosU0FDRXBDLElBQU5nRCxJQUFpQmQsRUFBU2MsRUFDL0IsQ0FDRCxDQUNBLE9BQU9kLENBckJQLENBSkNHLEVBQVdBLEdBQVksRUFDdkIsSUFBSSxJQUFJRyxFQUFJaEcsRUFBU2lHLE9BQVFELEVBQUksR0FBS2hHLEVBQVNnRyxFQUFJLEdBQUcsR0FBS0gsRUFBVUcsSUFBS2hHLEVBQVNnRyxHQUFLaEcsRUFBU2dHLEVBQUksR0FDckdoRyxFQUFTZ0csR0FBSyxDQUFDTCxFQUFVQyxFQUFJQyxFQXdCL0IsRUc1QkFaLEVBQW9Cd0IsRUFBSSxTQUFTcEIsR0FDaEMsSUFBSXFCLEVBQVNyQixHQUFVQSxFQUFPc0IsV0FDN0IsV0FBYSxPQUFPdEIsRUFBZ0IsT0FBRyxFQUN2QyxXQUFhLE9BQU9BLENBQVEsRUFFN0IsT0FEQUosRUFBb0IyQixFQUFFRixFQUFRLENBQUVHLEVBQUdILElBQzVCQSxDQUNSLEVDTkF6QixFQUFvQjJCLEVBQUksU0FBU3hCLEVBQVMwQixHQUN6QyxJQUFJLElBQUlwQyxLQUFPb0MsRUFDWDdCLEVBQW9COEIsRUFBRUQsRUFBWXBDLEtBQVNPLEVBQW9COEIsRUFBRTNCLEVBQVNWLElBQzVFMEIsT0FBT1ksZUFBZTVCLEVBQVNWLEVBQUssQ0FBRXVDLFlBQVksRUFBTTFELElBQUt1RCxFQUFXcEMsSUFHM0UsRUNQQU8sRUFBb0I4QixFQUFJLFNBQVNHLEVBQUtDLEdBQVEsT0FBT2YsT0FBT2dCLFVBQVVDLGVBQWU5QixLQUFLMkIsRUFBS0MsRUFBTyxFLFdDS3RHLElBQUlHLEVBQWtCLENBQ3JCLElBQUssRUFDTCxJQUFLLEdBYU5yQyxFQUFvQlEsRUFBRVUsRUFBSSxTQUFTb0IsR0FBVyxPQUFvQyxJQUE3QkQsRUFBZ0JDLEVBQWdCLEVBR3JGLElBQUlDLEVBQXVCLFNBQVNDLEVBQTRCQyxHQUMvRCxJQUtJeEMsRUFBVXFDLEVBTFY1QixFQUFXK0IsRUFBSyxHQUNoQkMsRUFBY0QsRUFBSyxHQUNuQkUsRUFBVUYsRUFBSyxHQUdJMUIsRUFBSSxFQUMzQixHQUFHTCxFQUFTa0MsTUFBSyxTQUFTQyxHQUFNLE9BQStCLElBQXhCUixFQUFnQlEsRUFBVyxJQUFJLENBQ3JFLElBQUk1QyxLQUFZeUMsRUFDWjFDLEVBQW9COEIsRUFBRVksRUFBYXpDLEtBQ3JDRCxFQUFvQk8sRUFBRU4sR0FBWXlDLEVBQVl6QyxJQUdoRCxHQUFHMEMsRUFBUyxJQUFJbEMsRUFBU2tDLEVBQVEzQyxFQUNsQyxDQUVBLElBREd3QyxHQUE0QkEsRUFBMkJDLEdBQ3JEMUIsRUFBSUwsRUFBU00sT0FBUUQsSUFDekJ1QixFQUFVNUIsRUFBU0ssR0FDaEJmLEVBQW9COEIsRUFBRU8sRUFBaUJDLElBQVlELEVBQWdCQyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCQyxHQUFXLEVBRTVCLE9BQU90QyxFQUFvQlEsRUFBRUMsRUFDOUIsRUFFSXFDLEVBQXFCQyxLQUE4Qix3QkFBSUEsS0FBOEIseUJBQUssR0FDOUZELEVBQW1CMUYsUUFBUW1GLEVBQXFCOUUsS0FBSyxLQUFNLElBQzNEcUYsRUFBbUJ4RixLQUFPaUYsRUFBcUI5RSxLQUFLLEtBQU1xRixFQUFtQnhGLEtBQUtHLEtBQUtxRixHLElDaER2RixJQUFJRSxFQUFzQmhELEVBQW9CUSxPQUFFakMsRUFBVyxDQUFDLElBQUksTUFBTSxXQUFhLE9BQU95QixFQUFvQixJQUFNLElBQ3BIZ0QsRUFBc0JoRCxFQUFvQlEsRUFBRXdDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXRhLXNsaWRlci93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vZGVtby1wYWdlL2RlbW8tcGFnZS50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSBmdW5jdGlvbihyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpIHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGNodW5rSWRzID0gZGVmZXJyZWRbaV1bMF07XG5cdFx0dmFyIGZuID0gZGVmZXJyZWRbaV1bMV07XG5cdFx0dmFyIHByaW9yaXR5ID0gZGVmZXJyZWRbaV1bMl07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pOyB9KSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgeyBNb2RlbElucHV0U3RhdGUsIE1vZGVsVmFsIH0gZnJvbSAnLi4vc3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XG5pbXBvcnQgJy4uL3NyYy9zbGlkZXInO1xuaW1wb3J0ICcuL3N0eWxlcy5zY3NzJztcblxuaW50ZXJmYWNlIEVsZW1lbnRMaXN0ZW5lciB7XG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZTogJ2NoYW5nZScsIGxpc3RlbmVyOiAoZXZlbnQ6IElucHV0RXZlbnQpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgRWxlbWVudFByZXNzIHtcbiAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlOiAna2V5ZG93bicgfCAndG91Y2htb3ZlJywgbGlzdGVuZXI6IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCwgb3B0aW9ucz86IHsgcGFzc2l2ZTogYm9vbGVhbiB9KTogdm9pZDtcbn1cblxuY2xhc3MgRGVtb1NsaWRlciB7XG4gIHJvb3Q6IEVsZW1lbnQ7XG5cbiAgZm9ybSE6IEVsZW1lbnQgfCBudWxsO1xuXG4gIG1pbiE6IG51bWJlciB8IG51bGw7XG5cbiAgbWF4ITogbnVtYmVyIHwgbnVsbDtcblxuICBzdGVwITogbnVtYmVyIHwgbnVsbDtcblxuICBmcm9tITogbnVtYmVyIHwgbnVsbDtcblxuICB0byE6IG51bWJlciB8IG51bGw7XG5cbiAgZ2FwITogbnVtYmVyIHwgbnVsbDtcblxuICByYW5nZSE6IGJvb2xlYW47XG5cbiAgbWFya3MhOiBib29sZWFuO1xuXG4gIHRpcCE6IGJvb2xlYW47XG5cbiAgcHJvZ3Jlc3MhOiBib29sZWFuO1xuXG4gIHZlcnRpY2FsITogYm9vbGVhbjtcblxuICBjb250ZW50ITogRWxlbWVudCB8IG51bGw7XG5cbiAgbWFwRWxlbXMhOiBNYXA8c3RyaW5nLCBNb2RlbFZhbD47XG5cbiAgc2xpZGVyITogaW1wb3J0KCdjOi9Db2RlL01ldGEgU2xpZGVyL3NyYy9jb21wb25lbnRzL1ByZXNlbnRlci9QcmVzZW50ZXInKS5kZWZhdWx0O1xuXG4gIHRodW1iPzogRWxlbWVudFByZXNzIHwgbnVsbDtcblxuICBzdGF0ZU9iamVjdCE6IHtcbiAgICBtaW46IG51bWJlcjtcbiAgICBtYXg6IG51bWJlcjtcbiAgICB2YWx1ZUZyb206IG51bWJlcjtcbiAgICB2YWx1ZVRvOiBudW1iZXI7XG4gICAgc3RlcDogbnVtYmVyO1xuICAgIHNjYWxlUGVyY2VudEdhcDogbnVtYmVyO1xuICAgIHNjYWxlTWFya3M6IGJvb2xlYW47IGlzVGlwOlxuICAgIGJvb2xlYW47IGlzUHJvZ3Jlc3M6IGJvb2xlYW47XG4gICAgaXNSYW5nZTogYm9vbGVhbjtcbiAgICBpc1ZlcnRpY2FsOiBib29sZWFuO1xuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHJvb3Q6IEVsZW1lbnQpIHtcbiAgICB0aGlzLnJvb3QgPSByb290O1xuICAgIHRoaXMuY29udGVudCA9IHJvb3QucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fY29udGVudCcpO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0KCkge1xuICAgIHRoaXMuZmluZEVsZW1zKCk7XG5cbiAgICB0aGlzLnN0YXRlT2JqZWN0ID0ge1xuICAgICAgbWluOiB0aGlzLm1pbiB8fCAwLFxuICAgICAgbWF4OiB0aGlzLm1heCB8fCAxMCxcbiAgICAgIHZhbHVlRnJvbTogdGhpcy5mcm9tIHx8IDAsXG4gICAgICB2YWx1ZVRvOiB0aGlzLnRvIHx8IDAsXG4gICAgICBzdGVwOiB0aGlzLnN0ZXAgfHwgMSxcbiAgICAgIHNjYWxlUGVyY2VudEdhcDogdGhpcy5nYXAgfHwgMSxcbiAgICAgIHNjYWxlTWFya3M6IHRoaXMubWFya3MsXG4gICAgICBpc1RpcDogdGhpcy50aXAsXG4gICAgICBpc1Byb2dyZXNzOiB0aGlzLnByb2dyZXNzLFxuICAgICAgaXNSYW5nZTogdGhpcy5yYW5nZSxcbiAgICAgIGlzVmVydGljYWw6IHRoaXMudmVydGljYWwsXG4gICAgfTtcblxuICAgIHRoaXMuYWRkU2xpZGVyKHRoaXMuc3RhdGVPYmplY3QpO1xuICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuXG4gICAgaWYgKHRoaXMuY29udGVudD8ucXVlcnlTZWxlY3RvcignLnBsdWdpbi1zbGlkZXJfX3RodW1iJykpIHtcbiAgICAgIHRoaXMudGh1bWIgPSB0aGlzLmNvbnRlbnQ/LnF1ZXJ5U2VsZWN0b3IoJy5wbHVnaW4tc2xpZGVyX190aHVtYicpO1xuICAgIH1cblxuICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIGFkZExpc3RlbmVycygpIHtcbiAgICBpZiAodGhpcy5mb3JtKSB7XG4gICAgICBjb25zdCBlbGVtczogRWxlbWVudExpc3RlbmVyW10gPSBbXTtcbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19pbnB1dCcpLmZvckVhY2goKGUpID0+IHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICBlbGVtcy5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZWxlbXMuZm9yRWFjaCgoZSkgPT4gZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZVN0YXRlLmJpbmQodGhpcykpKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRlbnQ/LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgdGhpcy5jb250ZW50Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMudXBkYXRlRm9ybS5iaW5kKHRoaXMpKTtcblxuICAgIGlmICh0aGlzLnRodW1iKSB7XG4gICAgICB0aGlzLnRodW1iPy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kZWxLZXkuYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLnRodW1iPy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAndG91Y2htb3ZlJyxcbiAgICAgICAgdGhpcy50b3VjaERvd24uYmluZCh0aGlzKSxcbiAgICAgICAgeyBwYXNzaXZlOiB0cnVlIH0sXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RhdGUoZTogSW5wdXRFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBlO1xuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICBjb25zdCB7IHJvbGUgfSA9IHRhcmdldC5kYXRhc2V0O1xuICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLm1hcEVsZW1zLmdldChgJHtyb2xlfWApO1xuICAgICAgaWYgKHBhcmFtID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IHZhbHVlUGFyYW0gPSB0aGlzLnNsaWRlci5nZXRWYWx1ZShwYXJhbSk7XG4gICAgICBsZXQgdmFsdWVGb3JtOiBudW1iZXIgfCBib29sZWFuIHwgdW5kZWZpbmVkO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZVBhcmFtID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdmFsdWVGb3JtID0gdGFyZ2V0LmNoZWNrZWQ7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZVBhcmFtID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YWx1ZUZvcm0gPSBOdW1iZXIodGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlRm9ybSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZUZvcm0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnNsaWRlci5zZXRWYWx1ZShgJHtwYXJhbX1gLCB2YWx1ZUZvcm0pO1xuICAgICAgICB0aGlzLnNsaWRlci5zZXROZXdTdGF0ZSh0aGlzLnNsaWRlci5nZXRTdGF0ZSgpKTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNsaWRlci5nZXRWYWx1ZShgJHtwYXJhbX1gKSA9PT0gJ2Jvb2xlYW4nIHx8IHBhcmFtID09PSAnc2NhbGVQZXJjZW50R2FwJykge1xuICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnQpIHRoaXMuY29udGVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICB0aGlzLmFkZFNsaWRlcih0aGlzLnNsaWRlci5nZXRTdGF0ZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFNsaWRlcihvcHRpb25zOiBNb2RlbElucHV0U3RhdGUpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudCkgcmV0dXJuO1xuICAgIHRoaXMuc2xpZGVyID0gJCh0aGlzLmNvbnRlbnQpLnNsaWRlclBsdWdpbihvcHRpb25zKTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZEVsZW1zKCkge1xuICAgIHRoaXMubWFwRWxlbXMgPSBuZXcgTWFwKCk7XG5cbiAgICB0aGlzLmZvcm0gPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fZm9ybScpO1xuICAgIGlmICghdGhpcy5mb3JtKSByZXR1cm47XG4gICAgY29uc3QgbWluID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gbWluXScpO1xuICAgIHRoaXMubWluID0gTnVtYmVyKG1pbi52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ21pbicsICdtaW4nKTtcblxuICAgIGNvbnN0IG1heCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1heF0nKTtcbiAgICB0aGlzLm1heCA9IE51bWJlcihtYXgudmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdtYXgnLCAnbWF4Jyk7XG5cbiAgICBjb25zdCBzdGVwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gc3RlcF0nKTtcbiAgICB0aGlzLnN0ZXAgPSBOdW1iZXIoc3RlcC52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3N0ZXAnLCAnc3RlcCcpO1xuXG4gICAgY29uc3QgZnJvbSA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IGZyb21dJyk7XG4gICAgdGhpcy5mcm9tID0gTnVtYmVyKGZyb20udmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdmcm9tJywgJ3ZhbHVlRnJvbScpO1xuXG4gICAgY29uc3QgdG8gPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSB0b10nKTtcbiAgICB0aGlzLnRvID0gTnVtYmVyKHRvLnZhbHVlKTtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgndG8nLCAndmFsdWVUbycpO1xuXG4gICAgY29uc3QgZ2FwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gZ2FwXScpO1xuICAgIGlmIChnYXAudmFsdWUpIHRoaXMuZ2FwID0gTnVtYmVyKGdhcC52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ2dhcCcsICdzY2FsZVBlcmNlbnRHYXAnKTtcblxuICAgIGNvbnN0IHJhbmdlID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gcmFuZ2VdJyk7XG4gICAgdGhpcy5yYW5nZSA9IHJhbmdlLmNoZWNrZWQ7XG4gICAgaWYgKHRoaXMucmFuZ2UpIHRvLmRpc2FibGVkID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLnJhbmdlKSB0by5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3JhbmdlJywgJ2lzUmFuZ2UnKTtcblxuICAgIGNvbnN0IG1hcmtzID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gbWFya3NdJyk7XG4gICAgdGhpcy5tYXJrcyA9IG1hcmtzLmNoZWNrZWQ7XG4gICAgaWYgKHRoaXMubWFya3MpIGdhcC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5tYXJrcykgZ2FwLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgnbWFya3MnLCAnc2NhbGVNYXJrcycpO1xuXG4gICAgY29uc3QgdGlwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gdGlwXScpO1xuICAgIHRoaXMudGlwID0gdGlwLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3RpcCcsICdpc1RpcCcpO1xuXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSBwcm9ncmVzc10nKTtcbiAgICB0aGlzLnByb2dyZXNzID0gcHJvZ3Jlc3MuY2hlY2tlZDtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgncHJvZ3Jlc3MnLCAnaXNQcm9ncmVzcycpO1xuXG4gICAgY29uc3QgdmVydGljYWwgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSB2ZXJ0aWNhbF0nKTtcbiAgICB0aGlzLnZlcnRpY2FsID0gdmVydGljYWwuY2hlY2tlZDtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgndmVydGljYWwnLCAnaXNWZXJ0aWNhbCcpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVGb3JtKCkge1xuICAgIHRoaXMubWFwRWxlbXMuZm9yRWFjaCgoa2V5OiBNb2RlbFZhbCwgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZm9ybT8ucXVlcnlTZWxlY3RvcihgLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gJHt2YWx1ZX1dYCk7XG4gICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgdHlwZW9mIHRoaXMuc2xpZGVyLmdldFZhbHVlKGtleSkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSA9IGAke3RoaXMuc2xpZGVyLmdldFZhbHVlKGAke2tleX1gKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgdHlwZW9mIHRoaXMuc2xpZGVyLmdldFZhbHVlKGtleSkgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGlmICh0aGlzLnNsaWRlci5nZXRWYWx1ZShgJHtrZXl9YCkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmluZEVsZW1zKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNsaWNrKCkge1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHRoaXMudXBkYXRlRm9ybSgpO1xuICAgIGNvbnN0IG1vdXNlVXAgPSAoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHVwZGF0ZSk7XG4gICAgICB0aGlzLmNvbnRlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb250ZW50Py5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB1cGRhdGUpO1xuICAgIHRoaXMuY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXApO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kZWxLZXkoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsga2V5IH0gPSBlO1xuICAgIGlmIChrZXkgPT09ICdBcnJvd0xlZnQnIHx8IGtleSA9PT0gJ0Fycm93VXAnIHx8IGtleSA9PT0gJ0Fycm93UmlnaHQnIHx8IGtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdG91Y2hEb3duKCkge1xuICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICB9XG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXInKS5mb3JFYWNoKChlKSA9PiBuZXcgRGVtb1NsaWRlcihlKSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NTc3OiAwLFxuXHQzMDk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gZnVuY3Rpb24oY2h1bmtJZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwOyB9O1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IGZ1bmN0aW9uKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSB7XG5cdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG5cdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cdHZhciBydW50aW1lID0gZGF0YVsyXTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKGZ1bmN0aW9uKGlkKSB7IHJldHVybiBpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwOyB9KSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttZXRhX3NsaWRlclwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttZXRhX3NsaWRlclwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzc1NSwyNzJdLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oNzc0KTsgfSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJEZW1vU2xpZGVyIiwicm9vdCIsInRoaXMiLCJjb250ZW50IiwicXVlcnlTZWxlY3RvciIsImluaXQiLCJmaW5kRWxlbXMiLCJzdGF0ZU9iamVjdCIsIm1pbiIsIm1heCIsInZhbHVlRnJvbSIsImZyb20iLCJ2YWx1ZVRvIiwidG8iLCJzdGVwIiwic2NhbGVQZXJjZW50R2FwIiwiZ2FwIiwic2NhbGVNYXJrcyIsIm1hcmtzIiwiaXNUaXAiLCJ0aXAiLCJpc1Byb2dyZXNzIiwicHJvZ3Jlc3MiLCJpc1JhbmdlIiwicmFuZ2UiLCJpc1ZlcnRpY2FsIiwidmVydGljYWwiLCJhZGRTbGlkZXIiLCJ1cGRhdGVGb3JtIiwiX2EiLCJ0aHVtYiIsIl9iIiwiYWRkTGlzdGVuZXJzIiwiZm9ybSIsImVsZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlIiwicHVzaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1cGRhdGVTdGF0ZSIsImJpbmQiLCJoYW5kbGVDbGljayIsIl9jIiwiaGFuZGVsS2V5IiwiX2QiLCJ0b3VjaERvd24iLCJwYXNzaXZlIiwidGFyZ2V0IiwiSFRNTElucHV0RWxlbWVudCIsInJvbGUiLCJkYXRhc2V0IiwicGFyYW0iLCJtYXBFbGVtcyIsImdldCIsInVuZGVmaW5lZCIsInZhbHVlRm9ybSIsInZhbHVlUGFyYW0iLCJzbGlkZXIiLCJnZXRWYWx1ZSIsImNoZWNrZWQiLCJOdW1iZXIiLCJ2YWx1ZSIsInNldFZhbHVlIiwic2V0TmV3U3RhdGUiLCJnZXRTdGF0ZSIsImlubmVySFRNTCIsIm9wdGlvbnMiLCIkIiwic2xpZGVyUGx1Z2luIiwiTWFwIiwic2V0IiwiZGlzYWJsZWQiLCJrZXkiLCJlbGVtZW50IiwidXBkYXRlIiwibW91c2VVcCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwibGVuZ3RoIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsInNwbGljZSIsInIiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=