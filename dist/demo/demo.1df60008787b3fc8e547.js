!function(){"use strict";var e,t={774:function(e,t,r){var i=r(755),s=r.n(i);r(272);function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.content=t.querySelector(".slider__content"),this.init()}var t,r,i;return t=e,(r=[{key:"init",value:function(){var e,t;this.findElems(),this.stateObject={min:this.min||0,max:this.max||10,valueFrom:this.from||0,valueTo:this.to||0,step:this.step||1,scalePercentGap:this.gap||1,scaleMarks:this.marks,isTip:this.tip,isProgress:this.progress,isRange:this.range,isVertical:this.vertical},this.addSlider(this.stateObject),this.updateForm(),(null===(e=this.content)||void 0===e?void 0:e.querySelector(".plugin-slider__thumb"))&&(this.thumb=null===(t=this.content)||void 0===t?void 0:t.querySelector(".plugin-slider__thumb")),this.addListeners()}},{key:"addListeners",value:function(){var e,t,r,i,s=this;if(this.form){var n=[];this.form.querySelectorAll(".slider__input").forEach((function(e){e&&n.push(e)})),n.forEach((function(e){return e.addEventListener("change",s.updateState.bind(s))}))}null===(e=this.content)||void 0===e||e.addEventListener("mousedown",this.handleClick.bind(this)),null===(t=this.content)||void 0===t||t.addEventListener("click",this.updateForm.bind(this)),this.thumb&&(null===(r=this.thumb)||void 0===r||r.addEventListener("keydown",this.handelKey.bind(this)),null===(i=this.thumb)||void 0===i||i.addEventListener("touchmove",this.touchDown.bind(this),{passive:!0}))}},{key:"updateState",value:function(e){var t=e.target;if(t instanceof HTMLInputElement){var r=t.dataset.role,i=this.mapElems.get("".concat(r));if(void 0===i)return;var s,n=this.slider.getValue(i);void 0!==(s="boolean"==typeof n?t.checked:"number"==typeof n?Number(t.value):void 0)&&(this.slider.setValue("".concat(i),s),this.slider.setNewState(this.slider.getState()),this.updateForm())}}},{key:"addSlider",value:function(e){this.content&&(this.slider=s()(this.content).sliderPlugin(e))}},{key:"findElems",value:function(){if(this.mapElems=new Map,this.form=this.root.querySelector(".slider__form"),this.form){var e=this.form.querySelector(".slider__input[data-role = min]");this.min=Number(e.value),this.mapElems.set("min","min");var t=this.form.querySelector(".slider__input[data-role = max]");this.max=Number(t.value),this.mapElems.set("max","max");var r=this.form.querySelector(".slider__input[data-role = step]");this.step=Number(r.value),this.mapElems.set("step","step");var i=this.form.querySelector(".slider__input[data-role = from]");this.from=Number(i.value),this.mapElems.set("from","valueFrom");var s=this.form.querySelector(".slider__input[data-role = to]");this.to=Number(s.value),this.mapElems.set("to","valueTo");var n=this.form.querySelector(".slider__input[data-role = gap]");n.value&&(this.gap=Number(n.value)),this.mapElems.set("gap","scalePercentGap");var a=this.form.querySelector(".slider__input[data-role = range]");this.range=a.checked,this.range&&(s.disabled=!1),this.range||(s.disabled=!0),this.mapElems.set("range","isRange");var o=this.form.querySelector(".slider__input[data-role = marks]");this.marks=o.checked,this.marks&&(n.disabled=!1),this.marks||(n.disabled=!0),this.mapElems.set("marks","scaleMarks");var l=this.form.querySelector(".slider__input[data-role = tip]");this.tip=l.checked,this.mapElems.set("tip","isTip");var u=this.form.querySelector(".slider__input[data-role = progress]");this.progress=u.checked,this.mapElems.set("progress","isProgress");var c=this.form.querySelector(".slider__input[data-role = vertical]");this.vertical=c.checked,this.mapElems.set("vertical","isVertical")}}},{key:"updateForm",value:function(){var e=this;this.mapElems.forEach((function(t,r){var i,s=null===(i=e.form)||void 0===i?void 0:i.querySelector(".slider__input[data-role = ".concat(r,"]"));s instanceof HTMLInputElement&&(s&&"number"==typeof e.slider.getValue(t)&&(s.value="".concat(e.slider.getValue("".concat(t)))),s&&"boolean"==typeof e.slider.getValue(t)&&(e.slider.getValue("".concat(t))?s.checked=!0:s.checked=!1),e.findElems())}))}},{key:"handleClick",value:function(){var e,t,r=this,i=function(){return r.updateForm()};null===(e=this.content)||void 0===e||e.addEventListener("mousemove",i),null===(t=this.content)||void 0===t||t.addEventListener("mouseup",(function e(){var t,s;null===(t=r.content)||void 0===t||t.removeEventListener("mousemove",i),null===(s=r.content)||void 0===s||s.removeEventListener("mouseup",e)}))}},{key:"handelKey",value:function(e){var t=e.key;"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||this.updateForm()}},{key:"touchDown",value:function(){this.updateForm()}}])&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.querySelectorAll(".slider").forEach((function(e){return new a(e)}))}},r={};function i(e){var s=r[e];if(void 0!==s)return s.exports;var n=r[e]={exports:{}};return t[e].call(n.exports,n,n.exports,i),n.exports}i.m=t,e=[],i.O=function(t,r,s,n){if(!r){var a=1/0;for(c=0;c<e.length;c++){r=e[c][0],s=e[c][1],n=e[c][2];for(var o=!0,l=0;l<r.length;l++)(!1&n||a>=n)&&Object.keys(i.O).every((function(e){return i.O[e](r[l])}))?r.splice(l--,1):(o=!1,n<a&&(a=n));if(o){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[r,s,n]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={577:0,309:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,n,a=r[0],o=r[1],l=r[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(l)var c=l(i)}for(t&&t(r);u<a.length;u++)n=a[u],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(c)},r=self.webpackChunkmeta_slider=self.webpackChunkmeta_slider||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var s=i.O(void 0,[755,272],(function(){return i(774)}));s=i.O(s)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vbWV0YS1zbGlkZXIvLi9kZW1vLXBhZ2UvZGVtby1wYWdlLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IGZ1bmN0aW9uKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgY2h1bmtJZHMgPSBkZWZlcnJlZFtpXVswXTtcblx0XHR2YXIgZm4gPSBkZWZlcnJlZFtpXVsxXTtcblx0XHR2YXIgcHJpb3JpdHkgPSBkZWZlcnJlZFtpXVsyXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoZnVuY3Rpb24oa2V5KSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSk7IH0pKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCB7IE1vZGVsSW5wdXRTdGF0ZSwgTW9kZWxWYWwgfSBmcm9tICcuLi9zcmMvY29tcG9uZW50cy9JbnRlcmZhY2VzJztcbmltcG9ydCAnLi4vc3JjL3NsaWRlcic7XG5pbXBvcnQgJy4vc3R5bGVzLnNjc3MnO1xuXG5pbnRlcmZhY2UgRWxlbWVudExpc3RlbmVyIHtcbiAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlOiAnY2hhbmdlJywgbGlzdGVuZXI6IChldmVudDogSW5wdXRFdmVudCkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmludGVyZmFjZSBFbGVtZW50UHJlc3Mge1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGU6ICdrZXlkb3duJyB8ICd0b3VjaG1vdmUnLCBsaXN0ZW5lcjogKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkLCBvcHRpb25zPzogeyBwYXNzaXZlOiBib29sZWFuIH0pOiB2b2lkO1xufVxuXG5jbGFzcyBEZW1vU2xpZGVyIHtcbiAgcm9vdDogRWxlbWVudDtcblxuICBmb3JtITogRWxlbWVudCB8IG51bGw7XG5cbiAgbWluITogbnVtYmVyIHwgbnVsbDtcblxuICBtYXghOiBudW1iZXIgfCBudWxsO1xuXG4gIHN0ZXAhOiBudW1iZXIgfCBudWxsO1xuXG4gIGZyb20hOiBudW1iZXIgfCBudWxsO1xuXG4gIHRvITogbnVtYmVyIHwgbnVsbDtcblxuICBnYXAhOiBudW1iZXIgfCBudWxsO1xuXG4gIHJhbmdlITogYm9vbGVhbjtcblxuICBtYXJrcyE6IGJvb2xlYW47XG5cbiAgdGlwITogYm9vbGVhbjtcblxuICBwcm9ncmVzcyE6IGJvb2xlYW47XG5cbiAgdmVydGljYWwhOiBib29sZWFuO1xuXG4gIGNvbnRlbnQhOiBFbGVtZW50IHwgbnVsbDtcblxuICBtYXBFbGVtcyE6IE1hcDxzdHJpbmcsIE1vZGVsVmFsPjtcblxuICBzbGlkZXIhOiBpbXBvcnQoJ2M6L0NvZGUvTWV0YSBTbGlkZXIvc3JjL2NvbXBvbmVudHMvUHJlc2VudGVyL1ByZXNlbnRlcicpLmRlZmF1bHQ7XG5cbiAgdGh1bWI/OiBFbGVtZW50UHJlc3MgfCBudWxsO1xuXG4gIHN0YXRlT2JqZWN0IToge1xuICAgIG1pbjogbnVtYmVyO1xuICAgIG1heDogbnVtYmVyO1xuICAgIHZhbHVlRnJvbTogbnVtYmVyO1xuICAgIHZhbHVlVG86IG51bWJlcjtcbiAgICBzdGVwOiBudW1iZXI7XG4gICAgc2NhbGVQZXJjZW50R2FwOiBudW1iZXI7XG4gICAgc2NhbGVNYXJrczogYm9vbGVhbjsgaXNUaXA6XG4gICAgYm9vbGVhbjsgaXNQcm9ncmVzczogYm9vbGVhbjtcbiAgICBpc1JhbmdlOiBib29sZWFuO1xuICAgIGlzVmVydGljYWw6IGJvb2xlYW47XG4gIH07XG5cbiAgY29uc3RydWN0b3Iocm9vdDogRWxlbWVudCkge1xuICAgIHRoaXMucm9vdCA9IHJvb3Q7XG4gICAgdGhpcy5jb250ZW50ID0gcm9vdC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19jb250ZW50Jyk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBwcml2YXRlIGluaXQoKSB7XG4gICAgdGhpcy5maW5kRWxlbXMoKTtcblxuICAgIHRoaXMuc3RhdGVPYmplY3QgPSB7XG4gICAgICBtaW46IHRoaXMubWluIHx8IDAsXG4gICAgICBtYXg6IHRoaXMubWF4IHx8IDEwLFxuICAgICAgdmFsdWVGcm9tOiB0aGlzLmZyb20gfHwgMCxcbiAgICAgIHZhbHVlVG86IHRoaXMudG8gfHwgMCxcbiAgICAgIHN0ZXA6IHRoaXMuc3RlcCB8fCAxLFxuICAgICAgc2NhbGVQZXJjZW50R2FwOiB0aGlzLmdhcCB8fCAxLFxuICAgICAgc2NhbGVNYXJrczogdGhpcy5tYXJrcyxcbiAgICAgIGlzVGlwOiB0aGlzLnRpcCxcbiAgICAgIGlzUHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3MsXG4gICAgICBpc1JhbmdlOiB0aGlzLnJhbmdlLFxuICAgICAgaXNWZXJ0aWNhbDogdGhpcy52ZXJ0aWNhbCxcbiAgICB9O1xuXG4gICAgdGhpcy5hZGRTbGlkZXIodGhpcy5zdGF0ZU9iamVjdCk7XG4gICAgdGhpcy51cGRhdGVGb3JtKCk7XG5cbiAgICBpZiAodGhpcy5jb250ZW50Py5xdWVyeVNlbGVjdG9yKCcucGx1Z2luLXNsaWRlcl9fdGh1bWInKSkge1xuICAgICAgdGhpcy50aHVtYiA9IHRoaXMuY29udGVudD8ucXVlcnlTZWxlY3RvcignLnBsdWdpbi1zbGlkZXJfX3RodW1iJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkTGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgIGNvbnN0IGVsZW1zOiBFbGVtZW50TGlzdGVuZXJbXSA9IFtdO1xuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX2lucHV0JykuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgIGVsZW1zLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBlbGVtcy5mb3JFYWNoKChlKSA9PiBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMudXBkYXRlU3RhdGUuYmluZCh0aGlzKSkpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmNvbnRlbnQ/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy51cGRhdGVGb3JtLmJpbmQodGhpcykpO1xuXG4gICAgaWYgKHRoaXMudGh1bWIpIHtcbiAgICAgIHRoaXMudGh1bWI/LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRlbEtleS5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMudGh1bWI/LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICd0b3VjaG1vdmUnLFxuICAgICAgICB0aGlzLnRvdWNoRG93bi5iaW5kKHRoaXMpLFxuICAgICAgICB7IHBhc3NpdmU6IHRydWUgfSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0ZShlOiBJbnB1dEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgeyB0YXJnZXQgfSA9IGU7XG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHsgcm9sZSB9ID0gdGFyZ2V0LmRhdGFzZXQ7XG4gICAgICBjb25zdCBwYXJhbSA9IHRoaXMubWFwRWxlbXMuZ2V0KGAke3JvbGV9YCk7XG4gICAgICBpZiAocGFyYW0gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgY29uc3QgdmFsdWVQYXJhbSA9IHRoaXMuc2xpZGVyLmdldFZhbHVlKHBhcmFtKTtcbiAgICAgIGxldCB2YWx1ZUZvcm06IG51bWJlciB8IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlUGFyYW0gPT09ICdib29sZWFuJykge1xuICAgICAgICB2YWx1ZUZvcm0gPSB0YXJnZXQuY2hlY2tlZDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlUGFyYW0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhbHVlRm9ybSA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVGb3JtID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlRm9ybSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2xpZGVyLnNldFZhbHVlKGAke3BhcmFtfWAsIHZhbHVlRm9ybSk7XG4gICAgICAgIHRoaXMuc2xpZGVyLnNldE5ld1N0YXRlKHRoaXMuc2xpZGVyLmdldFN0YXRlKCkpO1xuICAgICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFNsaWRlcihvcHRpb25zOiBNb2RlbElucHV0U3RhdGUpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudCkgcmV0dXJuO1xuICAgIHRoaXMuc2xpZGVyID0gJCh0aGlzLmNvbnRlbnQpLnNsaWRlclBsdWdpbihvcHRpb25zKTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZEVsZW1zKCkge1xuICAgIHRoaXMubWFwRWxlbXMgPSBuZXcgTWFwKCk7XG5cbiAgICB0aGlzLmZvcm0gPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fZm9ybScpO1xuICAgIGlmICghdGhpcy5mb3JtKSByZXR1cm47XG4gICAgY29uc3QgbWluID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gbWluXScpO1xuICAgIHRoaXMubWluID0gTnVtYmVyKG1pbi52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ21pbicsICdtaW4nKTtcblxuICAgIGNvbnN0IG1heCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1heF0nKTtcbiAgICB0aGlzLm1heCA9IE51bWJlcihtYXgudmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdtYXgnLCAnbWF4Jyk7XG5cbiAgICBjb25zdCBzdGVwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gc3RlcF0nKTtcbiAgICB0aGlzLnN0ZXAgPSBOdW1iZXIoc3RlcC52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3N0ZXAnLCAnc3RlcCcpO1xuXG4gICAgY29uc3QgZnJvbSA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IGZyb21dJyk7XG4gICAgdGhpcy5mcm9tID0gTnVtYmVyKGZyb20udmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdmcm9tJywgJ3ZhbHVlRnJvbScpO1xuXG4gICAgY29uc3QgdG8gPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSB0b10nKTtcbiAgICB0aGlzLnRvID0gTnVtYmVyKHRvLnZhbHVlKTtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgndG8nLCAndmFsdWVUbycpO1xuXG4gICAgY29uc3QgZ2FwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gZ2FwXScpO1xuICAgIGlmIChnYXAudmFsdWUpIHRoaXMuZ2FwID0gTnVtYmVyKGdhcC52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ2dhcCcsICdzY2FsZVBlcmNlbnRHYXAnKTtcblxuICAgIGNvbnN0IHJhbmdlID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gcmFuZ2VdJyk7XG4gICAgdGhpcy5yYW5nZSA9IHJhbmdlLmNoZWNrZWQ7XG4gICAgaWYgKHRoaXMucmFuZ2UpIHRvLmRpc2FibGVkID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLnJhbmdlKSB0by5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3JhbmdlJywgJ2lzUmFuZ2UnKTtcblxuICAgIGNvbnN0IG1hcmtzID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gbWFya3NdJyk7XG4gICAgdGhpcy5tYXJrcyA9IG1hcmtzLmNoZWNrZWQ7XG4gICAgaWYgKHRoaXMubWFya3MpIGdhcC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5tYXJrcykgZ2FwLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgnbWFya3MnLCAnc2NhbGVNYXJrcycpO1xuXG4gICAgY29uc3QgdGlwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gdGlwXScpO1xuICAgIHRoaXMudGlwID0gdGlwLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3RpcCcsICdpc1RpcCcpO1xuXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSBwcm9ncmVzc10nKTtcbiAgICB0aGlzLnByb2dyZXNzID0gcHJvZ3Jlc3MuY2hlY2tlZDtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgncHJvZ3Jlc3MnLCAnaXNQcm9ncmVzcycpO1xuXG4gICAgY29uc3QgdmVydGljYWwgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSB2ZXJ0aWNhbF0nKTtcbiAgICB0aGlzLnZlcnRpY2FsID0gdmVydGljYWwuY2hlY2tlZDtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgndmVydGljYWwnLCAnaXNWZXJ0aWNhbCcpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVGb3JtKCkge1xuICAgIHRoaXMubWFwRWxlbXMuZm9yRWFjaCgoa2V5OiBNb2RlbFZhbCwgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZm9ybT8ucXVlcnlTZWxlY3RvcihgLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gJHt2YWx1ZX1dYCk7XG4gICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgdHlwZW9mIHRoaXMuc2xpZGVyLmdldFZhbHVlKGtleSkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSA9IGAke3RoaXMuc2xpZGVyLmdldFZhbHVlKGAke2tleX1gKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgdHlwZW9mIHRoaXMuc2xpZGVyLmdldFZhbHVlKGtleSkgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGlmICh0aGlzLnNsaWRlci5nZXRWYWx1ZShgJHtrZXl9YCkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmluZEVsZW1zKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNsaWNrKCkge1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHRoaXMudXBkYXRlRm9ybSgpO1xuICAgIGNvbnN0IG1vdXNlVXAgPSAoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHVwZGF0ZSk7XG4gICAgICB0aGlzLmNvbnRlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb250ZW50Py5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB1cGRhdGUpO1xuICAgIHRoaXMuY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXApO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kZWxLZXkoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsga2V5IH0gPSBlO1xuICAgIGlmIChrZXkgPT09ICdBcnJvd0xlZnQnIHx8IGtleSA9PT0gJ0Fycm93VXAnIHx8IGtleSA9PT0gJ0Fycm93UmlnaHQnIHx8IGtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdG91Y2hEb3duKCkge1xuICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICB9XG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXInKS5mb3JFYWNoKChlKSA9PiBuZXcgRGVtb1NsaWRlcihlKSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NTc3OiAwLFxuXHQzMDk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gZnVuY3Rpb24oY2h1bmtJZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwOyB9O1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IGZ1bmN0aW9uKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSB7XG5cdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG5cdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cdHZhciBydW50aW1lID0gZGF0YVsyXTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKGZ1bmN0aW9uKGlkKSB7IHJldHVybiBpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwOyB9KSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttZXRhX3NsaWRlclwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttZXRhX3NsaWRlclwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzc1NSwyNzJdLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oNzc0KTsgfSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJEZW1vU2xpZGVyIiwicm9vdCIsInRoaXMiLCJjb250ZW50IiwicXVlcnlTZWxlY3RvciIsImluaXQiLCJmaW5kRWxlbXMiLCJzdGF0ZU9iamVjdCIsIm1pbiIsIm1heCIsInZhbHVlRnJvbSIsImZyb20iLCJ2YWx1ZVRvIiwidG8iLCJzdGVwIiwic2NhbGVQZXJjZW50R2FwIiwiZ2FwIiwic2NhbGVNYXJrcyIsIm1hcmtzIiwiaXNUaXAiLCJ0aXAiLCJpc1Byb2dyZXNzIiwicHJvZ3Jlc3MiLCJpc1JhbmdlIiwicmFuZ2UiLCJpc1ZlcnRpY2FsIiwidmVydGljYWwiLCJhZGRTbGlkZXIiLCJ1cGRhdGVGb3JtIiwiX2EiLCJ0aHVtYiIsIl9iIiwiYWRkTGlzdGVuZXJzIiwiZm9ybSIsImVsZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlIiwicHVzaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1cGRhdGVTdGF0ZSIsImJpbmQiLCJoYW5kbGVDbGljayIsIl9jIiwiaGFuZGVsS2V5IiwiX2QiLCJ0b3VjaERvd24iLCJwYXNzaXZlIiwidGFyZ2V0IiwiSFRNTElucHV0RWxlbWVudCIsInJvbGUiLCJkYXRhc2V0IiwicGFyYW0iLCJtYXBFbGVtcyIsImdldCIsInVuZGVmaW5lZCIsInZhbHVlRm9ybSIsInZhbHVlUGFyYW0iLCJzbGlkZXIiLCJnZXRWYWx1ZSIsImNoZWNrZWQiLCJOdW1iZXIiLCJ2YWx1ZSIsInNldFZhbHVlIiwic2V0TmV3U3RhdGUiLCJnZXRTdGF0ZSIsIm9wdGlvbnMiLCIkIiwic2xpZGVyUGx1Z2luIiwiTWFwIiwic2V0IiwiZGlzYWJsZWQiLCJrZXkiLCJlbGVtZW50IiwidXBkYXRlIiwibW91c2VVcCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwibGVuZ3RoIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsInNwbGljZSIsInIiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=