!function(){"use strict";var e,t={774:function(e,t,r){var i=r(755),n=r.n(i);r(272);function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.content=t.querySelector(".slider__content"),this.init()}var t,r,i;return t=e,(r=[{key:"init",value:function(){var e,t;this.findElems(),this.stateObject={min:this.min||0,max:this.max||10,valueFrom:this.from||0,valueTo:this.to||0,step:this.step||1,scalePercentGap:this.gap||1,scaleMarks:this.marks,isTip:this.tip,isProgress:this.progress,isRange:this.range,isVertical:this.vertical},this.addSlider(this.stateObject),this.updateForm(),(null===(e=this.content)||void 0===e?void 0:e.querySelector(".plugin-slider__thumb"))&&(this.thumb=null===(t=this.content)||void 0===t?void 0:t.querySelector(".plugin-slider__thumb")),this.addListeners()}},{key:"addListeners",value:function(){var e,t,r,i,n=this;if(this.form){var s=[];this.form.querySelectorAll(".slider__input").forEach((function(e){e&&s.push(e)})),s.forEach((function(e){return e.addEventListener("change",n.updateState.bind(n))}))}null===(e=this.content)||void 0===e||e.addEventListener("mousedown",this.handleClick.bind(this)),null===(t=this.content)||void 0===t||t.addEventListener("click",this.updateForm.bind(this)),this.thumb&&(null===(r=this.thumb)||void 0===r||r.addEventListener("keydown",this.handelKey.bind(this)),null===(i=this.thumb)||void 0===i||i.addEventListener("touchmove",this.touchDown.bind(this),{passive:!0}))}},{key:"updateState",value:function(e){var t=e.target;if(t instanceof HTMLInputElement){var r=t.dataset.role,i=this.mapElems.get("".concat(r));if(void 0===i)return;var n,s=this.slider.getValue(i);void 0!==(n="boolean"==typeof s?t.checked:"number"==typeof s?Number(t.value):void 0)&&(this.slider.setValue("".concat(i),n),"valueFrom"!==i&&"valueTo"!==i&&(this.content&&(this.content.innerHTML=""),this.addSlider(this.slider.getState())),this.updateForm())}}},{key:"addSlider",value:function(e){this.content&&(this.slider=n()(this.content).sliderPlugin(e))}},{key:"findElems",value:function(){if(this.mapElems=new Map,this.form=this.root.querySelector(".slider__form"),this.form){var e=this.form.querySelector(".slider__input[data-role = min]");this.min=Number(e.value),this.mapElems.set("min","min");var t=this.form.querySelector(".slider__input[data-role = max]");this.max=Number(t.value),this.mapElems.set("max","max");var r=this.form.querySelector(".slider__input[data-role = step]");this.step=Number(r.value),this.mapElems.set("step","step");var i=this.form.querySelector(".slider__input[data-role = from]");this.from=Number(i.value),i.step="".concat(this.step),this.mapElems.set("from","valueFrom");var n=this.form.querySelector(".slider__input[data-role = to]");this.to=Number(n.value),n.step="".concat(this.step),this.mapElems.set("to","valueTo");var s=this.form.querySelector(".slider__input[data-role = gap]");s.value&&(this.gap=Number(s.value)),this.mapElems.set("gap","scalePercentGap");var o=this.form.querySelector(".slider__input[data-role = range]");this.range=o.checked,this.range&&(n.disabled=!1),this.range||(n.disabled=!0),this.mapElems.set("range","isRange");var a=this.form.querySelector(".slider__input[data-role = marks]");this.marks=a.checked,this.marks&&(s.disabled=!1),this.marks||(s.disabled=!0),this.mapElems.set("marks","scaleMarks");var l=this.form.querySelector(".slider__input[data-role = tip]");this.tip=l.checked,this.mapElems.set("tip","isTip");var u=this.form.querySelector(".slider__input[data-role = progress]");this.progress=u.checked,this.mapElems.set("progress","isProgress");var c=this.form.querySelector(".slider__input[data-role = vertical]");this.vertical=c.checked,this.mapElems.set("vertical","isVertical")}}},{key:"updateForm",value:function(){var e=this;this.mapElems.forEach((function(t,r){var i,n=null===(i=e.form)||void 0===i?void 0:i.querySelector(".slider__input[data-role = ".concat(r,"]"));n instanceof HTMLInputElement&&(n&&"number"==typeof e.slider.getValue(t)&&(n.value="".concat(e.slider.getValue("".concat(t)))),n&&"boolean"==typeof e.slider.getValue(t)&&(e.slider.getValue("".concat(t))?n.checked=!0:n.checked=!1),e.findElems())}))}},{key:"handleClick",value:function(){var e,t,r=this,i=function(){return r.updateForm()};null===(e=this.content)||void 0===e||e.addEventListener("mousemove",i),null===(t=this.content)||void 0===t||t.addEventListener("mouseup",(function e(){var t,n;null===(t=r.content)||void 0===t||t.removeEventListener("mousemove",i),null===(n=r.content)||void 0===n||n.removeEventListener("mouseup",e)}))}},{key:"handelKey",value:function(e){var t=e.key;"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||this.updateForm()}},{key:"touchDown",value:function(){this.updateForm()}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.querySelectorAll(".slider").forEach((function(e){return new o(e)}))}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,i),s.exports}i.m=t,e=[],i.O=function(t,r,n,s){if(!r){var o=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],s=e[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((function(e){return i.O[e](r[l])}))?r.splice(l--,1):(a=!1,s<o&&(o=s));if(a){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,n,s]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={577:0,309:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var c=l(i)}for(t&&t(r);u<o.length;u++)s=o[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},r=self.webpackChunkmeta_slider=self.webpackChunkmeta_slider||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var n=i.O(void 0,[755,272],(function(){return i(774)}));n=i.O(n)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVtby9kZW1vLjIyZmIyZjY3NGRmZDI1NmU0NTIxLmpzIiwibWFwcGluZ3MiOiI2QkFBSUEsRSw4TkNhRUMsRUFBQUEsV0FnREosV0FBWUMsSSw0RkFBYSxTQUN2QkMsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS0MsUUFBVUYsRUFBS0csY0FBYyxvQkFDbENGLEtBQUtHLE1BQ04sQywyQ0FFTyxXLFFBQ05ILEtBQUtJLFlBQ0xKLEtBQUtLLFlBQWMsQ0FDakJDLElBQUtOLEtBQUtNLEtBQU8sRUFDakJDLElBQUtQLEtBQUtPLEtBQU8sR0FDakJDLFVBQVdSLEtBQUtTLE1BQVEsRUFDeEJDLFFBQVNWLEtBQUtXLElBQU0sRUFDcEJDLEtBQU1aLEtBQUtZLE1BQVEsRUFDbkJDLGdCQUFpQmIsS0FBS2MsS0FBTyxFQUM3QkMsV0FBWWYsS0FBS2dCLE1BQ2pCQyxNQUFPakIsS0FBS2tCLElBQ1pDLFdBQVluQixLQUFLb0IsU0FDakJDLFFBQVNyQixLQUFLc0IsTUFDZEMsV0FBWXZCLEtBQUt3QixVQUduQnhCLEtBQUt5QixVQUFVekIsS0FBS0ssYUFDcEJMLEtBQUswQixjQUVXLFFBQVosRUFBQTFCLEtBQUtDLGVBQU8wQixJQUFBQSxPQUFBLEVBQUFBLEVBQUV6QixjQUFjLDRCQUM5QkYsS0FBSzRCLE1BQW9CLFFBQVosRUFBQTVCLEtBQUtDLGVBQU80QixJQUFBQSxPQUFBLEVBQUFBLEVBQUUzQixjQUFjLDBCQUczQ0YsS0FBSzhCLGNBQ04sRywwQkFFTyxXQUFZLEksUUFBQSxPQUNsQixHQUFJOUIsS0FBSytCLEtBQU0sQ0FDYixJQUFNQyxFQUEyQixHQUNqQ2hDLEtBQUsrQixLQUFLRSxpQkFBaUIsa0JBQWtCQyxTQUFRLFNBQUNDLEdBQ2hEQSxHQUNGSCxFQUFNSSxLQUFLRCxFQUVkLElBRURILEVBQU1FLFNBQVEsU0FBQ0MsR0FBRCxPQUFPQSxFQUFFRSxpQkFBaUIsU0FBVSxFQUFLQyxZQUFZQyxLQUFLLEdBQTFELEdBQ2YsQ0FFVyxRQUFaLEVBQUF2QyxLQUFLQyxlQUFPMEIsSUFBQUEsR0FBQUEsRUFBRVUsaUJBQWlCLFlBQWFyQyxLQUFLd0MsWUFBWUQsS0FBS3ZDLE9BQ3RELFFBQVosRUFBQUEsS0FBS0MsZUFBTzRCLElBQUFBLEdBQUFBLEVBQUVRLGlCQUFpQixRQUFTckMsS0FBSzBCLFdBQVdhLEtBQUt2QyxPQUV6REEsS0FBSzRCLFFBQ0csUUFBVixFQUFBNUIsS0FBSzRCLGFBQUthLElBQUFBLEdBQUFBLEVBQUVKLGlCQUFpQixVQUFXckMsS0FBSzBDLFVBQVVILEtBQUt2QyxPQUNsRCxRQUFWLEVBQUFBLEtBQUs0QixhQUFLZSxJQUFBQSxHQUFBQSxFQUFFTixpQkFDVixZQUNBckMsS0FBSzRDLFVBQVVMLEtBQUt2QyxNQUNwQixDQUFFNkMsU0FBUyxJQUdoQixHLHlCQUVPLFNBQVlWLEdBQ2xCLElBQVFXLEVBQVdYLEVBQVhXLE9BQ1IsR0FBSUEsYUFBa0JDLGlCQUFrQixDQUN0QyxJQUFRQyxFQUFTRixFQUFPRyxRQUFoQkQsS0FDRkUsRUFBUWxELEtBQUttRCxTQUFTQyxJQUFkLFVBQXFCSixJQUNuQyxRQUFjSyxJQUFWSCxFQUFxQixPQUN6QixJQUNJSSxFQURFQyxFQUFhdkQsS0FBS3dELE9BQU9DLFNBQVNQLFFBU3RCRyxLQU5oQkMsRUFEd0Isa0JBQWZDLEVBQ0dULEVBQU9ZLFFBQ1ksaUJBQWZILEVBQ0pJLE9BQU9iLEVBQU9jLFlBRWRQLEtBR1pyRCxLQUFLd0QsT0FBT0ssU0FBWixVQUF3QlgsR0FBU0ksR0FDbkIsY0FBVkosR0FBbUMsWUFBVkEsSUFDdkJsRCxLQUFLQyxVQUFTRCxLQUFLQyxRQUFRNkQsVUFBWSxJQUMzQzlELEtBQUt5QixVQUFVekIsS0FBS3dELE9BQU9PLGFBRTdCL0QsS0FBSzBCLGFBRVIsQ0FDRixHLHVCQUVPLFNBQVVzQyxHQUNYaEUsS0FBS0MsVUFDVkQsS0FBS3dELE9BQVNTLElBQUVqRSxLQUFLQyxTQUFTaUUsYUFBYUYsR0FDNUMsRyx1QkFFTyxXQUlOLEdBSEFoRSxLQUFLbUQsU0FBVyxJQUFJZ0IsSUFFcEJuRSxLQUFLK0IsS0FBTy9CLEtBQUtELEtBQUtHLGNBQWMsaUJBQy9CRixLQUFLK0IsS0FBVixDQUNBLElBQU16QixFQUNKTixLQUFLK0IsS0FBSzdCLGNBQWMsbUNBQzFCRixLQUFLTSxJQUFNcUQsT0FBT3JELEVBQUlzRCxPQUN0QjVELEtBQUttRCxTQUFTaUIsSUFBSSxNQUFPLE9BRXpCLElBQU03RCxFQUNKUCxLQUFLK0IsS0FBSzdCLGNBQWMsbUNBQzFCRixLQUFLTyxJQUFNb0QsT0FBT3BELEVBQUlxRCxPQUN0QjVELEtBQUttRCxTQUFTaUIsSUFBSSxNQUFPLE9BRXpCLElBQU14RCxFQUNKWixLQUFLK0IsS0FBSzdCLGNBQWMsb0NBQzFCRixLQUFLWSxLQUFPK0MsT0FBTy9DLEVBQUtnRCxPQUN4QjVELEtBQUttRCxTQUFTaUIsSUFBSSxPQUFRLFFBRTFCLElBQU0zRCxFQUNKVCxLQUFLK0IsS0FBSzdCLGNBQWMsb0NBQzFCRixLQUFLUyxLQUFPa0QsT0FBT2xELEVBQUttRCxPQUN4Qm5ELEVBQUtHLEtBQUwsVUFBZVosS0FBS1ksTUFDcEJaLEtBQUttRCxTQUFTaUIsSUFBSSxPQUFRLGFBRTFCLElBQU16RCxFQUNKWCxLQUFLK0IsS0FBSzdCLGNBQWMsa0NBQzFCRixLQUFLVyxHQUFLZ0QsT0FBT2hELEVBQUdpRCxPQUNwQmpELEVBQUdDLEtBQUgsVUFBYVosS0FBS1ksTUFDbEJaLEtBQUttRCxTQUFTaUIsSUFBSSxLQUFNLFdBRXhCLElBQU10RCxFQUNKZCxLQUFLK0IsS0FBSzdCLGNBQWMsbUNBQ3RCWSxFQUFJOEMsUUFBTzVELEtBQUtjLElBQU02QyxPQUFPN0MsRUFBSThDLFFBQ3JDNUQsS0FBS21ELFNBQVNpQixJQUFJLE1BQU8sbUJBRXpCLElBQU05QyxFQUNKdEIsS0FBSytCLEtBQUs3QixjQUFjLHFDQUMxQkYsS0FBS3NCLE1BQVFBLEVBQU1vQyxRQUNmMUQsS0FBS3NCLFFBQU9YLEVBQUcwRCxVQUFXLEdBQ3pCckUsS0FBS3NCLFFBQU9YLEVBQUcwRCxVQUFXLEdBQy9CckUsS0FBS21ELFNBQVNpQixJQUFJLFFBQVMsV0FFM0IsSUFBTXBELEVBQ0poQixLQUFLK0IsS0FBSzdCLGNBQWMscUNBQzFCRixLQUFLZ0IsTUFBUUEsRUFBTTBDLFFBQ2YxRCxLQUFLZ0IsUUFBT0YsRUFBSXVELFVBQVcsR0FDMUJyRSxLQUFLZ0IsUUFBT0YsRUFBSXVELFVBQVcsR0FDaENyRSxLQUFLbUQsU0FBU2lCLElBQUksUUFBUyxjQUUzQixJQUFNbEQsRUFDSmxCLEtBQUsrQixLQUFLN0IsY0FBYyxtQ0FDMUJGLEtBQUtrQixJQUFNQSxFQUFJd0MsUUFDZjFELEtBQUttRCxTQUFTaUIsSUFBSSxNQUFPLFNBRXpCLElBQU1oRCxFQUNKcEIsS0FBSytCLEtBQUs3QixjQUFjLHdDQUMxQkYsS0FBS29CLFNBQVdBLEVBQVNzQyxRQUN6QjFELEtBQUttRCxTQUFTaUIsSUFBSSxXQUFZLGNBRTlCLElBQU01QyxFQUNKeEIsS0FBSytCLEtBQUs3QixjQUFjLHdDQUMxQkYsS0FBS3dCLFNBQVdBLEVBQVNrQyxRQUN6QjFELEtBQUttRCxTQUFTaUIsSUFBSSxXQUFZLGFBNURSLENBNkR2QixHLHdCQUVPLFdBQVUsV0FDaEJwRSxLQUFLbUQsU0FBU2pCLFNBQVEsU0FBQ29DLEVBQWVWLEcsTUFDOUJXLEVBQW1CLFFBQVQsSUFBS3hDLFlBQUlKLElBQUFBLE9BQUEsRUFBQUEsRUFBRXpCLGNBQUYscUNBQThDMEQsRUFBOUMsTUFDckJXLGFBQW1CeEIsbUJBQ2pCd0IsR0FBZ0QsaUJBQTlCLEVBQUtmLE9BQU9DLFNBQVNhLEtBQ3pDQyxFQUFRWCxNQUFSLFVBQW1CLEVBQUtKLE9BQU9DLFNBQVosVUFBd0JhLE1BR3pDQyxHQUFnRCxrQkFBOUIsRUFBS2YsT0FBT0MsU0FBU2EsS0FDckMsRUFBS2QsT0FBT0MsU0FBWixVQUF3QmEsSUFDMUJDLEVBQVFiLFNBQVUsRUFFbEJhLEVBQVFiLFNBQVUsR0FJdEIsRUFBS3RELFlBRVIsR0FDRixHLHlCQUVPLFdBQVcsSSxJQUFBLE9BQ1hvRSxFQUFTLGtCQUFNLEVBQUs5QyxZQUFYLEVBTUgsUUFBWixFQUFBMUIsS0FBS0MsZUFBTzBCLElBQUFBLEdBQUFBLEVBQUVVLGlCQUFpQixZQUFhbUMsR0FDaEMsUUFBWixFQUFBeEUsS0FBS0MsZUFBTzRCLElBQUFBLEdBQUFBLEVBQUVRLGlCQUFpQixXQU5mLFNBQVZvQyxJLFFBQ1EsUUFBWixJQUFLeEUsZUFBTzBCLElBQUFBLEdBQUFBLEVBQUUrQyxvQkFBb0IsWUFBYUYsR0FDbkMsUUFBWixJQUFLdkUsZUFBTzRCLElBQUFBLEdBQUFBLEVBQUU2QyxvQkFBb0IsVUFBV0QsRUFDOUMsR0FJRixHLHVCQUVPLFNBQVV0QyxHQUNoQixJQUFRbUMsRUFBUW5DLEVBQVJtQyxJQUNJLGNBQVJBLEdBQStCLFlBQVJBLEdBQTZCLGVBQVJBLEdBQWdDLGNBQVJBLEdBQ3RFdEUsS0FBSzBCLFlBRVIsRyx1QkFFTyxXQUNOMUIsS0FBSzBCLFlBQ04sTSxnRkFwUEc1QixHQXVQTjZFLFNBQVMxQyxpQkFBaUIsV0FBV0MsU0FBUSxTQUFDQyxHQUFELE9BQU8sSUFBSXJDLEVBQVdxQyxFQUF0QixHLEdDblF6Q3lDLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQnpCLElBQWpCMEIsRUFDSCxPQUFPQSxFQUFhQyxRQUdyQixJQUFJQyxFQUFTTCxFQUF5QkUsR0FBWSxDQUdqREUsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JKLEdBQVVLLEtBQUtGLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNILEdBR3BFSSxFQUFPRCxPQUNmLENBR0FILEVBQW9CTyxFQUFJRixFRnpCcEJyRixFQUFXLEdBQ2ZnRixFQUFvQlEsRUFBSSxTQUFTQyxFQUFRQyxFQUFVQyxFQUFJQyxHQUN0RCxJQUFHRixFQUFILENBTUEsSUFBSUcsRUFBZUMsSUFDbkIsSUFBU0MsRUFBSSxFQUFHQSxFQUFJL0YsRUFBU2dHLE9BQVFELElBQUssQ0FDckNMLEVBQVcxRixFQUFTK0YsR0FBRyxHQUN2QkosRUFBSzNGLEVBQVMrRixHQUFHLEdBQ2pCSCxFQUFXNUYsRUFBUytGLEdBQUcsR0FFM0IsSUFKQSxJQUdJRSxHQUFZLEVBQ1BDLEVBQUksRUFBR0EsRUFBSVIsRUFBU00sT0FBUUUsTUFDcEIsRUFBWE4sR0FBc0JDLEdBQWdCRCxJQUFhTyxPQUFPQyxLQUFLcEIsRUFBb0JRLEdBQUdhLE9BQU0sU0FBUzVCLEdBQU8sT0FBT08sRUFBb0JRLEVBQUVmLEdBQUtpQixFQUFTUSxHQUFLLElBQ2hLUixFQUFTWSxPQUFPSixJQUFLLElBRXJCRCxHQUFZLEVBQ1RMLEVBQVdDLElBQWNBLEVBQWVELElBRzdDLEdBQUdLLEVBQVcsQ0FDYmpHLEVBQVNzRyxPQUFPUCxJQUFLLEdBQ3JCLElBQUlRLEVBQUlaLFNBQ0VuQyxJQUFOK0MsSUFBaUJkLEVBQVNjLEVBQy9CLENBQ0QsQ0FDQSxPQUFPZCxDQXJCUCxDQUpDRyxFQUFXQSxHQUFZLEVBQ3ZCLElBQUksSUFBSUcsRUFBSS9GLEVBQVNnRyxPQUFRRCxFQUFJLEdBQUsvRixFQUFTK0YsRUFBSSxHQUFHLEdBQUtILEVBQVVHLElBQUsvRixFQUFTK0YsR0FBSy9GLEVBQVMrRixFQUFJLEdBQ3JHL0YsRUFBUytGLEdBQUssQ0FBQ0wsRUFBVUMsRUFBSUMsRUF3Qi9CLEVHNUJBWixFQUFvQndCLEVBQUksU0FBU3BCLEdBQ2hDLElBQUlxQixFQUFTckIsR0FBVUEsRUFBT3NCLFdBQzdCLFdBQWEsT0FBT3RCLEVBQWdCLE9BQUcsRUFDdkMsV0FBYSxPQUFPQSxDQUFRLEVBRTdCLE9BREFKLEVBQW9CMkIsRUFBRUYsRUFBUSxDQUFFRyxFQUFHSCxJQUM1QkEsQ0FDUixFQ05BekIsRUFBb0IyQixFQUFJLFNBQVN4QixFQUFTMEIsR0FDekMsSUFBSSxJQUFJcEMsS0FBT29DLEVBQ1g3QixFQUFvQjhCLEVBQUVELEVBQVlwQyxLQUFTTyxFQUFvQjhCLEVBQUUzQixFQUFTVixJQUM1RTBCLE9BQU9ZLGVBQWU1QixFQUFTVixFQUFLLENBQUV1QyxZQUFZLEVBQU16RCxJQUFLc0QsRUFBV3BDLElBRzNFLEVDUEFPLEVBQW9COEIsRUFBSSxTQUFTRyxFQUFLQyxHQUFRLE9BQU9mLE9BQU9nQixVQUFVQyxlQUFlOUIsS0FBSzJCLEVBQUtDLEVBQU8sRSxXQ0t0RyxJQUFJRyxFQUFrQixDQUNyQixJQUFLLEVBQ0wsSUFBSyxHQWFOckMsRUFBb0JRLEVBQUVVLEVBQUksU0FBU29CLEdBQVcsT0FBb0MsSUFBN0JELEVBQWdCQyxFQUFnQixFQUdyRixJQUFJQyxFQUF1QixTQUFTQyxFQUE0QkMsR0FDL0QsSUFLSXhDLEVBQVVxQyxFQUxWNUIsRUFBVytCLEVBQUssR0FDaEJDLEVBQWNELEVBQUssR0FDbkJFLEVBQVVGLEVBQUssR0FHSTFCLEVBQUksRUFDM0IsR0FBR0wsRUFBU2tDLE1BQUssU0FBU0MsR0FBTSxPQUErQixJQUF4QlIsRUFBZ0JRLEVBQVcsSUFBSSxDQUNyRSxJQUFJNUMsS0FBWXlDLEVBQ1oxQyxFQUFvQjhCLEVBQUVZLEVBQWF6QyxLQUNyQ0QsRUFBb0JPLEVBQUVOLEdBQVl5QyxFQUFZekMsSUFHaEQsR0FBRzBDLEVBQVMsSUFBSWxDLEVBQVNrQyxFQUFRM0MsRUFDbEMsQ0FFQSxJQURHd0MsR0FBNEJBLEVBQTJCQyxHQUNyRDFCLEVBQUlMLEVBQVNNLE9BQVFELElBQ3pCdUIsRUFBVTVCLEVBQVNLLEdBQ2hCZixFQUFvQjhCLEVBQUVPLEVBQWlCQyxJQUFZRCxFQUFnQkMsSUFDckVELEVBQWdCQyxHQUFTLEtBRTFCRCxFQUFnQkMsR0FBVyxFQUU1QixPQUFPdEMsRUFBb0JRLEVBQUVDLEVBQzlCLEVBRUlxQyxFQUFxQkMsS0FBOEIsd0JBQUlBLEtBQThCLHlCQUFLLEdBQzlGRCxFQUFtQnpGLFFBQVFrRixFQUFxQjdFLEtBQUssS0FBTSxJQUMzRG9GLEVBQW1CdkYsS0FBT2dGLEVBQXFCN0UsS0FBSyxLQUFNb0YsRUFBbUJ2RixLQUFLRyxLQUFLb0YsRyxJQ2hEdkYsSUFBSUUsRUFBc0JoRCxFQUFvQlEsT0FBRWhDLEVBQVcsQ0FBQyxJQUFJLE1BQU0sV0FBYSxPQUFPd0IsRUFBb0IsSUFBTSxJQUNwSGdELEVBQXNCaEQsRUFBb0JRLEVBQUV3QyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL2RlbW8tcGFnZS9kZW1vLXBhZ2UudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gZnVuY3Rpb24ocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBjaHVua0lkcyA9IGRlZmVycmVkW2ldWzBdO1xuXHRcdHZhciBmbiA9IGRlZmVycmVkW2ldWzFdO1xuXHRcdHZhciBwcmlvcml0eSA9IGRlZmVycmVkW2ldWzJdO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeShmdW5jdGlvbihrZXkpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKTsgfSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHsgTW9kZWxJbnB1dFN0YXRlLCBNb2RlbFZhbCB9IGZyb20gJy4uL3NyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xuaW1wb3J0ICcuLi9zcmMvc2xpZGVyJztcbmltcG9ydCAnLi9zdHlsZXMuc2Nzcyc7XG5cbmludGVyZmFjZSBFbGVtZW50TGlzdGVuZXIge1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGU6ICdjaGFuZ2UnLCBsaXN0ZW5lcjogKGV2ZW50OiBJbnB1dEV2ZW50KSA9PiB2b2lkKTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIEVsZW1lbnRQcmVzcyB7XG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZTogJ2tleWRvd24nIHwgJ3RvdWNobW92ZScsIGxpc3RlbmVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQsIG9wdGlvbnM/OiB7IHBhc3NpdmU6IGJvb2xlYW4gfSk6IHZvaWQ7XG59XG5cbmNsYXNzIERlbW9TbGlkZXIge1xuICByb290OiBFbGVtZW50O1xuXG4gIGZvcm0hOiBFbGVtZW50IHwgbnVsbDtcblxuICBtaW4hOiBudW1iZXIgfCBudWxsO1xuXG4gIG1heCE6IG51bWJlciB8IG51bGw7XG5cbiAgc3RlcCE6IG51bWJlciB8IG51bGw7XG5cbiAgZnJvbSE6IG51bWJlciB8IG51bGw7XG5cbiAgdG8hOiBudW1iZXIgfCBudWxsO1xuXG4gIGdhcCE6IG51bWJlciB8IG51bGw7XG5cbiAgcmFuZ2UhOiBib29sZWFuO1xuXG4gIG1hcmtzITogYm9vbGVhbjtcblxuICB0aXAhOiBib29sZWFuO1xuXG4gIHByb2dyZXNzITogYm9vbGVhbjtcblxuICB2ZXJ0aWNhbCE6IGJvb2xlYW47XG5cbiAgY29udGVudCE6IEVsZW1lbnQgfCBudWxsO1xuXG4gIG1hcEVsZW1zITogTWFwPHN0cmluZywgTW9kZWxWYWw+O1xuXG4gIHNsaWRlciE6IGltcG9ydCgnYzovQ29kZS9NZXRhIFNsaWRlci9zcmMvY29tcG9uZW50cy9QcmVzZW50ZXIvUHJlc2VudGVyJykuZGVmYXVsdDtcblxuICB0aHVtYj86IEVsZW1lbnRQcmVzcyB8IG51bGw7XG5cbiAgc3RhdGVPYmplY3QhOiB7XG4gICAgbWluOiBudW1iZXI7XG4gICAgbWF4OiBudW1iZXI7XG4gICAgdmFsdWVGcm9tOiBudW1iZXI7XG4gICAgdmFsdWVUbzogbnVtYmVyO1xuICAgIHN0ZXA6IG51bWJlcjtcbiAgICBzY2FsZVBlcmNlbnRHYXA6IG51bWJlcjtcbiAgICBzY2FsZU1hcmtzOiBib29sZWFuOyBpc1RpcDpcbiAgICBib29sZWFuOyBpc1Byb2dyZXNzOiBib29sZWFuO1xuICAgIGlzUmFuZ2U6IGJvb2xlYW47XG4gICAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihyb290OiBFbGVtZW50KSB7XG4gICAgdGhpcy5yb290ID0gcm9vdDtcbiAgICB0aGlzLmNvbnRlbnQgPSByb290LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2NvbnRlbnQnKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdCgpIHtcbiAgICB0aGlzLmZpbmRFbGVtcygpO1xuICAgIHRoaXMuc3RhdGVPYmplY3QgPSB7XG4gICAgICBtaW46IHRoaXMubWluIHx8IDAsXG4gICAgICBtYXg6IHRoaXMubWF4IHx8IDEwLFxuICAgICAgdmFsdWVGcm9tOiB0aGlzLmZyb20gfHwgMCxcbiAgICAgIHZhbHVlVG86IHRoaXMudG8gfHwgMCxcbiAgICAgIHN0ZXA6IHRoaXMuc3RlcCB8fCAxLFxuICAgICAgc2NhbGVQZXJjZW50R2FwOiB0aGlzLmdhcCB8fCAxLFxuICAgICAgc2NhbGVNYXJrczogdGhpcy5tYXJrcyxcbiAgICAgIGlzVGlwOiB0aGlzLnRpcCxcbiAgICAgIGlzUHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3MsXG4gICAgICBpc1JhbmdlOiB0aGlzLnJhbmdlLFxuICAgICAgaXNWZXJ0aWNhbDogdGhpcy52ZXJ0aWNhbCxcbiAgICB9O1xuXG4gICAgdGhpcy5hZGRTbGlkZXIodGhpcy5zdGF0ZU9iamVjdCk7XG4gICAgdGhpcy51cGRhdGVGb3JtKCk7XG5cbiAgICBpZiAodGhpcy5jb250ZW50Py5xdWVyeVNlbGVjdG9yKCcucGx1Z2luLXNsaWRlcl9fdGh1bWInKSkge1xuICAgICAgdGhpcy50aHVtYiA9IHRoaXMuY29udGVudD8ucXVlcnlTZWxlY3RvcignLnBsdWdpbi1zbGlkZXJfX3RodW1iJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkTGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgIGNvbnN0IGVsZW1zOiBFbGVtZW50TGlzdGVuZXJbXSA9IFtdO1xuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX2lucHV0JykuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgIGVsZW1zLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBlbGVtcy5mb3JFYWNoKChlKSA9PiBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMudXBkYXRlU3RhdGUuYmluZCh0aGlzKSkpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmNvbnRlbnQ/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy51cGRhdGVGb3JtLmJpbmQodGhpcykpO1xuXG4gICAgaWYgKHRoaXMudGh1bWIpIHtcbiAgICAgIHRoaXMudGh1bWI/LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRlbEtleS5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMudGh1bWI/LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICd0b3VjaG1vdmUnLFxuICAgICAgICB0aGlzLnRvdWNoRG93bi5iaW5kKHRoaXMpLFxuICAgICAgICB7IHBhc3NpdmU6IHRydWUgfSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0ZShlOiBJbnB1dEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgeyB0YXJnZXQgfSA9IGU7XG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHsgcm9sZSB9ID0gdGFyZ2V0LmRhdGFzZXQ7XG4gICAgICBjb25zdCBwYXJhbSA9IHRoaXMubWFwRWxlbXMuZ2V0KGAke3JvbGV9YCk7XG4gICAgICBpZiAocGFyYW0gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgY29uc3QgdmFsdWVQYXJhbSA9IHRoaXMuc2xpZGVyLmdldFZhbHVlKHBhcmFtKTtcbiAgICAgIGxldCB2YWx1ZUZvcm06IG51bWJlciB8IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlUGFyYW0gPT09ICdib29sZWFuJykge1xuICAgICAgICB2YWx1ZUZvcm0gPSB0YXJnZXQuY2hlY2tlZDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlUGFyYW0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhbHVlRm9ybSA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVGb3JtID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlRm9ybSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2xpZGVyLnNldFZhbHVlKGAke3BhcmFtfWAsIHZhbHVlRm9ybSk7XG4gICAgICAgIGlmIChwYXJhbSAhPT0gJ3ZhbHVlRnJvbScgJiYgcGFyYW0gIT09ICd2YWx1ZVRvJykge1xuICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnQpIHRoaXMuY29udGVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICB0aGlzLmFkZFNsaWRlcih0aGlzLnNsaWRlci5nZXRTdGF0ZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFNsaWRlcihvcHRpb25zOiBNb2RlbElucHV0U3RhdGUpIHtcbiAgICBpZiAoIXRoaXMuY29udGVudCkgcmV0dXJuO1xuICAgIHRoaXMuc2xpZGVyID0gJCh0aGlzLmNvbnRlbnQpLnNsaWRlclBsdWdpbihvcHRpb25zKTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZEVsZW1zKCkge1xuICAgIHRoaXMubWFwRWxlbXMgPSBuZXcgTWFwKCk7XG5cbiAgICB0aGlzLmZvcm0gPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fZm9ybScpO1xuICAgIGlmICghdGhpcy5mb3JtKSByZXR1cm47XG4gICAgY29uc3QgbWluID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gbWluXScpO1xuICAgIHRoaXMubWluID0gTnVtYmVyKG1pbi52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ21pbicsICdtaW4nKTtcblxuICAgIGNvbnN0IG1heCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1heF0nKTtcbiAgICB0aGlzLm1heCA9IE51bWJlcihtYXgudmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdtYXgnLCAnbWF4Jyk7XG5cbiAgICBjb25zdCBzdGVwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gc3RlcF0nKTtcbiAgICB0aGlzLnN0ZXAgPSBOdW1iZXIoc3RlcC52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3N0ZXAnLCAnc3RlcCcpO1xuXG4gICAgY29uc3QgZnJvbSA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IGZyb21dJyk7XG4gICAgdGhpcy5mcm9tID0gTnVtYmVyKGZyb20udmFsdWUpO1xuICAgIGZyb20uc3RlcCA9IGAke3RoaXMuc3RlcH1gO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdmcm9tJywgJ3ZhbHVlRnJvbScpO1xuXG4gICAgY29uc3QgdG8gPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSB0b10nKTtcbiAgICB0aGlzLnRvID0gTnVtYmVyKHRvLnZhbHVlKTtcbiAgICB0by5zdGVwID0gYCR7dGhpcy5zdGVwfWA7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3RvJywgJ3ZhbHVlVG8nKTtcblxuICAgIGNvbnN0IGdhcCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IGdhcF0nKTtcbiAgICBpZiAoZ2FwLnZhbHVlKSB0aGlzLmdhcCA9IE51bWJlcihnYXAudmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdnYXAnLCAnc2NhbGVQZXJjZW50R2FwJyk7XG5cbiAgICBjb25zdCByYW5nZSA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHJhbmdlXScpO1xuICAgIHRoaXMucmFuZ2UgPSByYW5nZS5jaGVja2VkO1xuICAgIGlmICh0aGlzLnJhbmdlKSB0by5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5yYW5nZSkgdG8uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdyYW5nZScsICdpc1JhbmdlJyk7XG5cbiAgICBjb25zdCBtYXJrcyA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1hcmtzXScpO1xuICAgIHRoaXMubWFya3MgPSBtYXJrcy5jaGVja2VkO1xuICAgIGlmICh0aGlzLm1hcmtzKSBnYXAuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMubWFya3MpIGdhcC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ21hcmtzJywgJ3NjYWxlTWFya3MnKTtcblxuICAgIGNvbnN0IHRpcCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHRpcF0nKTtcbiAgICB0aGlzLnRpcCA9IHRpcC5jaGVja2VkO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCd0aXAnLCAnaXNUaXAnKTtcblxuICAgIGNvbnN0IHByb2dyZXNzID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gcHJvZ3Jlc3NdJyk7XG4gICAgdGhpcy5wcm9ncmVzcyA9IHByb2dyZXNzLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3Byb2dyZXNzJywgJ2lzUHJvZ3Jlc3MnKTtcblxuICAgIGNvbnN0IHZlcnRpY2FsID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gdmVydGljYWxdJyk7XG4gICAgdGhpcy52ZXJ0aWNhbCA9IHZlcnRpY2FsLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXBFbGVtcy5zZXQoJ3ZlcnRpY2FsJywgJ2lzVmVydGljYWwnKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRm9ybSgpIHtcbiAgICB0aGlzLm1hcEVsZW1zLmZvckVhY2goKGtleTogTW9kZWxWYWwsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmZvcm0/LnF1ZXJ5U2VsZWN0b3IoYC5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9ICR7dmFsdWV9XWApO1xuICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50ICYmIHR5cGVvZiB0aGlzLnNsaWRlci5nZXRWYWx1ZShrZXkpID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBgJHt0aGlzLnNsaWRlci5nZXRWYWx1ZShgJHtrZXl9YCl9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbGVtZW50ICYmIHR5cGVvZiB0aGlzLnNsaWRlci5nZXRWYWx1ZShrZXkpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBpZiAodGhpcy5zbGlkZXIuZ2V0VmFsdWUoYCR7a2V5fWApKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZpbmRFbGVtcygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDbGljaygpIHtcbiAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICBjb25zdCBtb3VzZVVwID0gKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZW50Py5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB1cGRhdGUpO1xuICAgICAgdGhpcy5jb250ZW50Py5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcCk7XG4gICAgfTtcblxuICAgIHRoaXMuY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdXBkYXRlKTtcbiAgICB0aGlzLmNvbnRlbnQ/LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGVsS2V5KGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IGtleSB9ID0gZTtcbiAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0JyB8fCBrZXkgPT09ICdBcnJvd1VwJyB8fCBrZXkgPT09ICdBcnJvd1JpZ2h0JyB8fCBrZXkgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRvdWNoRG93bigpIHtcbiAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgfVxufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyJykuZm9yRWFjaCgoZSkgPT4gbmV3IERlbW9TbGlkZXIoZSkpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDU3NzogMCxcblx0MzA5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IGZ1bmN0aW9uKGNodW5rSWQpIHsgcmV0dXJuIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMDsgfTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSBmdW5jdGlvbihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkge1xuXHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuXHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuXHR2YXIgcnVudGltZSA9IGRhdGFbMl07XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZShmdW5jdGlvbihpZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMDsgfSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rbWV0YV9zbGlkZXJcIl0gPSBzZWxmW1wid2VicGFja0NodW5rbWV0YV9zbGlkZXJcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs3NTUsMjcyXSwgZnVuY3Rpb24oKSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3NCk7IH0pXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwiRGVtb1NsaWRlciIsInJvb3QiLCJ0aGlzIiwiY29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbml0IiwiZmluZEVsZW1zIiwic3RhdGVPYmplY3QiLCJtaW4iLCJtYXgiLCJ2YWx1ZUZyb20iLCJmcm9tIiwidmFsdWVUbyIsInRvIiwic3RlcCIsInNjYWxlUGVyY2VudEdhcCIsImdhcCIsInNjYWxlTWFya3MiLCJtYXJrcyIsImlzVGlwIiwidGlwIiwiaXNQcm9ncmVzcyIsInByb2dyZXNzIiwiaXNSYW5nZSIsInJhbmdlIiwiaXNWZXJ0aWNhbCIsInZlcnRpY2FsIiwiYWRkU2xpZGVyIiwidXBkYXRlRm9ybSIsIl9hIiwidGh1bWIiLCJfYiIsImFkZExpc3RlbmVycyIsImZvcm0iLCJlbGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZSIsInB1c2giLCJhZGRFdmVudExpc3RlbmVyIiwidXBkYXRlU3RhdGUiLCJiaW5kIiwiaGFuZGxlQ2xpY2siLCJfYyIsImhhbmRlbEtleSIsIl9kIiwidG91Y2hEb3duIiwicGFzc2l2ZSIsInRhcmdldCIsIkhUTUxJbnB1dEVsZW1lbnQiLCJyb2xlIiwiZGF0YXNldCIsInBhcmFtIiwibWFwRWxlbXMiLCJnZXQiLCJ1bmRlZmluZWQiLCJ2YWx1ZUZvcm0iLCJ2YWx1ZVBhcmFtIiwic2xpZGVyIiwiZ2V0VmFsdWUiLCJjaGVja2VkIiwiTnVtYmVyIiwidmFsdWUiLCJzZXRWYWx1ZSIsImlubmVySFRNTCIsImdldFN0YXRlIiwib3B0aW9ucyIsIiQiLCJzbGlkZXJQbHVnaW4iLCJNYXAiLCJzZXQiLCJkaXNhYmxlZCIsImtleSIsImVsZW1lbnQiLCJ1cGRhdGUiLCJtb3VzZVVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRvY3VtZW50IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJsZW5ndGgiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwic3BsaWNlIiwiciIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiZGF0YSIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInNvbWUiLCJpZCIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==