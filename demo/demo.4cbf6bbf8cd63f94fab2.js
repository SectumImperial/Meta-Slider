!function(){"use strict";var e,t={868:function(e,t,i){var o=i(755),s=i.n(o);i(390);class r{constructor(e){this.dom={root:e,indicator:null,form:null,content:null,thumb:null},this.numericVariables={min:0,max:10,step:1,from:1,to:null,gap:null},this.booleanVariables={range:!1,marks:!1,tip:!1,progress:!1,vertical:!1},void 0!==this.dom&&(this.dom.root=e),this.handleItemChange=this.handleItemChange.bind(this),this.handleContentPointerDown=this.handleContentPointerDown.bind(this),this.handleContentClick=this.handleContentClick.bind(this),this.handleThumbKeyPress=this.handleThumbKeyPress.bind(this),this.handleThumbTouchMove=this.handleThumbTouchMove.bind(this),this.init()}init(){this.findElements(),this.stateObject={min:this.numericVariables.min,max:this.numericVariables.max,valueFrom:this.numericVariables.from||0,valueTo:this.numericVariables.to||0,step:this.numericVariables.step||1,scalePercentGap:this.numericVariables.gap||1,scaleMarks:this.booleanVariables.marks,isTip:this.booleanVariables.tip,isProgress:this.booleanVariables.progress,isRange:this.booleanVariables.range,isVertical:this.booleanVariables.vertical},this.addSlider(this.stateObject),this.updateForm(),this.addListeners()}addListeners(){var e,t,i,o;if(void 0!==this.dom){if(void 0!==this.dom.form&&null!==this.dom.form){const e=[];this.dom.form.querySelectorAll(".js-slider__input").forEach((t=>{t&&e.push(t)})),e.forEach((e=>e.addEventListener("change",this.handleItemChange)))}null===(e=this.dom.content)||void 0===e||e.addEventListener("pointerdown",this.handleContentPointerDown),null===(t=this.dom.content)||void 0===t||t.addEventListener("click",this.handleContentClick),null!==this.dom.thumb&&(null===(i=this.dom.thumb)||void 0===i||i.addEventListener("keydown",this.handleThumbKeyPress),null===(o=this.dom.thumb)||void 0===o||o.addEventListener("touchmove",this.handleThumbTouchMove,{passive:!0}))}}handleItemChange(e){if(void 0===this.dom)return;if(this.toggleIndicator(),void 0===this.mapElements||void 0===this.slider)return;const{target:t}=e;if(t instanceof HTMLInputElement){const{role:e}=t.dataset,i=this.mapElements.get("".concat(e));if(void 0===i)return;const o=this.slider.getValue(i);let s;s="boolean"==typeof o?t.checked:"number"==typeof o?Number(t.value):void 0,void 0!==s&&(this.slider.setValue("".concat(i),s),"valueFrom"!==i&&"valueTo"!==i&&(this.dom.content&&(this.dom.content.innerHTML=""),this.addSlider(this.slider.getState())),this.updateForm())}this.toggleIndicator()}toggleIndicator(){void 0!==this.dom&&void 0!==this.dom.indicator&&null!==this.dom.indicator&&this.dom.indicator.classList.toggle("main__slider-indicator_active")}addSlider(e){void 0!==this.dom&&this.dom.content&&(this.slider=s()(this.dom.content).sliderPlugin(e))}findElements(){var e,t;if(void 0===this.dom)return;if(void 0===this.dom.root)return;if(this.dom.indicator=this.dom.root.querySelector(".js-main__slider-indicator"),this.mapElements=new Map,this.dom.content=this.dom.root.querySelector(".js-slider__content"),this.dom.form=this.dom.root.querySelector(".js-slider__form"),!this.dom.form)return;const i=this.dom.form.querySelector(".js-slider__input[data-role = min]");if(void 0===this.numericVariables)return;this.numericVariables.min=Number(i.value),this.mapElements.set("min","min");const o=this.dom.form.querySelector(".js-slider__input[data-role = max]");this.numericVariables.max=Number(o.value),this.mapElements.set("max","max");const s=this.dom.form.querySelector(".js-slider__input[data-role = step]");this.numericVariables.step=Number(s.value),this.mapElements.set("step","step");const r=this.dom.form.querySelector(".js-slider__input[data-role = from]");this.numericVariables.from=Number(r.value),r.step="".concat(this.numericVariables.step),this.mapElements.set("from","valueFrom");const n=this.dom.form.querySelector(".js-slider__input[data-role = to]");this.numericVariables.to=Number(n.value),n.step="".concat(this.numericVariables.step),this.mapElements.set("to","valueTo");const a=this.dom.form.querySelector(".js-slider__input[data-role = gap]");a.value&&(this.numericVariables.gap=Number(a.value)),this.mapElements.set("gap","scalePercentGap");const l=this.dom.form.querySelector(".js-slider__input[data-role = range]");if(void 0===this.booleanVariables)return;this.booleanVariables.range=l.checked,this.booleanVariables.range&&(n.disabled=!1),this.booleanVariables.range||(n.disabled=!0),this.mapElements.set("range","isRange");const d=this.dom.form.querySelector(".js-slider__input[data-role = marks]");this.booleanVariables.marks=d.checked,this.booleanVariables.marks&&(a.disabled=!1),this.booleanVariables.marks||(a.disabled=!0),this.mapElements.set("marks","scaleMarks");const h=this.dom.form.querySelector(".js-slider__input[data-role = tip]");this.booleanVariables.tip=h.checked,this.mapElements.set("tip","isTip");const m=this.dom.form.querySelector(".js-slider__input[data-role = progress]");this.booleanVariables.progress=m.checked,this.mapElements.set("progress","isProgress");const c=this.dom.form.querySelector(".js-slider__input[data-role = vertical]");this.booleanVariables.vertical=c.checked,this.mapElements.set("vertical","isVertical"),(null===(e=this.dom.content)||void 0===e?void 0:e.querySelector(".js-plugin-slider__thumb"))&&(this.dom.thumb=null===(t=this.dom.content)||void 0===t?void 0:t.querySelector(".js-plugin-slider__thumb"))}updateForm(){void 0!==this.mapElements&&this.mapElements.forEach(((e,t)=>{var i;if(void 0===this.dom)return;const o=null===(i=this.dom.form)||void 0===i?void 0:i.querySelector(".js-slider__input[data-role = ".concat(t,"]"));if(o instanceof HTMLInputElement){if(void 0===this.slider)return;o&&"number"==typeof this.slider.getValue(e)&&(o.value="".concat(this.slider.getValue("".concat(e)))),o&&"boolean"==typeof this.slider.getValue(e)&&(this.slider.getValue("".concat(e))?o.checked=!0:o.checked=!1),this.findElements()}}))}handleContentClick(){this.toggleIndicator(),this.updateForm(),this.toggleIndicator()}handleContentPointerDown(){var e,t;if(void 0===this.dom)return;this.toggleIndicator();const i=()=>{this.updateForm()},o=()=>{var e,t;void 0!==this.dom&&(null===(e=this.dom.content)||void 0===e||e.removeEventListener("pointermove",i),null===(t=this.dom.content)||void 0===t||t.removeEventListener("pointerup",o),this.toggleIndicator())};null===(e=this.dom.content)||void 0===e||e.addEventListener("pointermove",i),null===(t=this.dom.content)||void 0===t||t.addEventListener("pointerup",o)}handleThumbKeyPress(e){this.toggleIndicator();const{key:t}=e;"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||this.updateForm(),this.toggleIndicator()}handleThumbTouchMove(){this.toggleIndicator();const e=e=>{e.stopImmediatePropagation(),this.updateForm()},t=()=>{document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t),this.toggleIndicator()};document.addEventListener("touchmove",e),document.addEventListener("touchend",t)}}document.querySelectorAll(".js-main__slider").forEach((e=>new r(e)))}},i={};function o(e){var s=i[e];if(void 0!==s)return s.exports;var r=i[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,e=[],o.O=function(t,i,s,r){if(!i){var n=1/0;for(h=0;h<e.length;h++){i=e[h][0],s=e[h][1],r=e[h][2];for(var a=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(o.O).every((function(e){return o.O[e](i[l])}))?i.splice(l--,1):(a=!1,r<n&&(n=r));if(a){e.splice(h--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[i,s,r]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={577:0,309:0};o.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,r,n=i[0],a=i[1],l=i[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(l)var h=l(o)}for(t&&t(i);d<n.length;d++)r=n[d],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(h)},i=self.webpackChunkmeta_slider=self.webpackChunkmeta_slider||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var s=o.O(void 0,[755,390],(function(){return o(868)}));s=o.O(s)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSUUsRUFBc0JoRCxFQUFvQlEsT0FBRTdFLEVBQVcsQ0FBQyxJQUFJLE1BQU0sV0FBYSxPQUFPcUUsRUFBb0IsSUFBTSxJQUNwSGdELEVBQXNCaEQsRUFBb0JRLEVBQUV3QyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL2RlbW8tcGFnZS9kZW1vLXBhZ2UudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gZnVuY3Rpb24ocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBjaHVua0lkcyA9IGRlZmVycmVkW2ldWzBdO1xuXHRcdHZhciBmbiA9IGRlZmVycmVkW2ldWzFdO1xuXHRcdHZhciBwcmlvcml0eSA9IGRlZmVycmVkW2ldWzJdO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeShmdW5jdGlvbihrZXkpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKTsgfSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHsgTW9kZWxJbnB1dFN0YXRlLCBNb2RlbFZhbHVlIH0gZnJvbSAnU3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XG5pbXBvcnQgJy4uL3NyYy9zbGlkZXInO1xuaW1wb3J0ICcuL3N0eWxlcy5zY3NzJztcblxuaW50ZXJmYWNlIEVsZW1lbnRMaXN0ZW5lciB7XG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZTogJ2NoYW5nZScsIGxpc3RlbmVyOiAoZXZlbnQ6IElucHV0RXZlbnQpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgRWxlbWVudFByZXNzIHtcbiAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlOiAna2V5ZG93bicgfCAndG91Y2htb3ZlJywgbGlzdGVuZXI6IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCwgb3B0aW9ucz86IHsgcGFzc2l2ZTogYm9vbGVhbiB9KTogdm9pZDtcbn1cblxuY2xhc3MgRGVtb1NsaWRlciB7XG4gIGRvbToge1xuICAgIHJvb3Q6IEVsZW1lbnQ7XG4gICAgaW5kaWNhdG9yOiBFbGVtZW50IHwgbnVsbDtcbiAgICBmb3JtPzogRWxlbWVudCB8IG51bGw7XG4gICAgY29udGVudD86IEVsZW1lbnQgfCBudWxsO1xuICAgIHRodW1iPzogRWxlbWVudFByZXNzIHwgbnVsbDtcbiAgfTtcblxuICBib29sZWFuVmFyaWFibGVzOiB7XG4gICAgcmFuZ2U6IGJvb2xlYW47XG4gICAgbWFya3M6IGJvb2xlYW47XG4gICAgdGlwOiBib29sZWFuO1xuICAgIHByb2dyZXNzOiBib29sZWFuO1xuICAgIHZlcnRpY2FsOiBib29sZWFuO1xuICB9O1xuXG4gIG51bWVyaWNWYXJpYWJsZXM6IHtcbiAgICBtaW46IG51bWJlcjtcbiAgICBtYXg6IG51bWJlcjtcbiAgICBzdGVwOiBudW1iZXI7XG4gICAgZnJvbTogbnVtYmVyIHwgbnVsbDtcbiAgICB0bz86IG51bWJlciB8IG51bGw7XG4gICAgZ2FwPzogbnVtYmVyIHwgbnVsbDtcbiAgfTtcblxuICBtYXBFbGVtZW50cz86IE1hcDxzdHJpbmcsIE1vZGVsVmFsdWU+O1xuXG4gIHNsaWRlcj86IGltcG9ydCgnLi4vc3JjL2NvbXBvbmVudHMvUHJlc2VudGVyL1ByZXNlbnRlcicpLmRlZmF1bHQ7XG5cbiAgc3RhdGVPYmplY3Q/OiB7XG4gICAgbWluOiBudW1iZXI7XG4gICAgbWF4OiBudW1iZXI7XG4gICAgdmFsdWVGcm9tOiBudW1iZXI7XG4gICAgdmFsdWVUbzogbnVtYmVyO1xuICAgIHN0ZXA6IG51bWJlcjtcbiAgICBzY2FsZVBlcmNlbnRHYXA6IG51bWJlcjtcbiAgICBzY2FsZU1hcmtzOiBib29sZWFuO1xuICAgIGlzVGlwOiBib29sZWFuO1xuICAgIGlzUHJvZ3Jlc3M6IGJvb2xlYW47XG4gICAgaXNSYW5nZTogYm9vbGVhbjtcbiAgICBpc1ZlcnRpY2FsOiBib29sZWFuO1xuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHJvb3Q6IEVsZW1lbnQpIHtcbiAgICB0aGlzLmRvbSA9IHtcbiAgICAgIHJvb3QsXG4gICAgICBpbmRpY2F0b3I6IG51bGwsXG4gICAgICBmb3JtOiBudWxsLFxuICAgICAgY29udGVudDogbnVsbCxcbiAgICAgIHRodW1iOiBudWxsLFxuICAgIH07XG5cbiAgICB0aGlzLm51bWVyaWNWYXJpYWJsZXMgPSB7XG4gICAgICBtaW46IDAsXG4gICAgICBtYXg6IDEwLFxuICAgICAgc3RlcDogMSxcbiAgICAgIGZyb206IDEsXG4gICAgICB0bzogbnVsbCxcbiAgICAgIGdhcDogbnVsbCxcbiAgICB9O1xuXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzID0ge1xuICAgICAgcmFuZ2U6IGZhbHNlLFxuICAgICAgbWFya3M6IGZhbHNlLFxuICAgICAgdGlwOiBmYWxzZSxcbiAgICAgIHByb2dyZXNzOiBmYWxzZSxcbiAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuZG9tICE9PSB1bmRlZmluZWQpIHRoaXMuZG9tLnJvb3QgPSByb290O1xuXG4gICAgdGhpcy5oYW5kbGVJdGVtQ2hhbmdlID0gdGhpcy5oYW5kbGVJdGVtQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVDb250ZW50UG9pbnRlckRvd24gPSB0aGlzLmhhbmRsZUNvbnRlbnRQb2ludGVyRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlQ29udGVudENsaWNrID0gdGhpcy5oYW5kbGVDb250ZW50Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZVRodW1iS2V5UHJlc3MgPSB0aGlzLmhhbmRsZVRodW1iS2V5UHJlc3MuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZVRodW1iVG91Y2hNb3ZlID0gdGhpcy5oYW5kbGVUaHVtYlRvdWNoTW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgcHVibGljIGluaXQoKSB7XG4gICAgdGhpcy5maW5kRWxlbWVudHMoKTtcblxuICAgIHRoaXMuc3RhdGVPYmplY3QgPSB7XG4gICAgICBtaW46IHRoaXMubnVtZXJpY1ZhcmlhYmxlcy5taW4sXG4gICAgICBtYXg6IHRoaXMubnVtZXJpY1ZhcmlhYmxlcy5tYXgsXG4gICAgICB2YWx1ZUZyb206IHRoaXMubnVtZXJpY1ZhcmlhYmxlcy5mcm9tIHx8IDAsXG4gICAgICB2YWx1ZVRvOiB0aGlzLm51bWVyaWNWYXJpYWJsZXMudG8gfHwgMCxcbiAgICAgIHN0ZXA6IHRoaXMubnVtZXJpY1ZhcmlhYmxlcy5zdGVwIHx8IDEsXG4gICAgICBzY2FsZVBlcmNlbnRHYXA6IHRoaXMubnVtZXJpY1ZhcmlhYmxlcy5nYXAgfHwgMSxcbiAgICAgIHNjYWxlTWFya3M6IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5tYXJrcyxcbiAgICAgIGlzVGlwOiB0aGlzLmJvb2xlYW5WYXJpYWJsZXMudGlwLFxuICAgICAgaXNQcm9ncmVzczogdGhpcy5ib29sZWFuVmFyaWFibGVzLnByb2dyZXNzLFxuICAgICAgaXNSYW5nZTogdGhpcy5ib29sZWFuVmFyaWFibGVzLnJhbmdlLFxuICAgICAgaXNWZXJ0aWNhbDogdGhpcy5ib29sZWFuVmFyaWFibGVzLnZlcnRpY2FsLFxuICAgIH07XG5cbiAgICB0aGlzLmFkZFNsaWRlcih0aGlzLnN0YXRlT2JqZWN0KTtcbiAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcblxuICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG4gIH1cblxuICBwdWJsaWMgYWRkTGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuZG9tLmZvcm0gIT09IHVuZGVmaW5lZCAmJiB0aGlzLmRvbS5mb3JtICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBlbGVtZW50czogRWxlbWVudExpc3RlbmVyW10gPSBbXTtcbiAgICAgIHRoaXMuZG9tLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmpzLXNsaWRlcl9faW5wdXQnKS5mb3JFYWNoKChlKSA9PiB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgZWxlbWVudHMucHVzaChlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGVsZW1lbnRzLmZvckVhY2goKGUpID0+IGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5oYW5kbGVJdGVtQ2hhbmdlKSk7XG4gICAgfVxuXG4gICAgdGhpcy5kb20uY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLmhhbmRsZUNvbnRlbnRQb2ludGVyRG93bik7XG4gICAgdGhpcy5kb20uY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNvbnRlbnRDbGljayk7XG4gICAgaWYgKHRoaXMuZG9tLnRodW1iICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmRvbS50aHVtYj8uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlVGh1bWJLZXlQcmVzcyk7XG4gICAgICB0aGlzLmRvbS50aHVtYj8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ3RvdWNobW92ZScsXG4gICAgICAgIHRoaXMuaGFuZGxlVGh1bWJUb3VjaE1vdmUsXG4gICAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlSXRlbUNoYW5nZShlOiBJbnB1dEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZG9tID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICAgIHRoaXMudG9nZ2xlSW5kaWNhdG9yKCk7XG4gICAgaWYgKHRoaXMubWFwRWxlbWVudHMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnNsaWRlciA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgY29uc3QgeyB0YXJnZXQgfSA9IGU7XG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHsgcm9sZSB9ID0gdGFyZ2V0LmRhdGFzZXQ7XG4gICAgICBjb25zdCBwYXJhbSA9IHRoaXMubWFwRWxlbWVudHMuZ2V0KGAke3JvbGV9YCk7XG4gICAgICBpZiAocGFyYW0gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgY29uc3QgdmFsdWVQYXJhbSA9IHRoaXMuc2xpZGVyLmdldFZhbHVlKHBhcmFtKTtcbiAgICAgIGxldCB2YWx1ZUZvcm06IG51bWJlciB8IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlUGFyYW0gPT09ICdib29sZWFuJykge1xuICAgICAgICB2YWx1ZUZvcm0gPSB0YXJnZXQuY2hlY2tlZDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlUGFyYW0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhbHVlRm9ybSA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVGb3JtID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlRm9ybSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2xpZGVyLnNldFZhbHVlKGAke3BhcmFtfWAsIHZhbHVlRm9ybSk7XG4gICAgICAgIGlmIChwYXJhbSAhPT0gJ3ZhbHVlRnJvbScgJiYgcGFyYW0gIT09ICd2YWx1ZVRvJykge1xuICAgICAgICAgIGlmICh0aGlzLmRvbS5jb250ZW50KSB0aGlzLmRvbS5jb250ZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgIHRoaXMuYWRkU2xpZGVyKHRoaXMuc2xpZGVyLmdldFN0YXRlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudG9nZ2xlSW5kaWNhdG9yKCk7XG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlSW5kaWNhdG9yKCkge1xuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuZG9tLmluZGljYXRvciAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZG9tLmluZGljYXRvciAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5kb20uaW5kaWNhdG9yLmNsYXNzTGlzdC50b2dnbGUoJ21haW5fX3NsaWRlci1pbmRpY2F0b3JfYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFkZFNsaWRlcihvcHRpb25zOiBNb2RlbElucHV0U3RhdGUpIHtcbiAgICBpZiAodGhpcy5kb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmICghdGhpcy5kb20uY29udGVudCkgcmV0dXJuO1xuICAgIHRoaXMuc2xpZGVyID0gJCh0aGlzLmRvbS5jb250ZW50KS5zbGlkZXJQbHVnaW4ob3B0aW9ucyk7XG4gIH1cblxuICBwdWJsaWMgZmluZEVsZW1lbnRzKCkge1xuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuZG9tLnJvb3QgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIHRoaXMuZG9tLmluZGljYXRvciA9IHRoaXMuZG9tLnJvb3QucXVlcnlTZWxlY3RvcignLmpzLW1haW5fX3NsaWRlci1pbmRpY2F0b3InKTtcbiAgICB0aGlzLm1hcEVsZW1lbnRzID0gbmV3IE1hcCgpO1xuXG4gICAgdGhpcy5kb20uY29udGVudCA9IHRoaXMuZG9tLnJvb3QucXVlcnlTZWxlY3RvcignLmpzLXNsaWRlcl9fY29udGVudCcpO1xuICAgIHRoaXMuZG9tLmZvcm0gPSB0aGlzLmRvbS5yb290LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXJfX2Zvcm0nKTtcbiAgICBpZiAoIXRoaXMuZG9tLmZvcm0pIHJldHVybjtcbiAgICBjb25zdCBtaW4gPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZG9tLmZvcm0ucXVlcnlTZWxlY3RvcignLmpzLXNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gbWluXScpO1xuICAgIGlmICh0aGlzLm51bWVyaWNWYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIHRoaXMubnVtZXJpY1ZhcmlhYmxlcy5taW4gPSBOdW1iZXIobWluLnZhbHVlKTtcbiAgICB0aGlzLm1hcEVsZW1lbnRzLnNldCgnbWluJywgJ21pbicpO1xuXG4gICAgY29uc3QgbWF4ID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmRvbS5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1heF0nKTtcbiAgICB0aGlzLm51bWVyaWNWYXJpYWJsZXMubWF4ID0gTnVtYmVyKG1heC52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ21heCcsICdtYXgnKTtcblxuICAgIGNvbnN0IHN0ZXAgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZG9tLmZvcm0ucXVlcnlTZWxlY3RvcignLmpzLXNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gc3RlcF0nKTtcbiAgICB0aGlzLm51bWVyaWNWYXJpYWJsZXMuc3RlcCA9IE51bWJlcihzdGVwLnZhbHVlKTtcbiAgICB0aGlzLm1hcEVsZW1lbnRzLnNldCgnc3RlcCcsICdzdGVwJyk7XG5cbiAgICBjb25zdCBmcm9tID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmRvbS5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IGZyb21dJyk7XG4gICAgdGhpcy5udW1lcmljVmFyaWFibGVzLmZyb20gPSBOdW1iZXIoZnJvbS52YWx1ZSk7XG5cbiAgICBmcm9tLnN0ZXAgPSBgJHt0aGlzLm51bWVyaWNWYXJpYWJsZXMuc3RlcH1gO1xuICAgIHRoaXMubWFwRWxlbWVudHMuc2V0KCdmcm9tJywgJ3ZhbHVlRnJvbScpO1xuXG4gICAgY29uc3QgdG8gPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZG9tLmZvcm0ucXVlcnlTZWxlY3RvcignLmpzLXNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gdG9dJyk7XG4gICAgdGhpcy5udW1lcmljVmFyaWFibGVzLnRvID0gTnVtYmVyKHRvLnZhbHVlKTtcbiAgICB0by5zdGVwID0gYCR7dGhpcy5udW1lcmljVmFyaWFibGVzLnN0ZXB9YDtcbiAgICB0aGlzLm1hcEVsZW1lbnRzLnNldCgndG8nLCAndmFsdWVUbycpO1xuXG4gICAgY29uc3QgZ2FwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmRvbS5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IGdhcF0nKTtcbiAgICBpZiAoZ2FwLnZhbHVlKSB0aGlzLm51bWVyaWNWYXJpYWJsZXMuZ2FwID0gTnVtYmVyKGdhcC52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ2dhcCcsICdzY2FsZVBlcmNlbnRHYXAnKTtcblxuICAgIGNvbnN0IHJhbmdlID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmRvbS5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHJhbmdlXScpO1xuXG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLnJhbmdlID0gcmFuZ2UuY2hlY2tlZDtcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLnJhbmdlKSB0by5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5ib29sZWFuVmFyaWFibGVzLnJhbmdlKSB0by5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ3JhbmdlJywgJ2lzUmFuZ2UnKTtcblxuICAgIGNvbnN0IG1hcmtzID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmRvbS5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1hcmtzXScpO1xuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5tYXJrcyA9IG1hcmtzLmNoZWNrZWQ7XG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5tYXJrcykgZ2FwLmRpc2FibGVkID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmJvb2xlYW5WYXJpYWJsZXMubWFya3MpIGdhcC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ21hcmtzJywgJ3NjYWxlTWFya3MnKTtcblxuICAgIGNvbnN0IHRpcCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5kb20uZm9ybS5xdWVyeVNlbGVjdG9yKCcuanMtc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSB0aXBdJyk7XG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLnRpcCA9IHRpcC5jaGVja2VkO1xuICAgIHRoaXMubWFwRWxlbWVudHMuc2V0KCd0aXAnLCAnaXNUaXAnKTtcblxuICAgIGNvbnN0IHByb2dyZXNzID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmRvbS5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHByb2dyZXNzXScpO1xuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5wcm9ncmVzcyA9IHByb2dyZXNzLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ3Byb2dyZXNzJywgJ2lzUHJvZ3Jlc3MnKTtcblxuICAgIGNvbnN0IHZlcnRpY2FsID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmRvbS5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHZlcnRpY2FsXScpO1xuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcy52ZXJ0aWNhbCA9IHZlcnRpY2FsLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ3ZlcnRpY2FsJywgJ2lzVmVydGljYWwnKTtcblxuICAgIGlmICh0aGlzLmRvbS5jb250ZW50Py5xdWVyeVNlbGVjdG9yKCcuanMtcGx1Z2luLXNsaWRlcl9fdGh1bWInKSkge1xuICAgICAgdGhpcy5kb20udGh1bWIgPSB0aGlzLmRvbS5jb250ZW50Py5xdWVyeVNlbGVjdG9yKCcuanMtcGx1Z2luLXNsaWRlcl9fdGh1bWInKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlRm9ybSgpIHtcbiAgICBpZiAodGhpcy5tYXBFbGVtZW50cyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgdGhpcy5tYXBFbGVtZW50cy5mb3JFYWNoKChrZXk6IE1vZGVsVmFsdWUsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5kb20uZm9ybT8ucXVlcnlTZWxlY3RvcihgLmpzLXNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gJHt2YWx1ZX1dYCk7XG4gICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2xpZGVyID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgdHlwZW9mIHRoaXMuc2xpZGVyLmdldFZhbHVlKGtleSkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSA9IGAke3RoaXMuc2xpZGVyLmdldFZhbHVlKGAke2tleX1gKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgdHlwZW9mIHRoaXMuc2xpZGVyLmdldFZhbHVlKGtleSkgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGlmICh0aGlzLnNsaWRlci5nZXRWYWx1ZShgJHtrZXl9YCkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmluZEVsZW1lbnRzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQ29udGVudENsaWNrKCkge1xuICAgIHRoaXMudG9nZ2xlSW5kaWNhdG9yKCk7XG4gICAgdGhpcy51cGRhdGVGb3JtKCk7XG4gICAgdGhpcy50b2dnbGVJbmRpY2F0b3IoKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVDb250ZW50UG9pbnRlckRvd24oKSB7XG4gICAgaWYgKHRoaXMuZG9tID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICB0aGlzLnRvZ2dsZUluZGljYXRvcigpO1xuICAgIGNvbnN0IGhhbmRsZVBvaW50ZXJNb3ZlID0gKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVGb3JtKCk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVQb2ludGVyVXAgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5kb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgdGhpcy5kb20uY29udGVudD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBoYW5kbGVQb2ludGVyTW92ZSk7XG4gICAgICB0aGlzLmRvbS5jb250ZW50Py5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBoYW5kbGVQb2ludGVyVXApO1xuICAgICAgdGhpcy50b2dnbGVJbmRpY2F0b3IoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5kb20uY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBoYW5kbGVQb2ludGVyTW92ZSk7XG4gICAgdGhpcy5kb20uY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgaGFuZGxlUG9pbnRlclVwKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVUaHVtYktleVByZXNzKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZUluZGljYXRvcigpO1xuXG4gICAgY29uc3QgeyBrZXkgfSA9IGU7XG4gICAgaWYgKGtleSA9PT0gJ0Fycm93TGVmdCcgfHwga2V5ID09PSAnQXJyb3dVcCcgfHwga2V5ID09PSAnQXJyb3dSaWdodCcgfHwga2V5ID09PSAnQXJyb3dEb3duJykge1xuICAgICAgdGhpcy51cGRhdGVGb3JtKCk7XG4gICAgfVxuXG4gICAgdGhpcy50b2dnbGVJbmRpY2F0b3IoKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVUaHVtYlRvdWNoTW92ZSgpIHtcbiAgICB0aGlzLnRvZ2dsZUluZGljYXRvcigpO1xuICAgIGNvbnN0IGhhbmRsZVRodW1iVG91Y2hNb3ZlU3RhcnQgPSAoZTogVG91Y2hFdmVudCkgPT4ge1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVUaHVtYlRvdWNoTW92ZVN0YXJ0RW5kID0gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaGFuZGxlVGh1bWJUb3VjaE1vdmVTdGFydCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGhhbmRsZVRodW1iVG91Y2hNb3ZlU3RhcnRFbmQpO1xuICAgICAgdGhpcy50b2dnbGVJbmRpY2F0b3IoKTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaGFuZGxlVGh1bWJUb3VjaE1vdmVTdGFydCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBoYW5kbGVUaHVtYlRvdWNoTW92ZVN0YXJ0RW5kKTtcbiAgfVxufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbWFpbl9fc2xpZGVyJykuZm9yRWFjaCgoZSkgPT4gbmV3IERlbW9TbGlkZXIoZSkpO1xuXG5leHBvcnQgZGVmYXVsdCBEZW1vU2xpZGVyO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDU3NzogMCxcblx0MzA5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IGZ1bmN0aW9uKGNodW5rSWQpIHsgcmV0dXJuIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMDsgfTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSBmdW5jdGlvbihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkge1xuXHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuXHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuXHR2YXIgcnVudGltZSA9IGRhdGFbMl07XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZShmdW5jdGlvbihpZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMDsgfSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rbWV0YV9zbGlkZXJcIl0gPSBzZWxmW1wid2VicGFja0NodW5rbWV0YV9zbGlkZXJcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs3NTUsMzkwXSwgZnVuY3Rpb24oKSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2OCk7IH0pXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwiRGVtb1NsaWRlciIsImNvbnN0cnVjdG9yIiwicm9vdCIsInRoaXMiLCJkb20iLCJpbmRpY2F0b3IiLCJmb3JtIiwiY29udGVudCIsInRodW1iIiwibnVtZXJpY1ZhcmlhYmxlcyIsIm1pbiIsIm1heCIsInN0ZXAiLCJmcm9tIiwidG8iLCJnYXAiLCJib29sZWFuVmFyaWFibGVzIiwicmFuZ2UiLCJtYXJrcyIsInRpcCIsInByb2dyZXNzIiwidmVydGljYWwiLCJ1bmRlZmluZWQiLCJoYW5kbGVJdGVtQ2hhbmdlIiwiYmluZCIsImhhbmRsZUNvbnRlbnRQb2ludGVyRG93biIsImhhbmRsZUNvbnRlbnRDbGljayIsImhhbmRsZVRodW1iS2V5UHJlc3MiLCJoYW5kbGVUaHVtYlRvdWNoTW92ZSIsImluaXQiLCJmaW5kRWxlbWVudHMiLCJzdGF0ZU9iamVjdCIsInZhbHVlRnJvbSIsInZhbHVlVG8iLCJzY2FsZVBlcmNlbnRHYXAiLCJzY2FsZU1hcmtzIiwiaXNUaXAiLCJpc1Byb2dyZXNzIiwiaXNSYW5nZSIsImlzVmVydGljYWwiLCJhZGRTbGlkZXIiLCJ1cGRhdGVGb3JtIiwiYWRkTGlzdGVuZXJzIiwiZWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJwdXNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9hIiwiX2IiLCJfYyIsIl9kIiwicGFzc2l2ZSIsInRvZ2dsZUluZGljYXRvciIsIm1hcEVsZW1lbnRzIiwic2xpZGVyIiwidGFyZ2V0IiwiSFRNTElucHV0RWxlbWVudCIsInJvbGUiLCJkYXRhc2V0IiwicGFyYW0iLCJnZXQiLCJ2YWx1ZVBhcmFtIiwiZ2V0VmFsdWUiLCJ2YWx1ZUZvcm0iLCJjaGVja2VkIiwiTnVtYmVyIiwidmFsdWUiLCJzZXRWYWx1ZSIsImlubmVySFRNTCIsImdldFN0YXRlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwib3B0aW9ucyIsIiQiLCJzbGlkZXJQbHVnaW4iLCJxdWVyeVNlbGVjdG9yIiwiTWFwIiwic2V0IiwiZGlzYWJsZWQiLCJrZXkiLCJlbGVtZW50IiwiaGFuZGxlUG9pbnRlck1vdmUiLCJoYW5kbGVQb2ludGVyVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlVGh1bWJUb3VjaE1vdmVTdGFydCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImhhbmRsZVRodW1iVG91Y2hNb3ZlU3RhcnRFbmQiLCJkb2N1bWVudCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwibGVuZ3RoIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsInNwbGljZSIsInIiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=