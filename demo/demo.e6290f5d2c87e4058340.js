!function(){"use strict";var e,t={774:function(e,t,r){var i=r(755),n=r.n(i);r(272);function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.init()}var t,r,i;return t=e,(r=[{key:"init",value:function(){this.findElems(),this.stateObject={min:this.min,max:this.max,valueFrom:this.from||0,valueTo:this.to||0,step:this.step||1,scalePercentGap:this.gap||1,scaleMarks:this.marks,isTip:this.tip,isProgress:this.progress,isRange:this.range,isVertical:this.vertical},this.addSlider(this.stateObject),this.updateForm(),this.addListeners()}},{key:"addListeners",value:function(){var e,t,r,i,n=this;if(this.form){var s=[];this.form.querySelectorAll(".slider__input").forEach((function(e){e&&s.push(e)})),s.forEach((function(e){return e.addEventListener("change",n.updateState.bind(n))}))}null===(e=this.content)||void 0===e||e.addEventListener("mousedown",this.handleClick.bind(this)),null===(t=this.content)||void 0===t||t.addEventListener("click",this.updateForm.bind(this)),this.thumb&&(null===(r=this.thumb)||void 0===r||r.addEventListener("keydown",this.handelKey.bind(this)),null===(i=this.thumb)||void 0===i||i.addEventListener("touchmove",this.touchDown.bind(this),{passive:!0}))}},{key:"updateState",value:function(e){var t=e.target;if(t instanceof HTMLInputElement){var r=t.dataset.role,i=this.mapElems.get("".concat(r));if(void 0===i)return;var n,s=this.slider.getValue(i);void 0!==(n="boolean"==typeof s?t.checked:"number"==typeof s?Number(t.value):void 0)&&(this.slider.setValue("".concat(i),n),"valueFrom"!==i&&"valueTo"!==i&&(this.content&&(this.content.innerHTML=""),this.addSlider(this.slider.getState())),this.updateForm())}}},{key:"addSlider",value:function(e){this.content&&(this.slider=n()(this.content).sliderPlugin(e))}},{key:"findElems",value:function(){var e,t;if(this.mapElems=new Map,this.content=this.root.querySelector(".slider__content"),this.form=this.root.querySelector(".slider__form"),this.form){var r=this.form.querySelector(".slider__input[data-role = min]");this.min=Number(r.value),this.mapElems.set("min","min");var i=this.form.querySelector(".slider__input[data-role = max]");this.max=Number(i.value),this.mapElems.set("max","max");var n=this.form.querySelector(".slider__input[data-role = step]");this.step=Number(n.value),this.mapElems.set("step","step");var s=this.form.querySelector(".slider__input[data-role = from]");this.from=Number(s.value),s.step="".concat(this.step),this.mapElems.set("from","valueFrom");var o=this.form.querySelector(".slider__input[data-role = to]");this.to=Number(o.value),o.step="".concat(this.step),this.mapElems.set("to","valueTo");var a=this.form.querySelector(".slider__input[data-role = gap]");a.value&&(this.gap=Number(a.value)),this.mapElems.set("gap","scalePercentGap");var l=this.form.querySelector(".slider__input[data-role = range]");this.range=l.checked,this.range&&(o.disabled=!1),this.range||(o.disabled=!0),this.mapElems.set("range","isRange");var u=this.form.querySelector(".slider__input[data-role = marks]");this.marks=u.checked,this.marks&&(a.disabled=!1),this.marks||(a.disabled=!0),this.mapElems.set("marks","scaleMarks");var c=this.form.querySelector(".slider__input[data-role = tip]");this.tip=c.checked,this.mapElems.set("tip","isTip");var h=this.form.querySelector(".slider__input[data-role = progress]");this.progress=h.checked,this.mapElems.set("progress","isProgress");var d=this.form.querySelector(".slider__input[data-role = vertical]");this.vertical=d.checked,this.mapElems.set("vertical","isVertical"),(null===(e=this.content)||void 0===e?void 0:e.querySelector(".plugin-slider__thumb"))&&(this.thumb=null===(t=this.content)||void 0===t?void 0:t.querySelector(".plugin-slider__thumb"))}}},{key:"updateForm",value:function(){var e=this;this.mapElems.forEach((function(t,r){var i,n=null===(i=e.form)||void 0===i?void 0:i.querySelector(".slider__input[data-role = ".concat(r,"]"));n instanceof HTMLInputElement&&(n&&"number"==typeof e.slider.getValue(t)&&(n.value="".concat(e.slider.getValue("".concat(t)))),n&&"boolean"==typeof e.slider.getValue(t)&&(e.slider.getValue("".concat(t))?n.checked=!0:n.checked=!1),e.findElems())}))}},{key:"handleClick",value:function(){var e,t,r=this,i=function(){return r.updateForm()};null===(e=this.content)||void 0===e||e.addEventListener("mousemove",i),null===(t=this.content)||void 0===t||t.addEventListener("mouseup",(function e(){var t,n;null===(t=r.content)||void 0===t||t.removeEventListener("mousemove",i),null===(n=r.content)||void 0===n||n.removeEventListener("mouseup",e)}))}},{key:"handelKey",value:function(e){var t=e.key;"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||this.updateForm()}},{key:"touchDown",value:function(){this.updateForm()}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.querySelectorAll(".slider").forEach((function(e){return new o(e)}))}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,i),s.exports}i.m=t,e=[],i.O=function(t,r,n,s){if(!r){var o=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],s=e[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((function(e){return i.O[e](r[l])}))?r.splice(l--,1):(a=!1,s<o&&(o=s));if(a){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,n,s]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={577:0,309:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var c=l(i)}for(t&&t(r);u<o.length;u++)s=o[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},r=self.webpackChunkmeta_slider=self.webpackChunkmeta_slider||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var n=i.O(void 0,[755,272],(function(){return i(774)}));n=i.O(n)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sV0FBYSxPQUFPeUIsRUFBb0IsSUFBTSxJQUNwSGdELEVBQXNCaEQsRUFBb0JRLEVBQUV3QyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL2RlbW8tcGFnZS9kZW1vLXBhZ2UudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gZnVuY3Rpb24ocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBjaHVua0lkcyA9IGRlZmVycmVkW2ldWzBdO1xuXHRcdHZhciBmbiA9IGRlZmVycmVkW2ldWzFdO1xuXHRcdHZhciBwcmlvcml0eSA9IGRlZmVycmVkW2ldWzJdO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeShmdW5jdGlvbihrZXkpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKTsgfSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHsgTW9kZWxJbnB1dFN0YXRlLCBNb2RlbFZhbCB9IGZyb20gJy4uL3NyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xuaW1wb3J0ICcuLi9zcmMvc2xpZGVyJztcbmltcG9ydCAnLi9zdHlsZXMuc2Nzcyc7XG5cbmludGVyZmFjZSBFbGVtZW50TGlzdGVuZXIge1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGU6ICdjaGFuZ2UnLCBsaXN0ZW5lcjogKGV2ZW50OiBJbnB1dEV2ZW50KSA9PiB2b2lkKTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIEVsZW1lbnRQcmVzcyB7XG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZTogJ2tleWRvd24nIHwgJ3RvdWNobW92ZScsIGxpc3RlbmVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQsIG9wdGlvbnM/OiB7IHBhc3NpdmU6IGJvb2xlYW4gfSk6IHZvaWQ7XG59XG5cbmNsYXNzIERlbW9TbGlkZXIge1xuICByb290OiBFbGVtZW50O1xuXG4gIGZvcm0hOiBFbGVtZW50IHwgbnVsbDtcblxuICBtaW4hOiBudW1iZXI7XG5cbiAgbWF4ITogbnVtYmVyO1xuXG4gIHN0ZXAhOiBudW1iZXIgfCBudWxsO1xuXG4gIGZyb20hOiBudW1iZXIgfCBudWxsO1xuXG4gIHRvITogbnVtYmVyIHwgbnVsbDtcblxuICBnYXAhOiBudW1iZXIgfCBudWxsO1xuXG4gIHJhbmdlITogYm9vbGVhbjtcblxuICBtYXJrcyE6IGJvb2xlYW47XG5cbiAgdGlwITogYm9vbGVhbjtcblxuICBwcm9ncmVzcyE6IGJvb2xlYW47XG5cbiAgdmVydGljYWwhOiBib29sZWFuO1xuXG4gIGNvbnRlbnQhOiBFbGVtZW50IHwgbnVsbDtcblxuICBtYXBFbGVtcyE6IE1hcDxzdHJpbmcsIE1vZGVsVmFsPjtcblxuICBzbGlkZXIhOiBpbXBvcnQoJ2M6L0NvZGUvTWV0YSBTbGlkZXIvc3JjL2NvbXBvbmVudHMvUHJlc2VudGVyL1ByZXNlbnRlcicpLmRlZmF1bHQ7XG5cbiAgdGh1bWI/OiBFbGVtZW50UHJlc3MgfCBudWxsO1xuXG4gIHN0YXRlT2JqZWN0IToge1xuICAgIG1pbjogbnVtYmVyO1xuICAgIG1heDogbnVtYmVyO1xuICAgIHZhbHVlRnJvbTogbnVtYmVyO1xuICAgIHZhbHVlVG86IG51bWJlcjtcbiAgICBzdGVwOiBudW1iZXI7XG4gICAgc2NhbGVQZXJjZW50R2FwOiBudW1iZXI7XG4gICAgc2NhbGVNYXJrczogYm9vbGVhbjsgaXNUaXA6XG4gICAgYm9vbGVhbjsgaXNQcm9ncmVzczogYm9vbGVhbjtcbiAgICBpc1JhbmdlOiBib29sZWFuO1xuICAgIGlzVmVydGljYWw6IGJvb2xlYW47XG4gIH07XG5cbiAgY29uc3RydWN0b3Iocm9vdDogRWxlbWVudCkge1xuICAgIHRoaXMucm9vdCA9IHJvb3Q7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBwcml2YXRlIGluaXQoKSB7XG4gICAgdGhpcy5maW5kRWxlbXMoKTtcbiAgICB0aGlzLnN0YXRlT2JqZWN0ID0ge1xuICAgICAgbWluOiB0aGlzLm1pbixcbiAgICAgIG1heDogdGhpcy5tYXgsXG4gICAgICB2YWx1ZUZyb206IHRoaXMuZnJvbSB8fCAwLFxuICAgICAgdmFsdWVUbzogdGhpcy50byB8fCAwLFxuICAgICAgc3RlcDogdGhpcy5zdGVwIHx8IDEsXG4gICAgICBzY2FsZVBlcmNlbnRHYXA6IHRoaXMuZ2FwIHx8IDEsXG4gICAgICBzY2FsZU1hcmtzOiB0aGlzLm1hcmtzLFxuICAgICAgaXNUaXA6IHRoaXMudGlwLFxuICAgICAgaXNQcm9ncmVzczogdGhpcy5wcm9ncmVzcyxcbiAgICAgIGlzUmFuZ2U6IHRoaXMucmFuZ2UsXG4gICAgICBpc1ZlcnRpY2FsOiB0aGlzLnZlcnRpY2FsLFxuICAgIH07XG5cbiAgICB0aGlzLmFkZFNsaWRlcih0aGlzLnN0YXRlT2JqZWN0KTtcbiAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcblxuICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIGFkZExpc3RlbmVycygpIHtcbiAgICBpZiAodGhpcy5mb3JtKSB7XG4gICAgICBjb25zdCBlbGVtczogRWxlbWVudExpc3RlbmVyW10gPSBbXTtcbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19pbnB1dCcpLmZvckVhY2goKGUpID0+IHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICBlbGVtcy5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZWxlbXMuZm9yRWFjaCgoZSkgPT4gZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZVN0YXRlLmJpbmQodGhpcykpKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRlbnQ/LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgdGhpcy5jb250ZW50Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMudXBkYXRlRm9ybS5iaW5kKHRoaXMpKTtcbiAgICBpZiAodGhpcy50aHVtYikge1xuICAgICAgdGhpcy50aHVtYj8uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGVsS2V5LmJpbmQodGhpcykpO1xuICAgICAgdGhpcy50aHVtYj8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ3RvdWNobW92ZScsXG4gICAgICAgIHRoaXMudG91Y2hEb3duLmJpbmQodGhpcyksXG4gICAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXRlKGU6IElucHV0RXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IHRhcmdldCB9ID0gZTtcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgY29uc3QgeyByb2xlIH0gPSB0YXJnZXQuZGF0YXNldDtcbiAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5tYXBFbGVtcy5nZXQoYCR7cm9sZX1gKTtcbiAgICAgIGlmIChwYXJhbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICBjb25zdCB2YWx1ZVBhcmFtID0gdGhpcy5zbGlkZXIuZ2V0VmFsdWUocGFyYW0pO1xuICAgICAgbGV0IHZhbHVlRm9ybTogbnVtYmVyIHwgYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWVQYXJhbSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHZhbHVlRm9ybSA9IHRhcmdldC5jaGVja2VkO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWVQYXJhbSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFsdWVGb3JtID0gTnVtYmVyKHRhcmdldC52YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZUZvcm0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWVGb3JtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zbGlkZXIuc2V0VmFsdWUoYCR7cGFyYW19YCwgdmFsdWVGb3JtKTtcbiAgICAgICAgaWYgKHBhcmFtICE9PSAndmFsdWVGcm9tJyAmJiBwYXJhbSAhPT0gJ3ZhbHVlVG8nKSB7XG4gICAgICAgICAgaWYgKHRoaXMuY29udGVudCkgdGhpcy5jb250ZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgIHRoaXMuYWRkU2xpZGVyKHRoaXMuc2xpZGVyLmdldFN0YXRlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU2xpZGVyKG9wdGlvbnM6IE1vZGVsSW5wdXRTdGF0ZSkge1xuICAgIGlmICghdGhpcy5jb250ZW50KSByZXR1cm47XG4gICAgdGhpcy5zbGlkZXIgPSAkKHRoaXMuY29udGVudCkuc2xpZGVyUGx1Z2luKG9wdGlvbnMpO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kRWxlbXMoKSB7XG4gICAgdGhpcy5tYXBFbGVtcyA9IG5ldyBNYXAoKTtcblxuICAgIHRoaXMuY29udGVudCA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19jb250ZW50Jyk7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2Zvcm0nKTtcbiAgICBpZiAoIXRoaXMuZm9ybSkgcmV0dXJuO1xuICAgIGNvbnN0IG1pbiA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1pbl0nKTtcbiAgICB0aGlzLm1pbiA9IE51bWJlcihtaW4udmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdtaW4nLCAnbWluJyk7XG5cbiAgICBjb25zdCBtYXggPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSBtYXhdJyk7XG4gICAgdGhpcy5tYXggPSBOdW1iZXIobWF4LnZhbHVlKTtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgnbWF4JywgJ21heCcpO1xuXG4gICAgY29uc3Qgc3RlcCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHN0ZXBdJyk7XG4gICAgdGhpcy5zdGVwID0gTnVtYmVyKHN0ZXAudmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdzdGVwJywgJ3N0ZXAnKTtcblxuICAgIGNvbnN0IGZyb20gPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSBmcm9tXScpO1xuICAgIHRoaXMuZnJvbSA9IE51bWJlcihmcm9tLnZhbHVlKTtcbiAgICBmcm9tLnN0ZXAgPSBgJHt0aGlzLnN0ZXB9YDtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgnZnJvbScsICd2YWx1ZUZyb20nKTtcblxuICAgIGNvbnN0IHRvID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gdG9dJyk7XG4gICAgdGhpcy50byA9IE51bWJlcih0by52YWx1ZSk7XG4gICAgdG8uc3RlcCA9IGAke3RoaXMuc3RlcH1gO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCd0bycsICd2YWx1ZVRvJyk7XG5cbiAgICBjb25zdCBnYXAgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSBnYXBdJyk7XG4gICAgaWYgKGdhcC52YWx1ZSkgdGhpcy5nYXAgPSBOdW1iZXIoZ2FwLnZhbHVlKTtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgnZ2FwJywgJ3NjYWxlUGVyY2VudEdhcCcpO1xuXG4gICAgY29uc3QgcmFuZ2UgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSByYW5nZV0nKTtcbiAgICB0aGlzLnJhbmdlID0gcmFuZ2UuY2hlY2tlZDtcbiAgICBpZiAodGhpcy5yYW5nZSkgdG8uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMucmFuZ2UpIHRvLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgncmFuZ2UnLCAnaXNSYW5nZScpO1xuXG4gICAgY29uc3QgbWFya3MgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSBtYXJrc10nKTtcbiAgICB0aGlzLm1hcmtzID0gbWFya3MuY2hlY2tlZDtcbiAgICBpZiAodGhpcy5tYXJrcykgZ2FwLmRpc2FibGVkID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLm1hcmtzKSBnYXAuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdtYXJrcycsICdzY2FsZU1hcmtzJyk7XG5cbiAgICBjb25zdCB0aXAgPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSB0aXBdJyk7XG4gICAgdGhpcy50aXAgPSB0aXAuY2hlY2tlZDtcbiAgICB0aGlzLm1hcEVsZW1zLnNldCgndGlwJywgJ2lzVGlwJyk7XG5cbiAgICBjb25zdCBwcm9ncmVzcyA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHByb2dyZXNzXScpO1xuICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzcy5jaGVja2VkO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCdwcm9ncmVzcycsICdpc1Byb2dyZXNzJyk7XG5cbiAgICBjb25zdCB2ZXJ0aWNhbCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHZlcnRpY2FsXScpO1xuICAgIHRoaXMudmVydGljYWwgPSB2ZXJ0aWNhbC5jaGVja2VkO1xuICAgIHRoaXMubWFwRWxlbXMuc2V0KCd2ZXJ0aWNhbCcsICdpc1ZlcnRpY2FsJyk7XG5cbiAgICBpZiAodGhpcy5jb250ZW50Py5xdWVyeVNlbGVjdG9yKCcucGx1Z2luLXNsaWRlcl9fdGh1bWInKSkge1xuICAgICAgdGhpcy50aHVtYiA9IHRoaXMuY29udGVudD8ucXVlcnlTZWxlY3RvcignLnBsdWdpbi1zbGlkZXJfX3RodW1iJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVGb3JtKCkge1xuICAgIHRoaXMubWFwRWxlbXMuZm9yRWFjaCgoa2V5OiBNb2RlbFZhbCwgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZm9ybT8ucXVlcnlTZWxlY3RvcihgLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gJHt2YWx1ZX1dYCk7XG4gICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgdHlwZW9mIHRoaXMuc2xpZGVyLmdldFZhbHVlKGtleSkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSA9IGAke3RoaXMuc2xpZGVyLmdldFZhbHVlKGAke2tleX1gKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgdHlwZW9mIHRoaXMuc2xpZGVyLmdldFZhbHVlKGtleSkgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGlmICh0aGlzLnNsaWRlci5nZXRWYWx1ZShgJHtrZXl9YCkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmluZEVsZW1zKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNsaWNrKCkge1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHRoaXMudXBkYXRlRm9ybSgpO1xuICAgIGNvbnN0IG1vdXNlVXAgPSAoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHVwZGF0ZSk7XG4gICAgICB0aGlzLmNvbnRlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb250ZW50Py5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB1cGRhdGUpO1xuICAgIHRoaXMuY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXApO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kZWxLZXkoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsga2V5IH0gPSBlO1xuICAgIGlmIChrZXkgPT09ICdBcnJvd0xlZnQnIHx8IGtleSA9PT0gJ0Fycm93VXAnIHx8IGtleSA9PT0gJ0Fycm93UmlnaHQnIHx8IGtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdG91Y2hEb3duKCkge1xuICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICB9XG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXInKS5mb3JFYWNoKChlKSA9PiBuZXcgRGVtb1NsaWRlcihlKSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NTc3OiAwLFxuXHQzMDk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gZnVuY3Rpb24oY2h1bmtJZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwOyB9O1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IGZ1bmN0aW9uKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSB7XG5cdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG5cdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cdHZhciBydW50aW1lID0gZGF0YVsyXTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKGZ1bmN0aW9uKGlkKSB7IHJldHVybiBpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwOyB9KSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttZXRhX3NsaWRlclwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttZXRhX3NsaWRlclwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzc1NSwyNzJdLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oNzc0KTsgfSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJEZW1vU2xpZGVyIiwicm9vdCIsInRoaXMiLCJpbml0IiwiZmluZEVsZW1zIiwic3RhdGVPYmplY3QiLCJtaW4iLCJtYXgiLCJ2YWx1ZUZyb20iLCJmcm9tIiwidmFsdWVUbyIsInRvIiwic3RlcCIsInNjYWxlUGVyY2VudEdhcCIsImdhcCIsInNjYWxlTWFya3MiLCJtYXJrcyIsImlzVGlwIiwidGlwIiwiaXNQcm9ncmVzcyIsInByb2dyZXNzIiwiaXNSYW5nZSIsInJhbmdlIiwiaXNWZXJ0aWNhbCIsInZlcnRpY2FsIiwiYWRkU2xpZGVyIiwidXBkYXRlRm9ybSIsImFkZExpc3RlbmVycyIsImZvcm0iLCJlbGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZSIsInB1c2giLCJhZGRFdmVudExpc3RlbmVyIiwidXBkYXRlU3RhdGUiLCJiaW5kIiwiY29udGVudCIsIl9hIiwiaGFuZGxlQ2xpY2siLCJfYiIsInRodW1iIiwiX2MiLCJoYW5kZWxLZXkiLCJfZCIsInRvdWNoRG93biIsInBhc3NpdmUiLCJ0YXJnZXQiLCJIVE1MSW5wdXRFbGVtZW50Iiwicm9sZSIsImRhdGFzZXQiLCJwYXJhbSIsIm1hcEVsZW1zIiwiZ2V0IiwidW5kZWZpbmVkIiwidmFsdWVGb3JtIiwidmFsdWVQYXJhbSIsInNsaWRlciIsImdldFZhbHVlIiwiY2hlY2tlZCIsIk51bWJlciIsInZhbHVlIiwic2V0VmFsdWUiLCJpbm5lckhUTUwiLCJnZXRTdGF0ZSIsIm9wdGlvbnMiLCIkIiwic2xpZGVyUGx1Z2luIiwiTWFwIiwicXVlcnlTZWxlY3RvciIsInNldCIsImRpc2FibGVkIiwia2V5IiwiZWxlbWVudCIsInVwZGF0ZSIsIm1vdXNlVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZG9jdW1lbnQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiTyIsInJlc3VsdCIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImxlbmd0aCIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJzcGxpY2UiLCJyIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImlkIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9