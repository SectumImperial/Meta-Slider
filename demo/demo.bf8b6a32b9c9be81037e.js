!function(){"use strict";var e,t={868:function(e,t,s){var i=s(755),r=s.n(i);s(390);class n{constructor(e){this.root=e,this.init()}init(){this.findElements(),this.stateObject={min:this.min,max:this.max,valueFrom:this.from||0,valueTo:this.to||0,step:this.step||1,scalePercentGap:this.gap||1,scaleMarks:this.marks,isTip:this.tip,isProgress:this.progress,isRange:this.range,isVertical:this.vertical},this.addSlider(this.stateObject),this.updateForm(),this.addListeners()}addListeners(){var e,t,s,i;if(this.form){const e=[];this.form.querySelectorAll(".slider__input").forEach((t=>{t&&e.push(t)})),e.forEach((e=>e.addEventListener("change",this.handleItemChange.bind(this))))}null===(e=this.content)||void 0===e||e.addEventListener("mousedown",this.handleContentClick.bind(this)),null===(t=this.content)||void 0===t||t.addEventListener("click",this.handleContentClick.bind(this)),this.thumb&&(null===(s=this.thumb)||void 0===s||s.addEventListener("keydown",this.handleThumbKeyPress.bind(this)),null===(i=this.thumb)||void 0===i||i.addEventListener("touchmove",this.handleThumbTouchMove.bind(this),{passive:!0}))}handleItemChange(e){const{target:t}=e;if(t instanceof HTMLInputElement){const{role:e}=t.dataset,s=this.mapElements.get("".concat(e));if(void 0===s)return;const i=this.slider.getValue(s);let r;r="boolean"==typeof i?t.checked:"number"==typeof i?Number(t.value):void 0,void 0!==r&&(this.slider.setValue("".concat(s),r),"valueFrom"!==s&&"valueTo"!==s&&(this.content&&(this.content.innerHTML=""),this.addSlider(this.slider.getState())),this.updateForm())}}addSlider(e){this.content&&(this.slider=r()(this.content).sliderPlugin(e))}findElements(){var e,t;if(this.mapElements=new Map,this.content=this.root.querySelector(".slider__content"),this.form=this.root.querySelector(".slider__form"),!this.form)return;const s=this.form.querySelector(".slider__input[data-role = min]");this.min=Number(s.value),this.mapElements.set("min","min");const i=this.form.querySelector(".slider__input[data-role = max]");this.max=Number(i.value),this.mapElements.set("max","max");const r=this.form.querySelector(".slider__input[data-role = step]");this.step=Number(r.value),this.mapElements.set("step","step");const n=this.form.querySelector(".slider__input[data-role = from]");this.from=Number(n.value),n.step="".concat(this.step),this.mapElements.set("from","valueFrom");const o=this.form.querySelector(".slider__input[data-role = to]");this.to=Number(o.value),o.step="".concat(this.step),this.mapElements.set("to","valueTo");const a=this.form.querySelector(".slider__input[data-role = gap]");a.value&&(this.gap=Number(a.value)),this.mapElements.set("gap","scalePercentGap");const l=this.form.querySelector(".slider__input[data-role = range]");this.range=l.checked,this.range&&(o.disabled=!1),this.range||(o.disabled=!0),this.mapElements.set("range","isRange");const h=this.form.querySelector(".slider__input[data-role = marks]");this.marks=h.checked,this.marks&&(a.disabled=!1),this.marks||(a.disabled=!0),this.mapElements.set("marks","scaleMarks");const u=this.form.querySelector(".slider__input[data-role = tip]");this.tip=u.checked,this.mapElements.set("tip","isTip");const c=this.form.querySelector(".slider__input[data-role = progress]");this.progress=c.checked,this.mapElements.set("progress","isProgress");const d=this.form.querySelector(".slider__input[data-role = vertical]");this.vertical=d.checked,this.mapElements.set("vertical","isVertical"),(null===(e=this.content)||void 0===e?void 0:e.querySelector(".plugin-slider__thumb"))&&(this.thumb=null===(t=this.content)||void 0===t?void 0:t.querySelector(".plugin-slider__thumb"))}updateForm(){this.mapElements.forEach(((e,t)=>{var s;const i=null===(s=this.form)||void 0===s?void 0:s.querySelector(".slider__input[data-role = ".concat(t,"]"));i instanceof HTMLInputElement&&(i&&"number"==typeof this.slider.getValue(e)&&(i.value="".concat(this.slider.getValue("".concat(e)))),i&&"boolean"==typeof this.slider.getValue(e)&&(this.slider.getValue("".concat(e))?i.checked=!0:i.checked=!1),this.findElements())}))}handleContentClick(){var e,t;const s=()=>this.updateForm(),i=()=>{var e,t;null===(e=this.content)||void 0===e||e.removeEventListener("mousemove",s),null===(t=this.content)||void 0===t||t.removeEventListener("mouseup",i)};null===(e=this.content)||void 0===e||e.addEventListener("mousemove",s),null===(t=this.content)||void 0===t||t.addEventListener("mouseup",i)}handleThumbKeyPress(e){const{key:t}=e;"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||this.updateForm()}handleThumbTouchMove(){this.updateForm()}}document.querySelectorAll(".slider").forEach((e=>new n(e)))}},s={};function i(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={exports:{}};return t[e].call(n.exports,n,n.exports,i),n.exports}i.m=t,e=[],i.O=function(t,s,r,n){if(!s){var o=1/0;for(u=0;u<e.length;u++){s=e[u][0],r=e[u][1],n=e[u][2];for(var a=!0,l=0;l<s.length;l++)(!1&n||o>=n)&&Object.keys(i.O).every((function(e){return i.O[e](s[l])}))?s.splice(l--,1):(a=!1,n<o&&(o=n));if(a){e.splice(u--,1);var h=r();void 0!==h&&(t=h)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,r,n]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={577:0,309:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,n,o=s[0],a=s[1],l=s[2],h=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(l)var u=l(i)}for(t&&t(s);h<o.length;h++)n=o[h],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(u)},s=self.webpackChunkmeta_slider=self.webpackChunkmeta_slider||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var r=i.O(void 0,[755,390],(function(){return i(868)}));r=i.O(r)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEhnRCxFQUFzQmhELEVBQW9CUSxFQUFFd0MsRSIsInNvdXJjZXMiOlsid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9kZW1vLXBhZ2UvZGVtby1wYWdlLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL21ldGEtc2xpZGVyL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IGZ1bmN0aW9uKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgY2h1bmtJZHMgPSBkZWZlcnJlZFtpXVswXTtcblx0XHR2YXIgZm4gPSBkZWZlcnJlZFtpXVsxXTtcblx0XHR2YXIgcHJpb3JpdHkgPSBkZWZlcnJlZFtpXVsyXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoZnVuY3Rpb24oa2V5KSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSk7IH0pKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCB7IE1vZGVsSW5wdXRTdGF0ZSwgTW9kZWxWYWwgfSBmcm9tICcuLi9zcmMvY29tcG9uZW50cy9JbnRlcmZhY2VzJztcbmltcG9ydCAnLi4vc3JjL3NsaWRlcic7XG5pbXBvcnQgJy4vc3R5bGVzLnNjc3MnO1xuXG5pbnRlcmZhY2UgRWxlbWVudExpc3RlbmVyIHtcbiAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlOiAnY2hhbmdlJywgbGlzdGVuZXI6IChldmVudDogSW5wdXRFdmVudCkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmludGVyZmFjZSBFbGVtZW50UHJlc3Mge1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGU6ICdrZXlkb3duJyB8ICd0b3VjaG1vdmUnLCBsaXN0ZW5lcjogKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkLCBvcHRpb25zPzogeyBwYXNzaXZlOiBib29sZWFuIH0pOiB2b2lkO1xufVxuXG5jbGFzcyBEZW1vU2xpZGVyIHtcbiAgcm9vdDogRWxlbWVudDtcblxuICBmb3JtITogRWxlbWVudCB8IG51bGw7XG5cbiAgbWluITogbnVtYmVyO1xuXG4gIG1heCE6IG51bWJlcjtcblxuICBzdGVwITogbnVtYmVyIHwgbnVsbDtcblxuICBmcm9tITogbnVtYmVyIHwgbnVsbDtcblxuICB0byE6IG51bWJlciB8IG51bGw7XG5cbiAgZ2FwITogbnVtYmVyIHwgbnVsbDtcblxuICByYW5nZSE6IGJvb2xlYW47XG5cbiAgbWFya3MhOiBib29sZWFuO1xuXG4gIHRpcCE6IGJvb2xlYW47XG5cbiAgcHJvZ3Jlc3MhOiBib29sZWFuO1xuXG4gIHZlcnRpY2FsITogYm9vbGVhbjtcblxuICBjb250ZW50ITogRWxlbWVudCB8IG51bGw7XG5cbiAgbWFwRWxlbWVudHMhOiBNYXA8c3RyaW5nLCBNb2RlbFZhbD47XG5cbiAgc2xpZGVyITogaW1wb3J0KCcuLi9zcmMvY29tcG9uZW50cy9QcmVzZW50ZXIvUHJlc2VudGVyJykuZGVmYXVsdDtcblxuICB0aHVtYj86IEVsZW1lbnRQcmVzcyB8IG51bGw7XG5cbiAgc3RhdGVPYmplY3QhOiB7XG4gICAgbWluOiBudW1iZXI7XG4gICAgbWF4OiBudW1iZXI7XG4gICAgdmFsdWVGcm9tOiBudW1iZXI7XG4gICAgdmFsdWVUbzogbnVtYmVyO1xuICAgIHN0ZXA6IG51bWJlcjtcbiAgICBzY2FsZVBlcmNlbnRHYXA6IG51bWJlcjtcbiAgICBzY2FsZU1hcmtzOiBib29sZWFuO1xuICAgIGlzVGlwOiBib29sZWFuO1xuICAgIGlzUHJvZ3Jlc3M6IGJvb2xlYW47XG4gICAgaXNSYW5nZTogYm9vbGVhbjtcbiAgICBpc1ZlcnRpY2FsOiBib29sZWFuO1xuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHJvb3Q6IEVsZW1lbnQpIHtcbiAgICB0aGlzLnJvb3QgPSByb290O1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0KCkge1xuICAgIHRoaXMuZmluZEVsZW1lbnRzKCk7XG4gICAgdGhpcy5zdGF0ZU9iamVjdCA9IHtcbiAgICAgIG1pbjogdGhpcy5taW4sXG4gICAgICBtYXg6IHRoaXMubWF4LFxuICAgICAgdmFsdWVGcm9tOiB0aGlzLmZyb20gfHwgMCxcbiAgICAgIHZhbHVlVG86IHRoaXMudG8gfHwgMCxcbiAgICAgIHN0ZXA6IHRoaXMuc3RlcCB8fCAxLFxuICAgICAgc2NhbGVQZXJjZW50R2FwOiB0aGlzLmdhcCB8fCAxLFxuICAgICAgc2NhbGVNYXJrczogdGhpcy5tYXJrcyxcbiAgICAgIGlzVGlwOiB0aGlzLnRpcCxcbiAgICAgIGlzUHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3MsXG4gICAgICBpc1JhbmdlOiB0aGlzLnJhbmdlLFxuICAgICAgaXNWZXJ0aWNhbDogdGhpcy52ZXJ0aWNhbCxcbiAgICB9O1xuXG4gICAgdGhpcy5hZGRTbGlkZXIodGhpcy5zdGF0ZU9iamVjdCk7XG4gICAgdGhpcy51cGRhdGVGb3JtKCk7XG5cbiAgICB0aGlzLmFkZExpc3RlbmVycygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMuZm9ybSkge1xuICAgICAgY29uc3QgRWxlbWVudHM6IEVsZW1lbnRMaXN0ZW5lcltdID0gW107XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9faW5wdXQnKS5mb3JFYWNoKChlKSA9PiB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgRWxlbWVudHMucHVzaChlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIEVsZW1lbnRzLmZvckVhY2goKGUpID0+IGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5oYW5kbGVJdGVtQ2hhbmdlLmJpbmQodGhpcykpKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRlbnQ/LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlQ29udGVudENsaWNrLmJpbmQodGhpcykpO1xuICAgIHRoaXMuY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNvbnRlbnRDbGljay5iaW5kKHRoaXMpKTtcbiAgICBpZiAodGhpcy50aHVtYikge1xuICAgICAgdGhpcy50aHVtYj8uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlVGh1bWJLZXlQcmVzcy5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMudGh1bWI/LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICd0b3VjaG1vdmUnLFxuICAgICAgICB0aGlzLmhhbmRsZVRodW1iVG91Y2hNb3ZlLmJpbmQodGhpcyksXG4gICAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUl0ZW1DaGFuZ2UoZTogSW5wdXRFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBlO1xuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICBjb25zdCB7IHJvbGUgfSA9IHRhcmdldC5kYXRhc2V0O1xuICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLm1hcEVsZW1lbnRzLmdldChgJHtyb2xlfWApO1xuICAgICAgaWYgKHBhcmFtID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IHZhbHVlUGFyYW0gPSB0aGlzLnNsaWRlci5nZXRWYWx1ZShwYXJhbSk7XG4gICAgICBsZXQgdmFsdWVGb3JtOiBudW1iZXIgfCBib29sZWFuIHwgdW5kZWZpbmVkO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZVBhcmFtID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdmFsdWVGb3JtID0gdGFyZ2V0LmNoZWNrZWQ7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZVBhcmFtID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YWx1ZUZvcm0gPSBOdW1iZXIodGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlRm9ybSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZUZvcm0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnNsaWRlci5zZXRWYWx1ZShgJHtwYXJhbX1gLCB2YWx1ZUZvcm0pO1xuICAgICAgICBpZiAocGFyYW0gIT09ICd2YWx1ZUZyb20nICYmIHBhcmFtICE9PSAndmFsdWVUbycpIHtcbiAgICAgICAgICBpZiAodGhpcy5jb250ZW50KSB0aGlzLmNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgdGhpcy5hZGRTbGlkZXIodGhpcy5zbGlkZXIuZ2V0U3RhdGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVGb3JtKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRTbGlkZXIob3B0aW9uczogTW9kZWxJbnB1dFN0YXRlKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnQpIHJldHVybjtcbiAgICB0aGlzLnNsaWRlciA9ICQodGhpcy5jb250ZW50KS5zbGlkZXJQbHVnaW4ob3B0aW9ucyk7XG4gIH1cblxuICBwcml2YXRlIGZpbmRFbGVtZW50cygpIHtcbiAgICB0aGlzLm1hcEVsZW1lbnRzID0gbmV3IE1hcCgpO1xuXG4gICAgdGhpcy5jb250ZW50ID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2NvbnRlbnQnKTtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fZm9ybScpO1xuICAgIGlmICghdGhpcy5mb3JtKSByZXR1cm47XG4gICAgY29uc3QgbWluID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gbWluXScpO1xuICAgIHRoaXMubWluID0gTnVtYmVyKG1pbi52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ21pbicsICdtaW4nKTtcblxuICAgIGNvbnN0IG1heCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1heF0nKTtcbiAgICB0aGlzLm1heCA9IE51bWJlcihtYXgudmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbWVudHMuc2V0KCdtYXgnLCAnbWF4Jyk7XG5cbiAgICBjb25zdCBzdGVwID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gc3RlcF0nKTtcbiAgICB0aGlzLnN0ZXAgPSBOdW1iZXIoc3RlcC52YWx1ZSk7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ3N0ZXAnLCAnc3RlcCcpO1xuXG4gICAgY29uc3QgZnJvbSA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IGZyb21dJyk7XG4gICAgdGhpcy5mcm9tID0gTnVtYmVyKGZyb20udmFsdWUpO1xuICAgIGZyb20uc3RlcCA9IGAke3RoaXMuc3RlcH1gO1xuICAgIHRoaXMubWFwRWxlbWVudHMuc2V0KCdmcm9tJywgJ3ZhbHVlRnJvbScpO1xuXG4gICAgY29uc3QgdG8gPSA8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSB0b10nKTtcbiAgICB0aGlzLnRvID0gTnVtYmVyKHRvLnZhbHVlKTtcbiAgICB0by5zdGVwID0gYCR7dGhpcy5zdGVwfWA7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ3RvJywgJ3ZhbHVlVG8nKTtcblxuICAgIGNvbnN0IGdhcCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IGdhcF0nKTtcbiAgICBpZiAoZ2FwLnZhbHVlKSB0aGlzLmdhcCA9IE51bWJlcihnYXAudmFsdWUpO1xuICAgIHRoaXMubWFwRWxlbWVudHMuc2V0KCdnYXAnLCAnc2NhbGVQZXJjZW50R2FwJyk7XG5cbiAgICBjb25zdCByYW5nZSA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHJhbmdlXScpO1xuICAgIHRoaXMucmFuZ2UgPSByYW5nZS5jaGVja2VkO1xuICAgIGlmICh0aGlzLnJhbmdlKSB0by5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5yYW5nZSkgdG8uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMubWFwRWxlbWVudHMuc2V0KCdyYW5nZScsICdpc1JhbmdlJyk7XG5cbiAgICBjb25zdCBtYXJrcyA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IG1hcmtzXScpO1xuICAgIHRoaXMubWFya3MgPSBtYXJrcy5jaGVja2VkO1xuICAgIGlmICh0aGlzLm1hcmtzKSBnYXAuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMubWFya3MpIGdhcC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ21hcmtzJywgJ3NjYWxlTWFya3MnKTtcblxuICAgIGNvbnN0IHRpcCA9IDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2lucHV0W2RhdGEtcm9sZSA9IHRpcF0nKTtcbiAgICB0aGlzLnRpcCA9IHRpcC5jaGVja2VkO1xuICAgIHRoaXMubWFwRWxlbWVudHMuc2V0KCd0aXAnLCAnaXNUaXAnKTtcblxuICAgIGNvbnN0IHByb2dyZXNzID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gcHJvZ3Jlc3NdJyk7XG4gICAgdGhpcy5wcm9ncmVzcyA9IHByb2dyZXNzLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ3Byb2dyZXNzJywgJ2lzUHJvZ3Jlc3MnKTtcblxuICAgIGNvbnN0IHZlcnRpY2FsID0gPEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faW5wdXRbZGF0YS1yb2xlID0gdmVydGljYWxdJyk7XG4gICAgdGhpcy52ZXJ0aWNhbCA9IHZlcnRpY2FsLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5zZXQoJ3ZlcnRpY2FsJywgJ2lzVmVydGljYWwnKTtcblxuICAgIGlmICh0aGlzLmNvbnRlbnQ/LnF1ZXJ5U2VsZWN0b3IoJy5wbHVnaW4tc2xpZGVyX190aHVtYicpKSB7XG4gICAgICB0aGlzLnRodW1iID0gdGhpcy5jb250ZW50Py5xdWVyeVNlbGVjdG9yKCcucGx1Z2luLXNsaWRlcl9fdGh1bWInKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUZvcm0oKSB7XG4gICAgdGhpcy5tYXBFbGVtZW50cy5mb3JFYWNoKChrZXk6IE1vZGVsVmFsLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5mb3JtPy5xdWVyeVNlbGVjdG9yKGAuc2xpZGVyX19pbnB1dFtkYXRhLXJvbGUgPSAke3ZhbHVlfV1gKTtcbiAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudCAmJiB0eXBlb2YgdGhpcy5zbGlkZXIuZ2V0VmFsdWUoa2V5KSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBlbGVtZW50LnZhbHVlID0gYCR7dGhpcy5zbGlkZXIuZ2V0VmFsdWUoYCR7a2V5fWApfWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWxlbWVudCAmJiB0eXBlb2YgdGhpcy5zbGlkZXIuZ2V0VmFsdWUoa2V5KSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc2xpZGVyLmdldFZhbHVlKGAke2tleX1gKSkge1xuICAgICAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5maW5kRWxlbWVudHMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ29udGVudENsaWNrKCkge1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHRoaXMudXBkYXRlRm9ybSgpO1xuICAgIGNvbnN0IG1vdXNlVXAgPSAoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHVwZGF0ZSk7XG4gICAgICB0aGlzLmNvbnRlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb250ZW50Py5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB1cGRhdGUpO1xuICAgIHRoaXMuY29udGVudD8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXApO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVUaHVtYktleVByZXNzKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IGtleSB9ID0gZTtcbiAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0JyB8fCBrZXkgPT09ICdBcnJvd1VwJyB8fCBrZXkgPT09ICdBcnJvd1JpZ2h0JyB8fCBrZXkgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICB0aGlzLnVwZGF0ZUZvcm0oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRodW1iVG91Y2hNb3ZlKCkge1xuICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICB9XG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXInKS5mb3JFYWNoKChlKSA9PiBuZXcgRGVtb1NsaWRlcihlKSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NTc3OiAwLFxuXHQzMDk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gZnVuY3Rpb24oY2h1bmtJZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwOyB9O1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IGZ1bmN0aW9uKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSB7XG5cdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG5cdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cdHZhciBydW50aW1lID0gZGF0YVsyXTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKGZ1bmN0aW9uKGlkKSB7IHJldHVybiBpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwOyB9KSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttZXRhX3NsaWRlclwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttZXRhX3NsaWRlclwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzc1NSwzOTBdLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oODY4KTsgfSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJEZW1vU2xpZGVyIiwiY29uc3RydWN0b3IiLCJyb290IiwidGhpcyIsImluaXQiLCJmaW5kRWxlbWVudHMiLCJzdGF0ZU9iamVjdCIsIm1pbiIsIm1heCIsInZhbHVlRnJvbSIsImZyb20iLCJ2YWx1ZVRvIiwidG8iLCJzdGVwIiwic2NhbGVQZXJjZW50R2FwIiwiZ2FwIiwic2NhbGVNYXJrcyIsIm1hcmtzIiwiaXNUaXAiLCJ0aXAiLCJpc1Byb2dyZXNzIiwicHJvZ3Jlc3MiLCJpc1JhbmdlIiwicmFuZ2UiLCJpc1ZlcnRpY2FsIiwidmVydGljYWwiLCJhZGRTbGlkZXIiLCJ1cGRhdGVGb3JtIiwiYWRkTGlzdGVuZXJzIiwiZm9ybSIsIkVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlIiwicHVzaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVJdGVtQ2hhbmdlIiwiYmluZCIsImNvbnRlbnQiLCJfYSIsImhhbmRsZUNvbnRlbnRDbGljayIsIl9iIiwidGh1bWIiLCJfYyIsImhhbmRsZVRodW1iS2V5UHJlc3MiLCJfZCIsImhhbmRsZVRodW1iVG91Y2hNb3ZlIiwicGFzc2l2ZSIsInRhcmdldCIsIkhUTUxJbnB1dEVsZW1lbnQiLCJyb2xlIiwiZGF0YXNldCIsInBhcmFtIiwibWFwRWxlbWVudHMiLCJnZXQiLCJ1bmRlZmluZWQiLCJ2YWx1ZVBhcmFtIiwic2xpZGVyIiwiZ2V0VmFsdWUiLCJ2YWx1ZUZvcm0iLCJjaGVja2VkIiwiTnVtYmVyIiwidmFsdWUiLCJzZXRWYWx1ZSIsImlubmVySFRNTCIsImdldFN0YXRlIiwib3B0aW9ucyIsIiQiLCJzbGlkZXJQbHVnaW4iLCJNYXAiLCJxdWVyeVNlbGVjdG9yIiwic2V0IiwiZGlzYWJsZWQiLCJrZXkiLCJlbGVtZW50IiwidXBkYXRlIiwibW91c2VVcCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwibGVuZ3RoIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsInNwbGljZSIsInIiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=