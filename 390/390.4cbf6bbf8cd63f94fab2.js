"use strict";(self.webpackChunkmeta_slider=self.webpackChunkmeta_slider||[]).push([[390],{390:function(e,t,s){var i=s(755),a=s.n(i);const r="VALUE_CHANGED",o="VALUE_START_CHANGE",n="DATA_COLLECTED",h="VALUE_CHANGED",l=" SCALE_CLICKED",m="KEY_DOWN",c="MARK_CLICKED";var u=class{constructor(){this.observers={}}addSubscriber(e,t){if(this.observers[e]){const s=this.observers[e];this.observers[e]=[...s,t]}else this.observers[e]=[t]}removeSubscriber(e,t){this.observers[e].filter((e=>e!==t))}emit(e,t){(this.observers[e]||[]).forEach((s=>{s.update(t,e)}))}};var b=class extends u{constructor(e,t){super(),this.isVertical=t,this.direction=this.isVertical?"clientY":"clientX",this.startPoint=this.isVertical?"top":"left",this.size=this.isVertical?"height":"width",this.mod=this.isVertical?"vertical":"horizontal",this.root=e}static createElement(e){const t=document.createElement("div");return t.className=e,t}performPointerMove(e,t){const s=s=>{s.preventDefault();const i=this.root.getBoundingClientRect()[this.startPoint],a=s[this.direction]-e-i;this.emit(o,{coordsMove:a,thumbId:t})},i=()=>{document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",i)};document.addEventListener("pointermove",s),document.addEventListener("pointerup",i)}performTouchMove(e,t){const s=s=>{s.stopImmediatePropagation();const i=this.root.getBoundingClientRect()[this.startPoint],a=s.touches[0][this.direction]-e-i;this.emit(o,{coordsMove:a,thumbId:t})},i=()=>{document.removeEventListener("touchmove",s),document.removeEventListener("touchend",i)};document.addEventListener("touchmove",s),document.addEventListener("touchend",i)}performKeyDown(e,t){this.emit(m,{keyEvent:e,thumbId:t})}performClickMark(e,t){this.emit(c,{percent:e,value:t})}};var d=class extends b{constructor(e){const{root:t,positionStart:s,positionEnd:i,isVertical:a}=e;super(t,a),this.positionStart=s,this.positionEnd=i,this.progress=b.createElement("plugin-slider__progress js-plugin-slider__progress"),this.setProgress()}setProgress(){this.progress.style[this.startPoint]="".concat(this.positionStart,"%"),this.progress.style[this.size]="".concat(this.positionEnd,"%"),this.root.append(this.progress)}setProgressPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;this.progress.style[this.startPoint]="".concat(e,"%"),this.progress.style[this.size]="".concat(t,"%")}};var v=class extends b{constructor(e,t){super(e,t),this.scale=b.createElement("plugin-slider__scale js-plugin-slider__scale"),this.handleScalePointerDown=this.handleScalePointerDown.bind(this),this.init()}getScale(){return this.scale||(this.scale=b.createElement("plugin-slider__scale")),this.scale}init(){this.isVertical&&this.scale.classList.add("plugin-slider__scale_vertical"),this.isVertical||this.scale.classList.add("plugin-slider__scale_horizontal"),this.addScale(),this.addListeners()}addScale(){this.root.append(this.scale)}addListeners(){this.scale.addEventListener("pointerdown",this.handleScalePointerDown)}handleScalePointerDown(e){const{target:t}=e;if(!t.closest(".plugin-slider__scale"))return;if(t.classList.contains("plugin-slider__mark-value"))return;const s=this.scale.getBoundingClientRect()[this.size],i=this.scale.getBoundingClientRect()[this.startPoint],a=e[this.direction]-i;a>s||a<0||this.emitData(a,s)}emitData(e,t){const s={coordsMove:e,scaleSize:t};this.emit(l,s)}};var p=class extends b{constructor(e,t,s){super(e,s),this.marks=t,this.handleRootClick=this.handleRootClick.bind(this),this.init()}init(){this.createMarks(),this.addListeners()}addListeners(){this.root.addEventListener("click",this.handleRootClick)}handleRootClick(e){const t=e.target;if(null===t)return;const{value:s,percent:i}=t.dataset;t.classList.contains("plugin-slider__mark-value")&&void 0!==i&&this.performClickMark(Number(i),Number(s))}createMarks(){this.marks.forEach(((e,t)=>this.createMark(e,t)))}createMark(e,t){const s=b.createElement("plugin-slider__mark js-plugin-slider__mark");s.classList.add("plugin-slider__mark_".concat(this.mod)),s.style[this.startPoint]="".concat(e,"%");const i=document.createElement("span");i.className="plugin-slider__mark-value",i.classList.add("plugin-slider__mark-value_".concat(this.mod)),i.dataset.value="".concat(t),i.dataset.percent="".concat(e),i.innerText="".concat(t),s.append(i),this.root.append(s)}};var P=class extends b{constructor(e){const{root:t,thumbPercent:s=0,id:i="valueFrom",isVertical:a}=e;super(t,a),this.thumbPercent=s,this.thumbId=i,this.handleThumbPointerDown=this.handleThumbPointerDown.bind(this),this.handleThumbKeyDown=this.handleThumbKeyDown.bind(this),this.handleThumbTouch=this.handleThumbTouch.bind(this),this.init()}init(){this.thumbElement=b.createElement("plugin-slider__thumb js-plugin-slider__thumb"),this.thumbElement.id=this.thumbId,this.thumbElement.tabIndex=1,this.root.append(this.thumbElement),this.setPosition(this.thumbPercent),this.addListeners()}setPosition(e){this.thumbPercent=e,this.checkZInd(),void 0!==this.thumbElement&&(this.thumbElement.style[this.startPoint]="".concat(this.thumbPercent,"%"))}getThumb(){return this.thumbElement}getThumbId(){return this.thumbId}checkZInd(){void 0!==this.thumbElement&&("valueFrom"===this.thumbId&&100===this.thumbPercent&&(this.thumbElement.style.zIndex="10"),"valueFrom"===this.thumbId&&this.thumbPercent<100&&(this.thumbElement.style.zIndex="5"),"valueTo"===this.thumbId&&0===this.thumbPercent&&(this.thumbElement.style.zIndex="10"),"valueTo"===this.thumbId&&this.thumbPercent>0&&(this.thumbElement.style.zIndex="5"))}addListeners(){void 0!==this.thumbElement&&(this.thumbElement.addEventListener("pointerdown",this.handleThumbPointerDown),this.thumbElement.addEventListener("keydown",this.handleThumbKeyDown),this.thumbElement.addEventListener("touchstart",this.handleThumbTouch))}handleThumbTouch(e){if(e.preventDefault(),void 0===this.thumbElement)return;const t=this.thumbElement.getBoundingClientRect()[this.startPoint];this.moved=e.touches[0][this.direction]-(t+this.thumbElement.getBoundingClientRect()[this.size]/2),super.performTouchMove(this.moved,this.thumbId)}handleThumbPointerDown(e){e.preventDefault(),void 0!==this.thumbElement&&(this.moved=e[this.direction]-(this.thumbElement.getBoundingClientRect()[this.startPoint]+this.thumbElement.getBoundingClientRect()[this.size]/2),this.checkZInd(),super.performPointerMove(this.moved,this.thumbId))}handleThumbKeyDown(e){e.preventDefault();const{key:t}=e;"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||e.preventDefault(),("ArrowLeft"===t&&!this.isVertical||"ArrowUp"===t&&this.isVertical)&&super.performKeyDown("decrement",this.thumbId),("ArrowRight"===t&&!this.isVertical||"ArrowDown"===t&&this.isVertical)&&super.performKeyDown("increment",this.thumbId)}};var V=class extends b{constructor(e){const{root:t,percentPosition:s,valueTip:i,isVertical:a}=e;super(t,a),this.percentPosition=s,this.valueTip=i,this.tip=this.createTip(),this.addTip()}setValueTip(e){this.tip.innerText="".concat(e)}hideTip(){this.tip.style.display="none"}showTip(){this.tip.style.display=""}setPosition(e,t){this.tip.style[this.startPoint]="".concat(e,"%"),this.tip.innerText="".concat(t)}createTip(){const e=b.createElement("plugin-slider__tip js-plugin-slider__tip");return e.classList.add("plugin-slider__tip_".concat(this.mod)),e.innerText="".concat(this.valueTip),e.style[super.startPoint]="".concat(this.percentPosition,"%"),e}addTip(){this.root.append(this.tip)}};class g extends u{constructor(e,t){super(),this.state=t,this.dom={slider:void 0,scaleElement:void 0,root:e},this.numberVariables={tipValueFrom:void 0,thumbPercentFrom:void 0,thumbPercentTo:void 0,tipValueTo:void 0},this.booleanVariables={isProgress:!1,isRange:!1,isVertical:!1,isTip:!1,isScaleMarks:!1},this.classElements={thumbFrom:void 0,thumbTo:void 0,scale:void 0,scaleMarks:void 0,tipFrom:void 0,tipTo:void 0,progress:void 0,sliderComponents:void 0},this.createVariables(e,t),this.init(),this.setState(t)}static createSlider(){const e=document.createElement("div");return e.className="plugin-slider js-plugin-slider",e}update(e,t){if(void 0===this.dom)return;if(void 0===this.classElements.sliderComponents||void 0===this.dom.scaleElement)return;const{size:s}=this.classElements.sliderComponents,i=this.dom.scaleElement.getBoundingClientRect()[s];if(t===o){const t=Object.assign(Object.assign({},e),{scaleSize:i});this.emit(n,t)}else this.emit(n,e)}setState(e){const{thumbPercentFrom:t,valueFrom:s,isRange:i,thumbPercentTo:a,valueTo:r}=e;this.setThumbs(t,a,i),this.setTips(s,r,i),this.setProgress(t,a,i)}setThumbs(e,t,s){if(void 0!==this.classElements.thumbFrom&&void 0!==this.numberVariables&&void 0!==this.dom){if(this.numberVariables.thumbPercentFrom=e,this.classElements.thumbFrom.setPosition(this.numberVariables.thumbPercentFrom),s&&void 0!==this.dom.slider){null===this.dom.slider.querySelector("#valueTo")&&void 0!==t&&this.setThumb("valueTo",t)}s&&void 0!==t&&this.classElements.thumbTo&&(this.numberVariables.thumbPercentTo=t,this.classElements.thumbTo.setPosition(this.numberVariables.thumbPercentTo))}}setThumb(e,t){const s="valueTo"===e?"thumbTo":"thumbFrom";void 0!==this.dom&&void 0!==this.booleanVariables&&void 0!==this.dom.scaleElement&&void 0!==this.booleanVariables.isVertical&&(this.classElements[s]=new P({root:this.dom.scaleElement,thumbPercent:t,id:e,isVertical:this.booleanVariables.isVertical}))}setTips(e,t,s){var i,a,r;if(void 0===this.booleanVariables)return;if(void 0===this.numberVariables)return;const{isTip:o}=this.booleanVariables;if(o&&this.classElements.tipFrom){if(this.numberVariables.tipValueFrom=e,void 0===this.numberVariables.thumbPercentFrom)return;this.classElements.tipFrom.setPosition(this.numberVariables.thumbPercentFrom,this.numberVariables.tipValueFrom)}this.isNeedDoubleTip()?(null===(i=this.classElements.tipFrom)||void 0===i||i.setValueTip("".concat(e," - ").concat(t)),null===(a=this.classElements.tipTo)||void 0===a||a.hideTip()):null===(r=this.classElements.tipTo)||void 0===r||r.showTip(),s&&this.classElements.tipTo&&void 0!==t&&this.numberVariables.thumbPercentTo&&(this.numberVariables.tipValueTo=t,this.classElements.tipTo.setPosition(this.numberVariables.thumbPercentTo,this.numberVariables.tipValueTo))}setTip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"valueFrom";const t="valueFrom"===e?"tipValueFrom":"tipValueTo",s="valueFrom"===e?"tipFrom":"tipTo",i="valueFrom"===e?"thumbPercentFrom":"thumbPercentTo";void 0!==this.numberVariables&&void 0!==this.dom&&void 0!==this.booleanVariables&&("valueTo"===e&&void 0===this.numberVariables[i]||void 0!==this.dom.scaleElement&&void 0!==this.booleanVariables.isVertical&&(this.classElements[s]=new V({root:this.dom.scaleElement,percentPosition:this.numberVariables[i],valueTip:t,isVertical:this.booleanVariables.isVertical})))}setProgress(e,t,s){var i,a,r;if(void 0===this.dom)return;if(void 0===this.booleanVariables)return;if(void 0===this.numberVariables)return;if(void 0===this.dom.slider)return;if(null===this.dom.slider.querySelector(".js-plugin-slider__progress")){const e="number"==typeof t?t:0;if(void 0===this.dom.scaleElement||void 0===this.booleanVariables.isVertical||void 0===this.numberVariables.thumbPercentFrom)return;this.classElements.progress=new d({root:this.dom.scaleElement,positionStart:this.numberVariables.thumbPercentFrom,positionEnd:e,isVertical:this.booleanVariables.isVertical})}this.booleanVariables.isProgress&&s&&t&&(null===(i=this.classElements.progress)||void 0===i||i.setProgressPosition(this.numberVariables.thumbPercentFrom,t-e)),this.booleanVariables.isProgress&&t===e&&(null===(a=this.classElements.progress)||void 0===a||a.setProgressPosition(0,0)),this.booleanVariables.isProgress&&!s&&(null===(r=this.classElements.progress)||void 0===r||r.setProgressPosition(0,this.numberVariables.thumbPercentFrom))}init(){void 0!==this.dom&&(this.dom.slider=g.createSlider(),this.createElements(),this.addSlider())}createVariables(e,t){const{isTip:s,valueFrom:i,valueTo:a,thumbPercentFrom:r,thumbPercentTo:o,isProgress:n,isRange:h,scaleMap:l,isVertical:m,scaleMarks:c}=t;void 0!==this.numberVariables&&(this.numberVariables.thumbPercentFrom=r,o&&(this.numberVariables.thumbPercentTo=o),void 0!==this.booleanVariables&&(this.booleanVariables.isTip=s||!1,this.numberVariables.tipValueFrom=i||0,this.numberVariables.tipValueTo=a||0,this.booleanVariables.isProgress=n||!1,this.booleanVariables.isRange=h||!1,this.booleanVariables.isVertical=m||!1,this.scaleMap=l,this.booleanVariables.isScaleMarks=c,void 0!==this.dom&&(this.dom.root=e)))}createElements(){void 0!==this.dom&&void 0!==this.booleanVariables&&void 0!==this.numberVariables&&void 0!==this.dom.slider&&void 0!==this.booleanVariables.isVertical&&void 0!==this.numberVariables.thumbPercentFrom&&(this.classElements.sliderComponents=new b(this.dom.slider,this.booleanVariables.isVertical),this.classElements.scale=new v(this.dom.slider,this.booleanVariables.isVertical),this.dom.scaleElement=this.classElements.scale.getScale(),this.setThumb("valueFrom",this.numberVariables.thumbPercentFrom),this.booleanVariables.isRange&&void 0!==this.numberVariables.thumbPercentTo&&this.setThumb("valueTo",this.numberVariables.thumbPercentTo),this.booleanVariables.isTip&&this.setTip("valueFrom"),this.booleanVariables.isTip&&this.numberVariables.thumbPercentTo&&this.booleanVariables.isRange&&void 0!==this.numberVariables.tipValueTo&&this.setTip("valueTo"),void 0!==this.booleanVariables.isRange&&this.setProgress(this.numberVariables.thumbPercentFrom,0,this.booleanVariables.isRange),this.scaleMap&&this.booleanVariables.isScaleMarks&&(this.classElements.scaleMarks=new p(this.dom.scaleElement,this.scaleMap,this.booleanVariables.isVertical)))}addSlider(){void 0!==this.dom&&void 0!==this.dom.root&&void 0!==this.dom.slider&&this.dom.root.append(this.dom.slider)}isNeedDoubleTip(){return void 0!==this.booleanVariables&&void 0!==this.numberVariables&&(void 0!==this.numberVariables.thumbPercentTo&&void 0!==this.booleanVariables.isRange&&void 0!==this.numberVariables.thumbPercentFrom&&void 0!==this.booleanVariables.isTip&&(this.numberVariables.thumbPercentTo-this.numberVariables.thumbPercentFrom<=2||0===this.numberVariables.thumbPercentTo&&0===this.numberVariables.thumbPercentFrom))}}var T=g;var E=class extends u{constructor(e,t){super(),this.state=t,this.init(e,t)}updateSlider(e){void 0!==this.slider&&this.slider.setState(e)}update(e,t){t===n&&this.emit(h,e),t===h&&this.updateSlider(e)}getRoot(){return this.root}setRoot(e){this.root=e}getSlider(){return this.slider}setSlider(e){this.slider=e}init(e,t){const{isRange:s}=t;this.root=e,this.isRange=s,this.slider=new T(e,t),this.addSubscribeSlider()}addSubscribeSlider(){void 0!==this.slider&&(void 0!==this.slider.classElements.thumbFrom&&(this.slider.classElements.thumbFrom.addSubscriber(o,this.slider),this.slider.classElements.thumbFrom.addSubscriber(m,this.slider)),this.isRange&&this.slider.classElements.thumbTo&&(this.slider.classElements.thumbTo.addSubscriber(o,this.slider),this.slider.classElements.thumbTo.addSubscriber(m,this.slider)),void 0!==this.slider.classElements.scale&&(this.slider.classElements.scale.addSubscriber(l,this.slider),this.slider.booleanVariables.isScaleMarks&&void 0!==this.slider.classElements.scaleMarks&&this.slider.classElements.scaleMarks.addSubscriber(c,this.slider)),this.slider.addSubscriber(l,this),this.slider.addSubscriber(n,this))}};const F={valueFrom:"thumbPercentFrom",valueTo:"thumbPercentTo"};var f=class{constructor(e){this.state=e,this.init()}setState(e){const t=this.state;this.state=Object.assign(Object.assign({},t),e)}getState(){return this.state}updateStateMove(e,t){const s=this.findSuitablePercent(e,t);this.handleMove(s)}getValue(e){return this.state["".concat(e)]}getPercentVal(){const{valueFrom:e,min:t,max:s}=this.state;return Number((e/(s-t)*100).toFixed(3))}init(){this.stepPercent=Number(this.state.step/this.findValPercent())}findSuitablePercent(e,t){const{step:s,max:i,min:a}=this.state;void 0===this.stepPercent&&(this.stepPercent=1);const r=Math.floor(e/this.stepPercent),o=Math.ceil(e/this.stepPercent),n=a+s*r,h=a+s*o,l=this.stepPercent*r,m=this.stepPercent*o,c=Number((this.stepPercent/2).toFixed(3));let u,b;Number((e%this.stepPercent).toFixed(3))<c?(u=n,b=l):(u=h,b=m);const d=Math.ceil((i-a)/s),v=this.stepPercent*(d-1);return(100===e||100-(100-v)/2<e)&&(u=i,b=100),void 0===b&&(b=this.stepPercent*r),{value:u,thumb:t,percent:b}}handleMove(e){const{value:t,thumb:s,percent:i}=e;"valueFrom"===s&&this.handleMoveFrom({value:t,thumb:s,percent:i}),"valueTo"===s&&this.handleMoveTo({value:t,thumb:s,percent:i})}handleMoveFrom(e){const{value:t,thumb:s,percent:i}=e,{valueTo:a,thumbPercentTo:r}=this.state;this.isValueTheSamePos({value:t,valueAnotherThumb:a,thumbPercent:r,thumb:s,idVal:"valueFrom"})&&void 0!==a&&void 0!==r?this.updateMoved(a,r,s):void 0!==t&&this.updateMoved(t,i,s)}handleMoveTo(e){const{value:t,thumb:s,percent:i}=e,{valueFrom:a,thumbPercentFrom:r}=this.state;this.isValueTheSamePos({value:t,valueAnotherThumb:a,thumbPercent:r,thumb:s,idVal:"valueTo"})&&void 0!==a?this.updateMoved(a,r,s):void 0!==t&&this.updateMoved(t,i,s)}isValueTheSamePos(e){const{value:t,valueAnotherThumb:s,thumbPercent:i,thumb:a,idVal:r}=e,{isRange:o}=this.state;let n=!1;return void 0!==t&&void 0!==s&&(n="valueFrom"===r?t>s:t<s),o&&void 0!==i&&a===r&&n}findValPercent(){return this.findRange()/100}findRange(){return this.state.max-this.state.min}updateMoved(e,t,s){if(Number.isNaN(e)||void 0===t)throw new Error("Something wrong with setting new values");const i=F[s];this.setState({[s]:e,[i]:t})}};var S=class{constructor(e){this.data=e,this.DEFAULT_GAP=20,this.baseParams={min:0,max:100,valueFrom:0,step:1,valueTo:void 0,stepPercent:10,thumbPercentFrom:void 0,thumbPercentTo:void 0},this.booleanVariables={isTip:!1,isVertical:!1,isProgress:!1,scaleMarks:!1,isRange:!1},this.validateData(e)}validateData(e){const t=this.setBooleans(e);return this.setData(e),this.resultObject=Object.assign(Object.assign(Object.assign({},e),t),{thumbPercentFrom:0,thumbPercentTo:void 0}),this.checkRange(),this.checkStep(),this.checkValues(),this.checkPercents(),this.resultObject}performMoveToPercent(e){const{coordsMove:t,scaleSize:s,keyEvent:i,thumbId:a}=e;if(i&&void 0!==this.baseParams.stepPercent&&void 0!==this.baseParams.thumbPercentFrom){if("increment"===i&&"valueFrom"===a)return this.baseParams.thumbPercentFrom+this.baseParams.stepPercent;if("decrement"===i&&"valueFrom"===a)return this.baseParams.thumbPercentFrom-this.baseParams.stepPercent;if("increment"===i&&"valueTo"===a&&void 0!==this.baseParams.thumbPercentTo)return this.baseParams.thumbPercentTo+this.baseParams.stepPercent;if("decrement"===i&&"valueTo"===a&&void 0!==this.baseParams.thumbPercentTo)return this.baseParams.thumbPercentTo-this.baseParams.stepPercent}if(void 0===t||void 0===s)return 0;let r=Number((t/(s/100)).toFixed(2));return r<0&&(r=0),r>100&&(r=100),r}validateMarks(e){const{step:t,max:s,min:i,gap:a}=e,r=new Map,o=this.validateGap(a),n=this.findRange()/100,h=t/n,l=t*Math.ceil(o/h),m=Math.ceil(l/n);for(let e=0;e<=100;e+=m)if(e<=100-m){const s=t*Math.round(e/h),a=s/n,o=i+s;r.set(o,a)}return r.set(s,100),r}validateThumbId(e){if(void 0===this.booleanVariables)return"valueTo";if(void 0===this.baseParams.thumbPercentFrom)return"valueTo";if(!this.booleanVariables.isRange)return"valueFrom";if(e<this.baseParams.thumbPercentFrom)return"valueFrom";if(void 0!==this.baseParams.thumbPercentTo&&e>this.baseParams.thumbPercentTo)return"valueTo";if(e>this.baseParams.thumbPercentFrom&&void 0!==this.baseParams.thumbPercentTo&&e<this.baseParams.thumbPercentTo){const t=e-this.baseParams.thumbPercentFrom,s=this.baseParams.thumbPercentTo-e;if(t===s||t<s)return"valueFrom";if(t>s)return"valueTo"}return"valueTo"}validatePercent(e,t,s){const{isRange:i}=s;if(!i){const i=Object.assign(Object.assign({},s),{valueFrom:t,thumbPercentFrom:e});return this.validateData(i)}if(i&&void 0!==s.thumbPercentTo){const{thumbPercentFrom:i,thumbPercentTo:a}=s;let r="thumbPercentFrom",o="valueFrom";if(Number(e)>a&&(r="thumbPercentTo",o="valueTo"),Number(e)>i&&Number(e)<a){e-i>=(a-i)/2&&(r="thumbPercentTo",o="valueTo")}const n=Object.assign(Object.assign({},s),{[o]:t,[r]:e});return this.validateData(n)}return s}setData(e){const{min:t,max:s,valueFrom:i,step:a,scalePercentGap:r,valueTo:o}=e;this.baseParams.min=t,this.baseParams.max=s,this.baseParams.valueFrom=i,this.baseParams.step=a,this.scalePercentGap=r,void 0!==this.scalePercentGap&&"number"!=typeof this.scalePercentGap&&(this.scalePercentGap=void 0),void 0!==this.booleanVariables&&(this.booleanVariables.isRange&&void 0!==o&&(this.baseParams.valueTo=o),this.baseParams.stepPercent=this.baseParams.step/(this.findRange()/100))}setBooleans(e){const{isRange:t,isTip:s,isVertical:i,isProgress:a,scaleMarks:r}=e;return void 0===this.booleanVariables?{}:(this.booleanVariables.isRange="boolean"==typeof t&&t,this.booleanVariables.isTip="boolean"==typeof s&&s,this.booleanVariables.isVertical="boolean"==typeof i&&i,this.booleanVariables.isProgress="boolean"==typeof a&&a,this.booleanVariables.scaleMarks="boolean"==typeof r&&r,{isRange:this.booleanVariables.isRange,isTip:this.booleanVariables.isTip,isVertical:this.booleanVariables.isVertical,isProgress:this.booleanVariables.isProgress,scaleMarks:this.booleanVariables.scaleMarks})}validateGap(e){let t=e;return(t<0||t>100)&&(t=this.DEFAULT_GAP),t}checkRange(){void 0!==this.resultObject&&(Number.isNaN(this.baseParams.min)&&(this.baseParams.min=0),Number.isNaN(this.baseParams.max)&&(this.baseParams.max=10),this.baseParams.min===this.baseParams.max&&(this.baseParams.max=this.baseParams.min+this.baseParams.step),this.baseParams.min>this.baseParams.max&&([this.baseParams.min,this.baseParams.max]=[this.baseParams.max,this.baseParams.min]),this.resultObject.min=this.baseParams.min,this.resultObject.max=this.baseParams.max)}checkStep(){if(void 0===this.resultObject)return;Number.isNaN(this.baseParams.step)&&(this.baseParams.step=1);const e=this.findRange();this.baseParams.step>e&&(this.baseParams.step=e),this.baseParams.step<.001&&(this.baseParams.step=.001),this.baseParams.step||(this.baseParams.step=1),this.resultObject.step=this.baseParams.step}findRange(){return this.baseParams.max-this.baseParams.min}checkValues(){void 0!==this.booleanVariables&&(this.baseParams.valueFrom=this.checkValue(this.baseParams.valueFrom),this.booleanVariables.isRange&&void 0!==this.baseParams.valueTo&&(this.baseParams.valueTo=this.checkValue(this.baseParams.valueTo)),void 0!==this.baseParams.valueTo&&this.baseParams.valueFrom>this.baseParams.valueTo&&this.booleanVariables.isRange&&([this.baseParams.valueFrom,this.baseParams.valueTo]=[this.baseParams.valueTo,this.baseParams.valueFrom]),void 0!==this.resultObject&&(this.resultObject.valueFrom=this.baseParams.valueFrom,this.booleanVariables.isRange&&(this.resultObject.valueTo=this.baseParams.valueTo)))}checkValue(e){let t=e;if(Number.isNaN(t)&&(t=0),t===this.baseParams.max)return t=this.baseParams.max,t;if(t%this.baseParams.step!=0&&t!==this.baseParams.min){const e=Math.round((t-this.baseParams.min)/this.baseParams.step);t=this.baseParams.min+this.baseParams.step*e}return t>this.baseParams.max&&(t=this.baseParams.max),t<this.baseParams.min&&(t=this.baseParams.min),t}checkPercents(){void 0!==this.resultObject&&void 0!==this.booleanVariables&&(this.baseParams.thumbPercentFrom=this.checkPercent("valueFrom"),this.resultObject.thumbPercentFrom=this.baseParams.thumbPercentFrom,this.booleanVariables.isRange&&(this.baseParams.thumbPercentTo=this.checkPercent("valueTo"),this.resultObject.thumbPercentTo=this.baseParams.thumbPercentTo))}checkPercent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"valueFrom";const t=this.baseParams[e];if(void 0===t)return 0;const s=t-this.baseParams.min;return Number((s/(this.findRange()/100)).toFixed(3))}};var M=class extends u{constructor(e){super(),this.validator=new S(e),this.validState=this.validator.validateData(e),this.model=new f(this.validState)}setState(e){const t=this.validator.validateData(e);this.model.setState(t)}getState(){if(this.model.getState().scaleMarks){const e=this.validGapMarks();return Object.assign(Object.assign({},this.model.getState()),{scaleMap:e})}return this.model.getState()}getModel(){return this.model}getValidator(){return this.validator}getValue(e){return this.model.getState()["".concat(e)]}update(e){const t=void 0===e.percent?"scaleMove":"markMove";if("scaleMove"===t){const t=this.validator.performMoveToPercent(e);let{thumbId:s}=e;if(void 0===s&&(s=this.validator.validateThumbId(t)),t===this.prevMove)return;this.prevMove=t,this.model.updateStateMove(t,s);const i=this.model.getState(),a=this.validator.validateData(i);this.model.setState(a),i.scaleMarks?this.emit(r,Object.assign(Object.assign({},this.model.getState()),{scaleMap:this.validGapMarks()})):this.emit(r,this.model.getState())}if(void 0!==e.percent&&void 0!==e.value&&"markMove"===t){const{percent:t,value:s}=e,i=this.model.getState(),a=this.validator.validatePercent(t,s,i);this.model.setState(a),this.emit(r,this.model.getState())}}setValue(e,t){const s=this.model.getState(),i=Object.assign(Object.assign({},s),{[e]:t}),a=this.validator.validateData(i);this.model.setState(a),this.emit(r,this.model.getState())}validGapMarks(){const e=this.model.getState().scalePercentGap||20,{min:t,max:s,step:i}=this.model.getState();return this.validator.validateMarks({min:t,max:s,step:i,gap:e})}};var k=class extends u{constructor(e,t){super(),this.modelFacade=new M(t),this.view=new E(e,this.modelFacade.getState()),this.subscribeModel(),this.subscribeSlider()}getState(){return this.modelFacade.getState()}setState(e){this.modelFacade.setState(e)}setValue(e,t){this.modelFacade.setValue(e,t)}getValue(e){return this.modelFacade.getValue(e)}subscribeSlider(){this.view.addSubscriber(h,this.modelFacade)}subscribeModel(){this.modelFacade.addSubscriber(r,this.view)}};var _={min:0,max:100,valueFrom:0,valueTo:0,step:1,scalePercentGap:10,scaleMarks:!1,isTip:!1,isProgress:!1,isRange:!1,isVertical:!1};a().fn.sliderPlugin=function(e){const t=Object.assign(Object.assign({},_),e);return new k(this[0],t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFZeEosR0FDbkN2RyxLQUFLZ1EsS0FBTyxJQUFJQyxFQUFLdlAsRUFBTVYsS0FBSzhQLFlBQVk5RixZQUM1Q2hLLEtBQUtrUSxpQkFDTGxRLEtBQUttUSxpQkFDTixDQUVNbkcsV0FDTCxPQUFPaEssS0FBSzhQLFlBQVk5RixVQUN6QixDQUVNbkMsU0FBU3RCLEdBQ2R2RyxLQUFLOFAsWUFBWWpJLFNBQVN0QixFQUMzQixDQUVNcUosU0FBU0MsRUFBbUJqTixHQUNqQzVDLEtBQUs4UCxZQUFZRixTQUFTQyxFQUFPak4sRUFDbEMsQ0FFTTBILFNBQVN1RixHQUNkLE9BQU83UCxLQUFLOFAsWUFBWXhGLFNBQVN1RixFQUNsQyxDQUVPTSxrQkFDTm5RLEtBQUtnUSxLQUFLblEsY0FBY0gsRUFBNkJNLEtBQUs4UCxZQUMzRCxDQUVPSSxpQkFDTmxRLEtBQUs4UCxZQUFZalEsY0FBY0osRUFBNEJPLEtBQUtnUSxLQUNqRSxHQzNCSCxNQWRxQixDQUNuQnZGLElBQUssRUFDTEMsSUFBSyxJQUNMMUMsVUFBVyxFQUNYQyxRQUFTLEVBQ1Q0QyxLQUFNLEVBQ055RCxnQkFBaUIsR0FDakI5RyxZQUFZLEVBQ1pMLE9BQU8sRUFDUEYsWUFBWSxFQUNaQyxTQUFTLEVBQ1R2RyxZQUFZLEdDRGR5UCxJQUFBQSxHQUFBQSxhQUFvQixTQUFzQmpELEdBQ3hDLE1BQU01RyxFQUFRLE9BQUgsd0JBQVE4SixHQUFpQmxELEdBRXBDLE9BRGUsSUFBSW1ELEVBQVV0USxLQUFLLEdBQUl1RyxFQUV2QyxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvT2JzZXJ2ZXIvZXZlbnRzLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL09ic2VydmVyL09ic2VydmVyLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvVmlldy9zdWJWaWV3cy9TbGlkZXJDb21wb25lbnRzL1NsaWRlckNvbXBvbmVudHMudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvY29tcG9uZW50cy9WaWV3L3N1YlZpZXdzL1Byb2dyZXNzL1Byb2dyZXNzLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvVmlldy9zdWJWaWV3cy9TY2FsZS9TY2FsZS50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL1ZpZXcvc3ViVmlld3MvU2NhbGVNYXJrcy9TY2FsZU1hcmtzLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvVmlldy9zdWJWaWV3cy9UaHVtYi9UaHVtYi50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL1ZpZXcvc3ViVmlld3MvVGlwL1RpcC50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL1ZpZXcvc3ViVmlld3MvU2xpZGVyL1NsaWRlci50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL1ZpZXcvVmlldy50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL0ludGVyZmFjZXMudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvY29tcG9uZW50cy9Nb2RlbC9Nb2RlbC50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL01vZGVsL1ZhbGlkYXRvci50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL01vZGVsL01vZGVsRmFjYWRlLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvUHJlc2VudGVyL1ByZXNlbnRlci50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9zdGF0ZS50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9zbGlkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTU9ERUxfRVZFTlRTID0ge1xuICBWQUxVRV9DSEFOR0VEOiAnVkFMVUVfQ0hBTkdFRCcsXG59O1xuXG5jb25zdCBTTElERVJfRVZFTlRTID0ge1xuICBWQUxVRV9TVEFSVF9DSEFOR0U6ICdWQUxVRV9TVEFSVF9DSEFOR0UnLFxuICBEQVRBX0NPTExFQ1RFRDogJ0RBVEFfQ09MTEVDVEVEJyxcbiAgVkFMVUVfQ0hBTkdFRDogJ1ZBTFVFX0NIQU5HRUQnLFxuICBTQ0FMRV9DTElDS0VEOiAnIFNDQUxFX0NMSUNLRUQnLFxuICBLRVlfRE9XTjogJ0tFWV9ET1dOJyxcbiAgTUFSS19DTElDS0VEOiAnTUFSS19DTElDS0VEJyxcbn07XG5cbmV4cG9ydCB7IE1PREVMX0VWRU5UUywgU0xJREVSX0VWRU5UUyB9O1xuIiwiaW50ZXJmYWNlIFZhbHVlT2JzZXJ2ZXJFbnRyeSB7XG4gIHVwZGF0ZShkYXRhOiBvYmplY3QsIGV2ZW50OiBzdHJpbmcpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgT2JzZXJ2ZXJzIHtcbiAgW2luZGV4OiBzdHJpbmddOiBWYWx1ZU9ic2VydmVyRW50cnlbXVxufVxuXG5hYnN0cmFjdCBjbGFzcyBPYnNlcnZlciB7XG4gIHB1YmxpYyBvYnNlcnZlcnM6IE9ic2VydmVycyA9IHt9O1xuXG4gIHB1YmxpYyBhZGRTdWJzY3JpYmVyKGV2ZW50OiBzdHJpbmcsIG9ic2VydmVyOiBWYWx1ZU9ic2VydmVyRW50cnkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vYnNlcnZlcnNbZXZlbnRdKSB7XG4gICAgICBjb25zdCBrZXlzID0gdGhpcy5vYnNlcnZlcnNbZXZlbnRdO1xuICAgICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gWy4uLmtleXMsIG9ic2VydmVyXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gW29ic2VydmVyXTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlU3Vic2NyaWJlcihldmVudDogc3RyaW5nLCBvYnNlcnZlcjogVmFsdWVPYnNlcnZlckVudHJ5KTogdm9pZCB7XG4gICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdLmZpbHRlcigob2JzKSA9PiBvYnMgIT09IG9ic2VydmVyKTtcbiAgfVxuXG4gIHB1YmxpYyBlbWl0KGV2ZW50OiBzdHJpbmcsIGRhdGE6IG9iamVjdCk6IHZvaWQge1xuICAgIGNvbnN0IG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSB8fCBbXTtcbiAgICBvYnNlcnZlcnMuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IHtcbiAgICAgIG9ic2VydmVyLnVwZGF0ZShkYXRhLCBldmVudCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgT2JzZXJ2ZXI7XG4iLCJpbXBvcnQgT2JzZXJ2ZXIgZnJvbSAnU3JjL09ic2VydmVyL09ic2VydmVyJztcbmltcG9ydCB7IFNMSURFUl9FVkVOVFMgfSBmcm9tICdTcmMvT2JzZXJ2ZXIvZXZlbnRzJztcbmltcG9ydCB7XG4gIEtleUV2ZW50LFxuICBTaXplUG9pbnQsXG4gIFN0YXJ0UG9pbnQsXG4gIFRodW1iSWQsXG59IGZyb20gJ1NyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xuXG5jbGFzcyBTbGlkZXJDb21wb25lbnRzIGV4dGVuZHMgT2JzZXJ2ZXIge1xuICByZWFkb25seSBzaXplOiBTaXplUG9pbnQ7XG5cbiAgcHJvdGVjdGVkIHNjYWxlRWxlbWVudD86IEhUTUxEaXZFbGVtZW50O1xuXG4gIHByb3RlY3RlZCByZWFkb25seSByb290OiBFbGVtZW50O1xuXG4gIHByb3RlY3RlZCByZWFkb25seSBkaXJlY3Rpb246ICdjbGllbnRZJyB8ICdjbGllbnRYJztcblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgc3RhcnRQb2ludDogU3RhcnRQb2ludDtcblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgbW9kOiAndmVydGljYWwnIHwgJ2hvcml6b250YWwnO1xuXG4gIHByb3RlY3RlZCByZWFkb25seSBpc1ZlcnRpY2FsOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHJvb3Q6IEVsZW1lbnQsIGlzVmVydGljYWw6IGJvb2xlYW4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSB0aGlzLmlzVmVydGljYWwgPyAnY2xpZW50WScgOiAnY2xpZW50WCc7XG4gICAgdGhpcy5zdGFydFBvaW50ID0gdGhpcy5pc1ZlcnRpY2FsID8gJ3RvcCcgOiAnbGVmdCc7XG4gICAgdGhpcy5zaXplID0gdGhpcy5pc1ZlcnRpY2FsID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuICAgIHRoaXMubW9kID0gdGhpcy5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICB0aGlzLnJvb3QgPSByb290O1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUVsZW1lbnQoY2xhc3NOYW1lOiBzdHJpbmcpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcHVibGljIHBlcmZvcm1Qb2ludGVyTW92ZSh0aHVtYlBvczogbnVtYmVyLCBpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlVGh1bWJQb2ludGVyTW92ZSA9IChlOiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGVsZW1TaXplID0gdGhpcy5yb290LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuc3RhcnRQb2ludF07XG4gICAgICBjb25zdCBuZXdQb3MgPSBlW3RoaXMuZGlyZWN0aW9uXSAtIHRodW1iUG9zIC0gZWxlbVNpemU7XG4gICAgICB0aGlzLmVtaXQoU0xJREVSX0VWRU5UUy5WQUxVRV9TVEFSVF9DSEFOR0UsIHtcbiAgICAgICAgY29vcmRzTW92ZTogbmV3UG9zLFxuICAgICAgICB0aHVtYklkOiBpZCxcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVUaHVtYlBvaW50ZXJVcCA9ICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgaGFuZGxlVGh1bWJQb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBoYW5kbGVUaHVtYlBvaW50ZXJVcCk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgaGFuZGxlVGh1bWJQb2ludGVyTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgaGFuZGxlVGh1bWJQb2ludGVyVXApO1xuICB9XG5cbiAgcHVibGljIHBlcmZvcm1Ub3VjaE1vdmUodGh1bWJQb3M6IG51bWJlciwgaWQ6IFRodW1iSWQpOiB2b2lkIHtcbiAgICBjb25zdCBoYW5kbGVUaHVtYlRvdWNoTW92ZSA9IChlOiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgZWxlbVNpemUgPSB0aGlzLnJvb3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5zdGFydFBvaW50XTtcbiAgICAgIGNvbnN0IG5ld1BvcyA9IGUudG91Y2hlc1swXVt0aGlzLmRpcmVjdGlvbl0gLSB0aHVtYlBvcyAtIGVsZW1TaXplO1xuICAgICAgdGhpcy5lbWl0KFNMSURFUl9FVkVOVFMuVkFMVUVfU1RBUlRfQ0hBTkdFLCB7XG4gICAgICAgIGNvb3Jkc01vdmU6IG5ld1BvcyxcbiAgICAgICAgdGh1bWJJZDogaWQsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlVGh1bWJUb3VjaEVuZCA9ICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGhhbmRsZVRodW1iVG91Y2hNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlVGh1bWJUb3VjaEVuZCk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGhhbmRsZVRodW1iVG91Y2hNb3ZlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGhhbmRsZVRodW1iVG91Y2hFbmQpO1xuICB9XG5cbiAgcHVibGljIHBlcmZvcm1LZXlEb3duKGtleUV2ZW50OiBLZXlFdmVudCwgaWQ6IFRodW1iSWQpOiB2b2lkIHtcbiAgICB0aGlzLmVtaXQoU0xJREVSX0VWRU5UUy5LRVlfRE9XTiwge1xuICAgICAga2V5RXZlbnQsXG4gICAgICB0aHVtYklkOiBpZCxcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwZXJmb3JtQ2xpY2tNYXJrKHBlcmNlbnQ6IG51bWJlciwgdmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuZW1pdChTTElERVJfRVZFTlRTLk1BUktfQ0xJQ0tFRCwge1xuICAgICAgcGVyY2VudCxcbiAgICAgIHZhbHVlLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNsaWRlckNvbXBvbmVudHM7XG4iLCJpbXBvcnQgeyBQcm9ncmVzc0RhdGEgfSBmcm9tICdTcmMvY29tcG9uZW50cy9JbnRlcmZhY2VzJztcbmltcG9ydCBTbGlkZXJDb21wb25lbnRzIGZyb20gJy4uL1NsaWRlckNvbXBvbmVudHMvU2xpZGVyQ29tcG9uZW50cyc7XG5pbXBvcnQgJy4vcHJvZ3Jlc3Muc2Nzcyc7XG5cbmNsYXNzIFByb2dyZXNzIGV4dGVuZHMgU2xpZGVyQ29tcG9uZW50cyB7XG4gIHByaXZhdGUgcG9zaXRpb25TdGFydDogbnVtYmVyO1xuXG4gIHByaXZhdGUgcG9zaXRpb25FbmQ6IG51bWJlcjtcblxuICBwcml2YXRlIHByb2dyZXNzOiBIVE1MRGl2RWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBQcm9ncmVzc0RhdGEpIHtcbiAgICBjb25zdCB7XG4gICAgICByb290LFxuICAgICAgcG9zaXRpb25TdGFydCxcbiAgICAgIHBvc2l0aW9uRW5kLFxuICAgICAgaXNWZXJ0aWNhbCxcbiAgICB9ID0gZGF0YTtcblxuICAgIHN1cGVyKHJvb3QsIGlzVmVydGljYWwpO1xuICAgIHRoaXMucG9zaXRpb25TdGFydCA9IHBvc2l0aW9uU3RhcnQ7XG4gICAgdGhpcy5wb3NpdGlvbkVuZCA9IHBvc2l0aW9uRW5kO1xuICAgIHRoaXMucHJvZ3Jlc3MgPSBTbGlkZXJDb21wb25lbnRzLmNyZWF0ZUVsZW1lbnQoJ3BsdWdpbi1zbGlkZXJfX3Byb2dyZXNzIGpzLXBsdWdpbi1zbGlkZXJfX3Byb2dyZXNzJyk7XG4gICAgdGhpcy5zZXRQcm9ncmVzcygpO1xuICB9XG5cbiAgcHVibGljIHNldFByb2dyZXNzKCk6IHZvaWQge1xuICAgIHRoaXMucHJvZ3Jlc3Muc3R5bGVbdGhpcy5zdGFydFBvaW50XSA9IGAke3RoaXMucG9zaXRpb25TdGFydH0lYDtcbiAgICB0aGlzLnByb2dyZXNzLnN0eWxlW3RoaXMuc2l6ZV0gPSBgJHt0aGlzLnBvc2l0aW9uRW5kfSVgO1xuICAgIHRoaXMucm9vdC5hcHBlbmQodGhpcy5wcm9ncmVzcyk7XG4gIH1cblxuICBwdWJsaWMgc2V0UHJvZ3Jlc3NQb3NpdGlvbihwb3NpdGlvblN0YXJ0ID0gMCwgcG9zaXRpb25FbmQgPSAxMDApOiB2b2lkIHtcbiAgICB0aGlzLnByb2dyZXNzLnN0eWxlW3RoaXMuc3RhcnRQb2ludF0gPSBgJHtwb3NpdGlvblN0YXJ0fSVgO1xuICAgIHRoaXMucHJvZ3Jlc3Muc3R5bGVbdGhpcy5zaXplXSA9IGAke3Bvc2l0aW9uRW5kfSVgO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2dyZXNzO1xuIiwiaW1wb3J0IHsgU0xJREVSX0VWRU5UUyB9IGZyb20gJ1NyYy9PYnNlcnZlci9ldmVudHMnO1xuaW1wb3J0IFNsaWRlckNvbXBvbmVudHMgZnJvbSAnLi4vU2xpZGVyQ29tcG9uZW50cy9TbGlkZXJDb21wb25lbnRzJztcbmltcG9ydCAnLi9zY2FsZS5zY3NzJztcblxuY2xhc3MgU2NhbGUgZXh0ZW5kcyBTbGlkZXJDb21wb25lbnRzIHtcbiAgcHVibGljIHNjYWxlOiBIVE1MRGl2RWxlbWVudDtcblxuICBjb25zdHJ1Y3Rvcihyb290OiBIVE1MRGl2RWxlbWVudCwgaXNWZXJ0aWNhbDogYm9vbGVhbikge1xuICAgIHN1cGVyKHJvb3QsIGlzVmVydGljYWwpO1xuXG4gICAgdGhpcy5zY2FsZSA9IFNsaWRlckNvbXBvbmVudHMuY3JlYXRlRWxlbWVudCgncGx1Z2luLXNsaWRlcl9fc2NhbGUganMtcGx1Z2luLXNsaWRlcl9fc2NhbGUnKTtcbiAgICB0aGlzLmhhbmRsZVNjYWxlUG9pbnRlckRvd24gPSB0aGlzLmhhbmRsZVNjYWxlUG9pbnRlckRvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTY2FsZSgpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgaWYgKCF0aGlzLnNjYWxlKSB0aGlzLnNjYWxlID0gU2xpZGVyQ29tcG9uZW50cy5jcmVhdGVFbGVtZW50KCdwbHVnaW4tc2xpZGVyX19zY2FsZScpO1xuICAgIHJldHVybiB0aGlzLnNjYWxlO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHRoaXMuc2NhbGUuY2xhc3NMaXN0LmFkZCgncGx1Z2luLXNsaWRlcl9fc2NhbGVfdmVydGljYWwnKTtcbiAgICBpZiAoIXRoaXMuaXNWZXJ0aWNhbCkgdGhpcy5zY2FsZS5jbGFzc0xpc3QuYWRkKCdwbHVnaW4tc2xpZGVyX19zY2FsZV9ob3Jpem9udGFsJyk7XG4gICAgdGhpcy5hZGRTY2FsZSgpO1xuICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIGFkZFNjYWxlKCk6IHZvaWQge1xuICAgIHRoaXMucm9vdC5hcHBlbmQodGhpcy5zY2FsZSk7XG4gIH1cblxuICBwcml2YXRlIGFkZExpc3RlbmVycygpOiB2b2lkIHtcbiAgICB0aGlzLnNjYWxlLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5oYW5kbGVTY2FsZVBvaW50ZXJEb3duKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlU2NhbGVQb2ludGVyRG93bihlOiBQb2ludGVyRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IHRhcmdldCB9ID0gZTtcbiAgICBpZiAoISh0YXJnZXQgYXMgRWxlbWVudCkuY2xvc2VzdCgnLnBsdWdpbi1zbGlkZXJfX3NjYWxlJykpIHJldHVybjtcbiAgICBpZiAoKHRhcmdldCBhcyBFbGVtZW50KS5jbGFzc0xpc3QuY29udGFpbnMoJ3BsdWdpbi1zbGlkZXJfX21hcmstdmFsdWUnKSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc2NhbGVTaXplID0gdGhpcy5zY2FsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0aGlzLnNpemVdO1xuXG4gICAgY29uc3Qgc2NhbGVTdGFydCA9IHRoaXMuc2NhbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5zdGFydFBvaW50XTtcbiAgICBjb25zdCBjb29yZHNNb3ZlID0gZVt0aGlzLmRpcmVjdGlvbl0gLSBzY2FsZVN0YXJ0O1xuXG4gICAgaWYgKGNvb3Jkc01vdmUgPiBzY2FsZVNpemUgfHwgY29vcmRzTW92ZSA8IDApIHJldHVybjtcbiAgICB0aGlzLmVtaXREYXRhKGNvb3Jkc01vdmUsIHNjYWxlU2l6ZSk7XG4gIH1cblxuICBwcml2YXRlIGVtaXREYXRhKGNvb3Jkc01vdmU6IG51bWJlciwgc2NhbGVTaXplOiBudW1iZXIpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY29vcmRzTW92ZSxcbiAgICAgIHNjYWxlU2l6ZSxcbiAgICB9O1xuXG4gICAgdGhpcy5lbWl0KFNMSURFUl9FVkVOVFMuU0NBTEVfQ0xJQ0tFRCwgZGF0YSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2NhbGU7XG4iLCJpbXBvcnQgeyBNYXJrcyB9IGZyb20gJ1NyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xuaW1wb3J0IFNsaWRlckNvbXBvbmVudHMgZnJvbSAnLi4vU2xpZGVyQ29tcG9uZW50cy9TbGlkZXJDb21wb25lbnRzJztcbmltcG9ydCAnLi9zY2FsZU1hcmtzLnNjc3MnO1xuXG5jbGFzcyBTY2FsZU1hcmtzIGV4dGVuZHMgU2xpZGVyQ29tcG9uZW50cyB7XG4gIHB1YmxpYyBtYXJrczogTWFya3M7XG5cbiAgY29uc3RydWN0b3Iocm9vdDogSFRNTERpdkVsZW1lbnQsIG1hcmtzOiBNYXA8bnVtYmVyLCBudW1iZXI+LCBpc1ZlcnRpY2FsOiBib29sZWFuKSB7XG4gICAgc3VwZXIocm9vdCwgaXNWZXJ0aWNhbCk7XG4gICAgdGhpcy5tYXJrcyA9IG1hcmtzO1xuXG4gICAgdGhpcy5oYW5kbGVSb290Q2xpY2sgPSB0aGlzLmhhbmRsZVJvb3RDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuICAgIHRoaXMuY3JlYXRlTWFya3MoKTtcbiAgICB0aGlzLmFkZExpc3RlbmVycygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgdGhpcy5yb290LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVSb290Q2xpY2spO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVSb290Q2xpY2soZTogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAodGFyZ2V0ID09PSBudWxsKSByZXR1cm47XG4gICAgY29uc3QgeyB2YWx1ZSwgcGVyY2VudCB9ID0gdGFyZ2V0LmRhdGFzZXQ7XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BsdWdpbi1zbGlkZXJfX21hcmstdmFsdWUnKSkge1xuICAgICAgaWYgKHBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnBlcmZvcm1DbGlja01hcmsoTnVtYmVyKHBlcmNlbnQpLCBOdW1iZXIodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU1hcmtzKCk6IHZvaWQge1xuICAgIHRoaXMubWFya3MuZm9yRWFjaCgodmFsdWU6IG51bWJlciwgcGVyY2VudDogbnVtYmVyKSA9PiB0aGlzLmNyZWF0ZU1hcmsodmFsdWUsIHBlcmNlbnQpKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTWFyayhwZXJjZW50OiBudW1iZXIsIHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBtYXJrID0gU2xpZGVyQ29tcG9uZW50cy5jcmVhdGVFbGVtZW50KCdwbHVnaW4tc2xpZGVyX19tYXJrIGpzLXBsdWdpbi1zbGlkZXJfX21hcmsnKTtcbiAgICBtYXJrLmNsYXNzTGlzdC5hZGQoYHBsdWdpbi1zbGlkZXJfX21hcmtfJHt0aGlzLm1vZH1gKTtcbiAgICBtYXJrLnN0eWxlW3RoaXMuc3RhcnRQb2ludF0gPSBgJHtwZXJjZW50fSVgO1xuXG4gICAgY29uc3QgbWFya1ZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIG1hcmtWYWx1ZS5jbGFzc05hbWUgPSAncGx1Z2luLXNsaWRlcl9fbWFyay12YWx1ZSc7XG4gICAgbWFya1ZhbHVlLmNsYXNzTGlzdC5hZGQoYHBsdWdpbi1zbGlkZXJfX21hcmstdmFsdWVfJHt0aGlzLm1vZH1gKTtcbiAgICBtYXJrVmFsdWUuZGF0YXNldC52YWx1ZSA9IGAke3ZhbHVlfWA7XG4gICAgbWFya1ZhbHVlLmRhdGFzZXQucGVyY2VudCA9IGAke3BlcmNlbnR9YDtcbiAgICBtYXJrVmFsdWUuaW5uZXJUZXh0ID0gYCR7dmFsdWV9YDtcbiAgICBtYXJrLmFwcGVuZChtYXJrVmFsdWUpO1xuXG4gICAgdGhpcy5yb290LmFwcGVuZChtYXJrKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTY2FsZU1hcmtzO1xuIiwiaW1wb3J0IHsgVGh1bWJBcmdzLCBUaHVtYklkIH0gZnJvbSAnU3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XG5pbXBvcnQgU2xpZGVyQ29tcG9uZW50cyBmcm9tICcuLi9TbGlkZXJDb21wb25lbnRzL1NsaWRlckNvbXBvbmVudHMnO1xuaW1wb3J0ICcuL3RodW1iLnNjc3MnO1xuXG5jbGFzcyBUaHVtYiBleHRlbmRzIFNsaWRlckNvbXBvbmVudHMge1xuICBwcml2YXRlIG1vdmVkPzogbnVtYmVyO1xuXG4gIHRodW1iUGVyY2VudDogbnVtYmVyO1xuXG4gIHRodW1iRWxlbWVudD86IEhUTUxEaXZFbGVtZW50O1xuXG4gIHRodW1iSWQ6IFRodW1iSWQ7XG5cbiAgY29uc3RydWN0b3IodmFsdWVzOiBUaHVtYkFyZ3MpIHtcbiAgICBjb25zdCB7XG4gICAgICByb290LFxuICAgICAgdGh1bWJQZXJjZW50ID0gMCxcbiAgICAgIGlkID0gJ3ZhbHVlRnJvbScsXG4gICAgICBpc1ZlcnRpY2FsLFxuICAgIH0gPSB2YWx1ZXM7XG5cbiAgICBzdXBlcihyb290LCBpc1ZlcnRpY2FsKTtcbiAgICB0aGlzLnRodW1iUGVyY2VudCA9IHRodW1iUGVyY2VudDtcbiAgICB0aGlzLnRodW1iSWQgPSBpZDtcblxuICAgIHRoaXMuaGFuZGxlVGh1bWJQb2ludGVyRG93biA9IHRoaXMuaGFuZGxlVGh1bWJQb2ludGVyRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVGh1bWJLZXlEb3duID0gdGhpcy5oYW5kbGVUaHVtYktleURvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZVRodW1iVG91Y2ggPSB0aGlzLmhhbmRsZVRodW1iVG91Y2guYmluZCh0aGlzKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnRodW1iRWxlbWVudCA9IFNsaWRlckNvbXBvbmVudHMuY3JlYXRlRWxlbWVudCgncGx1Z2luLXNsaWRlcl9fdGh1bWIganMtcGx1Z2luLXNsaWRlcl9fdGh1bWInKTtcbiAgICB0aGlzLnRodW1iRWxlbWVudC5pZCA9IHRoaXMudGh1bWJJZDtcbiAgICB0aGlzLnRodW1iRWxlbWVudC50YWJJbmRleCA9IDE7XG4gICAgdGhpcy5yb290LmFwcGVuZCh0aGlzLnRodW1iRWxlbWVudCk7XG4gICAgdGhpcy5zZXRQb3NpdGlvbih0aGlzLnRodW1iUGVyY2VudCk7XG4gICAgdGhpcy5hZGRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRQb3NpdGlvbih0aHVtYlBlcmNlbnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMudGh1bWJQZXJjZW50ID0gdGh1bWJQZXJjZW50O1xuICAgIHRoaXMuY2hlY2taSW5kKCk7XG4gICAgaWYgKHRoaXMudGh1bWJFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudGh1bWJFbGVtZW50LnN0eWxlW3RoaXMuc3RhcnRQb2ludF0gPSBgJHt0aGlzLnRodW1iUGVyY2VudH0lYDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0VGh1bWIoKTogSFRNTERpdkVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnRodW1iRWxlbWVudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUaHVtYklkKCk6IFRodW1iSWQge1xuICAgIHJldHVybiB0aGlzLnRodW1iSWQ7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrWkluZCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aHVtYkVsZW1lbnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLnRodW1iSWQgPT09ICd2YWx1ZUZyb20nICYmIHRoaXMudGh1bWJQZXJjZW50ID09PSAxMDApIHtcbiAgICAgIHRoaXMudGh1bWJFbGVtZW50LnN0eWxlLnpJbmRleCA9ICcxMCc7XG4gICAgfVxuICAgIGlmICh0aGlzLnRodW1iSWQgPT09ICd2YWx1ZUZyb20nICYmIHRoaXMudGh1bWJQZXJjZW50IDwgMTAwKSB7XG4gICAgICB0aGlzLnRodW1iRWxlbWVudC5zdHlsZS56SW5kZXggPSAnNSc7XG4gICAgfVxuICAgIGlmICh0aGlzLnRodW1iSWQgPT09ICd2YWx1ZVRvJyAmJiB0aGlzLnRodW1iUGVyY2VudCA9PT0gMCkge1xuICAgICAgdGhpcy50aHVtYkVsZW1lbnQuc3R5bGUuekluZGV4ID0gJzEwJztcbiAgICB9XG4gICAgaWYgKHRoaXMudGh1bWJJZCA9PT0gJ3ZhbHVlVG8nICYmIHRoaXMudGh1bWJQZXJjZW50ID4gMCkge1xuICAgICAgdGhpcy50aHVtYkVsZW1lbnQuc3R5bGUuekluZGV4ID0gJzUnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRodW1iRWxlbWVudCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgdGhpcy50aHVtYkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLmhhbmRsZVRodW1iUG9pbnRlckRvd24pO1xuICAgIHRoaXMudGh1bWJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZVRodW1iS2V5RG93bik7XG4gICAgdGhpcy50aHVtYkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICd0b3VjaHN0YXJ0JyxcbiAgICAgIHRoaXMuaGFuZGxlVGh1bWJUb3VjaCxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVUaHVtYlRvdWNoKGU6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHRoaXMudGh1bWJFbGVtZW50ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICBjb25zdCBzaXplRWxlbWVudCA9IHRoaXMudGh1bWJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuc3RhcnRQb2ludF07XG4gICAgdGhpcy5tb3ZlZCA9IGUudG91Y2hlc1swXVt0aGlzLmRpcmVjdGlvbl0gLSAoc2l6ZUVsZW1lbnRcbiAgICAgICsgKHRoaXMudGh1bWJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuc2l6ZV0gLyAyKSk7XG4gICAgc3VwZXIucGVyZm9ybVRvdWNoTW92ZSh0aGlzLm1vdmVkLCB0aGlzLnRodW1iSWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVUaHVtYlBvaW50ZXJEb3duKGU6IFBvaW50ZXJFdmVudCk6IHZvaWQge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAodGhpcy50aHVtYkVsZW1lbnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIHRoaXMubW92ZWQgPSBlW3RoaXMuZGlyZWN0aW9uXSAtICh0aGlzLnRodW1iRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0aGlzLnN0YXJ0UG9pbnRdXG4gICAgICArICh0aGlzLnRodW1iRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0aGlzLnNpemVdIC8gMikpO1xuICAgIHRoaXMuY2hlY2taSW5kKCk7XG4gICAgc3VwZXIucGVyZm9ybVBvaW50ZXJNb3ZlKHRoaXMubW92ZWQsIHRoaXMudGh1bWJJZCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRodW1iS2V5RG93bihlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHsga2V5IH0gPSBlO1xuICAgIGlmIChrZXkgPT09ICdBcnJvd0xlZnQnIHx8IGtleSA9PT0gJ0Fycm93VXAnIHx8IGtleSA9PT0gJ0Fycm93UmlnaHQnIHx8IGtleSA9PT0gJ0Fycm93RG93bicpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoKGtleSA9PT0gJ0Fycm93TGVmdCcgJiYgIXRoaXMuaXNWZXJ0aWNhbCkgfHwgKGtleSA9PT0gJ0Fycm93VXAnICYmIHRoaXMuaXNWZXJ0aWNhbCkpIHtcbiAgICAgIHN1cGVyLnBlcmZvcm1LZXlEb3duKCdkZWNyZW1lbnQnLCB0aGlzLnRodW1iSWQpO1xuICAgIH1cblxuICAgIGlmICgoa2V5ID09PSAnQXJyb3dSaWdodCcgJiYgIXRoaXMuaXNWZXJ0aWNhbCkgfHwgKGtleSA9PT0gJ0Fycm93RG93bicgJiYgdGhpcy5pc1ZlcnRpY2FsKSkge1xuICAgICAgc3VwZXIucGVyZm9ybUtleURvd24oJ2luY3JlbWVudCcsIHRoaXMudGh1bWJJZCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRodW1iO1xuIiwiaW1wb3J0IHsgVGlwRGF0YSB9IGZyb20gJ1NyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xuaW1wb3J0IFNsaWRlckNvbXBvbmVudHMgZnJvbSAnLi4vU2xpZGVyQ29tcG9uZW50cy9TbGlkZXJDb21wb25lbnRzJztcbmltcG9ydCAnLi90aXAuc2Nzcyc7XG5cbmNsYXNzIFRpcCBleHRlbmRzIFNsaWRlckNvbXBvbmVudHMge1xuICB0aXA6IEhUTUxEaXZFbGVtZW50O1xuXG4gIHZhbHVlVGlwOiBudW1iZXIgfCBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBwZXJjZW50UG9zaXRpb246IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBUaXBEYXRhKSB7XG4gICAgY29uc3Qge1xuICAgICAgcm9vdCxcbiAgICAgIHBlcmNlbnRQb3NpdGlvbixcbiAgICAgIHZhbHVlVGlwLFxuICAgICAgaXNWZXJ0aWNhbCxcbiAgICB9ID0gZGF0YTtcblxuICAgIHN1cGVyKHJvb3QsIGlzVmVydGljYWwpO1xuICAgIHRoaXMucGVyY2VudFBvc2l0aW9uID0gcGVyY2VudFBvc2l0aW9uO1xuICAgIHRoaXMudmFsdWVUaXAgPSB2YWx1ZVRpcDtcblxuICAgIHRoaXMudGlwID0gdGhpcy5jcmVhdGVUaXAoKTtcbiAgICB0aGlzLmFkZFRpcCgpO1xuICB9XG5cbiAgcHVibGljIHNldFZhbHVlVGlwKHZhbHVlVGlwOiBudW1iZXIgfCBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnRpcC5pbm5lclRleHQgPSBgJHt2YWx1ZVRpcH1gO1xuICB9XG5cbiAgcHVibGljIGhpZGVUaXAoKTogdm9pZCB7XG4gICAgdGhpcy50aXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxuXG4gIHB1YmxpYyBzaG93VGlwKCk6IHZvaWQge1xuICAgIHRoaXMudGlwLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgfVxuXG4gIHB1YmxpYyBzZXRQb3NpdGlvbihwZXJjZW50UG9zaXRpb246IG51bWJlciwgdmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMudGlwLnN0eWxlW3RoaXMuc3RhcnRQb2ludF0gPSBgJHtwZXJjZW50UG9zaXRpb259JWA7XG4gICAgdGhpcy50aXAuaW5uZXJUZXh0ID0gYCR7dmFsdWV9YDtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVGlwKCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICBjb25zdCB0aXAgPSBTbGlkZXJDb21wb25lbnRzLmNyZWF0ZUVsZW1lbnQoJ3BsdWdpbi1zbGlkZXJfX3RpcCBqcy1wbHVnaW4tc2xpZGVyX190aXAnKTtcbiAgICB0aXAuY2xhc3NMaXN0LmFkZChgcGx1Z2luLXNsaWRlcl9fdGlwXyR7dGhpcy5tb2R9YCk7XG4gICAgdGlwLmlubmVyVGV4dCA9IGAke3RoaXMudmFsdWVUaXB9YDtcbiAgICB0aXAuc3R5bGVbc3VwZXIuc3RhcnRQb2ludF0gPSBgJHt0aGlzLnBlcmNlbnRQb3NpdGlvbn0lYDtcbiAgICByZXR1cm4gdGlwO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRUaXAoKSB7XG4gICAgdGhpcy5yb290LmFwcGVuZCh0aGlzLnRpcCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlwO1xuIiwiaW1wb3J0IE9ic2VydmVyIGZyb20gJ1NyYy9PYnNlcnZlci9PYnNlcnZlcic7XG5pbXBvcnQgeyBTTElERVJfRVZFTlRTIH0gZnJvbSAnU3JjL09ic2VydmVyL2V2ZW50cyc7XG5pbXBvcnQge1xuICBTbGlkZXJPcHRpb25zLFxuICBTbGlkZXJFdmVudFZhbENoYW5nZWREYXRhLFxuICBTY2FsZUNsaWNrRGF0YSxcbiAgVGh1bWJJZCxcbn0gZnJvbSAnU3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XG5pbXBvcnQgUHJvZ3Jlc3MgZnJvbSAnLi4vUHJvZ3Jlc3MvUHJvZ3Jlc3MnO1xuaW1wb3J0IFNjYWxlIGZyb20gJy4uL1NjYWxlL1NjYWxlJztcbmltcG9ydCBTY2FsZU1hcmtzIGZyb20gJy4uL1NjYWxlTWFya3MvU2NhbGVNYXJrcyc7XG5pbXBvcnQgU2xpZGVyQ29tcG9uZW50cyBmcm9tICcuLi9TbGlkZXJDb21wb25lbnRzL1NsaWRlckNvbXBvbmVudHMnO1xuaW1wb3J0IFRodW1iIGZyb20gJy4uL1RodW1iL1RodW1iJztcbmltcG9ydCBUaXAgZnJvbSAnLi4vVGlwL1RpcCc7XG5pbXBvcnQgJy4vc2xpZGVyLnNjc3MnO1xuXG5jbGFzcyBTbGlkZXIgZXh0ZW5kcyBPYnNlcnZlciB7XG4gIG51bWJlclZhcmlhYmxlczoge1xuICAgIHRpcFZhbHVlRnJvbTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIHRodW1iUGVyY2VudEZyb206IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICB0aHVtYlBlcmNlbnRUbzogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIHRpcFZhbHVlVG86IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgfTtcblxuICBkb206IHtcbiAgICBzbGlkZXI6IHVuZGVmaW5lZCB8IEhUTUxEaXZFbGVtZW50O1xuICAgIHNjYWxlRWxlbWVudDogdW5kZWZpbmVkIHwgSFRNTERpdkVsZW1lbnQ7XG4gICAgcm9vdD86IEVsZW1lbnQ7XG4gIH07XG5cbiAgYm9vbGVhblZhcmlhYmxlczoge1xuICAgIGlzUHJvZ3Jlc3M6IGJvb2xlYW47XG4gICAgaXNSYW5nZTogYm9vbGVhbjtcbiAgICBpc1ZlcnRpY2FsOiBib29sZWFuO1xuICAgIGlzVGlwOiBib29sZWFuO1xuICAgIGlzU2NhbGVNYXJrczogYm9vbGVhbjtcbiAgfTtcblxuICBjbGFzc0VsZW1lbnRzOiB7XG4gICAgdGh1bWJGcm9tOiBUaHVtYiB8IHVuZGVmaW5lZDtcbiAgICB0aHVtYlRvOiBUaHVtYiB8IHVuZGVmaW5lZDtcbiAgICBzY2FsZTogU2NhbGUgfCB1bmRlZmluZWQ7XG4gICAgc2NhbGVNYXJrczogU2NhbGVNYXJrcyB8IHVuZGVmaW5lZDtcbiAgICB0aXBGcm9tOiBUaXAgfCB1bmRlZmluZWQ7XG4gICAgdGlwVG86IFRpcCB8IHVuZGVmaW5lZDtcbiAgICBwcm9ncmVzczogUHJvZ3Jlc3MgfCB1bmRlZmluZWQ7XG4gICAgc2xpZGVyQ29tcG9uZW50czogU2xpZGVyQ29tcG9uZW50cyB8IHVuZGVmaW5lZDtcbiAgfTtcblxuICBzY2FsZU1hcDogTWFwPG51bWJlciwgbnVtYmVyPiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcihyb290OiBFbGVtZW50LCBwcm90ZWN0ZWQgcmVhZG9ubHkgc3RhdGU6IFNsaWRlck9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5kb20gPSB7XG4gICAgICBzbGlkZXI6IHVuZGVmaW5lZCxcbiAgICAgIHNjYWxlRWxlbWVudDogdW5kZWZpbmVkLFxuICAgICAgcm9vdCxcbiAgICB9O1xuXG4gICAgdGhpcy5udW1iZXJWYXJpYWJsZXMgPSB7XG4gICAgICB0aXBWYWx1ZUZyb206IHVuZGVmaW5lZCxcbiAgICAgIHRodW1iUGVyY2VudEZyb206IHVuZGVmaW5lZCxcbiAgICAgIHRodW1iUGVyY2VudFRvOiB1bmRlZmluZWQsXG4gICAgICB0aXBWYWx1ZVRvOiB1bmRlZmluZWQsXG4gICAgfTtcblxuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9IHtcbiAgICAgIGlzUHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgaXNSYW5nZTogZmFsc2UsXG4gICAgICBpc1ZlcnRpY2FsOiBmYWxzZSxcbiAgICAgIGlzVGlwOiBmYWxzZSxcbiAgICAgIGlzU2NhbGVNYXJrczogZmFsc2UsXG4gICAgfTtcblxuICAgIHRoaXMuY2xhc3NFbGVtZW50cyA9IHtcbiAgICAgIHRodW1iRnJvbTogdW5kZWZpbmVkLFxuICAgICAgdGh1bWJUbzogdW5kZWZpbmVkLFxuICAgICAgc2NhbGU6IHVuZGVmaW5lZCxcbiAgICAgIHNjYWxlTWFya3M6IHVuZGVmaW5lZCxcbiAgICAgIHRpcEZyb206IHVuZGVmaW5lZCxcbiAgICAgIHRpcFRvOiB1bmRlZmluZWQsXG4gICAgICBwcm9ncmVzczogdW5kZWZpbmVkLFxuICAgICAgc2xpZGVyQ29tcG9uZW50czogdW5kZWZpbmVkLFxuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZVZhcmlhYmxlcyhyb290LCBzdGF0ZSk7XG4gICAgdGhpcy5pbml0KCk7XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlU2xpZGVyKCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICBjb25zdCBzbGlkZXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc2xpZGVyV3JhcHBlci5jbGFzc05hbWUgPSAncGx1Z2luLXNsaWRlciBqcy1wbHVnaW4tc2xpZGVyJztcbiAgICByZXR1cm4gc2xpZGVyV3JhcHBlcjtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoXG4gICAgZGF0YTogU2xpZGVyRXZlbnRWYWxDaGFuZ2VkRGF0YSB8IFNjYWxlQ2xpY2tEYXRhLFxuICAgIGV2ZW50OiBzdHJpbmcsXG4gICk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuY2xhc3NFbGVtZW50cy5zbGlkZXJDb21wb25lbnRzID09PSB1bmRlZmluZWRcbiAgICAgIHx8IHRoaXMuZG9tLnNjYWxlRWxlbWVudCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgY29uc3QgeyBzaXplIH0gPSB0aGlzLmNsYXNzRWxlbWVudHMuc2xpZGVyQ29tcG9uZW50cztcbiAgICBjb25zdCBzY2FsZVNpemUgPSB0aGlzLmRvbS5zY2FsZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbc2l6ZV07XG5cbiAgICBpZiAoZXZlbnQgPT09IFNMSURFUl9FVkVOVFMuVkFMVUVfU1RBUlRfQ0hBTkdFKSB7XG4gICAgICBjb25zdCBzbGlkZXJEYXRhID0geyAuLi5kYXRhLCBzY2FsZVNpemUgfTtcbiAgICAgIHRoaXMuZW1pdChTTElERVJfRVZFTlRTLkRBVEFfQ09MTEVDVEVELCBzbGlkZXJEYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbWl0KFNMSURFUl9FVkVOVFMuREFUQV9DT0xMRUNURUQsIGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZXRTdGF0ZShkYXRhOiBTbGlkZXJPcHRpb25zKTogdm9pZCB7XG4gICAgY29uc3Qge1xuICAgICAgdGh1bWJQZXJjZW50RnJvbSxcbiAgICAgIHZhbHVlRnJvbSxcbiAgICAgIGlzUmFuZ2UsXG4gICAgICB0aHVtYlBlcmNlbnRUbyxcbiAgICAgIHZhbHVlVG8sXG4gICAgfSA9IGRhdGE7XG5cbiAgICB0aGlzLnNldFRodW1icyh0aHVtYlBlcmNlbnRGcm9tLCB0aHVtYlBlcmNlbnRUbywgaXNSYW5nZSk7XG4gICAgdGhpcy5zZXRUaXBzKHZhbHVlRnJvbSwgdmFsdWVUbywgaXNSYW5nZSk7XG4gICAgdGhpcy5zZXRQcm9ncmVzcyh0aHVtYlBlcmNlbnRGcm9tLCB0aHVtYlBlcmNlbnRUbywgaXNSYW5nZSk7XG4gIH1cblxuICBwcml2YXRlIHNldFRodW1icyhcbiAgICB0aHVtYlBlcmNlbnRGcm9tOiBudW1iZXIsXG4gICAgdGh1bWJQZXJjZW50VG86IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBpc1JhbmdlOiBib29sZWFuLFxuICApIHtcbiAgICBpZiAodGhpcy5jbGFzc0VsZW1lbnRzLnRodW1iRnJvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMubnVtYmVyVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICBpZiAodGhpcy5kb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSA9IHRodW1iUGVyY2VudEZyb207XG4gICAgdGhpcy5jbGFzc0VsZW1lbnRzLnRodW1iRnJvbS5zZXRQb3NpdGlvbih0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tKTtcblxuICAgIGlmIChpc1JhbmdlICYmIHRoaXMuZG9tLnNsaWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBzZWNvbmRUaHVtYiA9IHRoaXMuZG9tLnNsaWRlci5xdWVyeVNlbGVjdG9yKCcjdmFsdWVUbycpO1xuICAgICAgaWYgKHNlY29uZFRodW1iID09PSBudWxsICYmIHRodW1iUGVyY2VudFRvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRUaHVtYigndmFsdWVUbycsIHRodW1iUGVyY2VudFRvKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNSYW5nZSAmJiB0aHVtYlBlcmNlbnRUbyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuY2xhc3NFbGVtZW50cy50aHVtYlRvKSB7XG4gICAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRUbyA9IHRodW1iUGVyY2VudFRvO1xuICAgICAgdGhpcy5jbGFzc0VsZW1lbnRzLnRodW1iVG8uc2V0UG9zaXRpb24odGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG8pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0VGh1bWIoaWQ6IFRodW1iSWQsIHRodW1iUGVyY2VudDogbnVtYmVyKSB7XG4gICAgY29uc3QgdGh1bWIgPSBpZCA9PT0gJ3ZhbHVlVG8nID8gJ3RodW1iVG8nIDogJ3RodW1iRnJvbSc7XG4gICAgaWYgKHRoaXMuZG9tID09PSB1bmRlZmluZWQgfHwgdGhpcy5ib29sZWFuVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICBpZiAodGhpcy5kb20uc2NhbGVFbGVtZW50ID09PSB1bmRlZmluZWRcbiAgICAgIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1ZlcnRpY2FsID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICB0aGlzLmNsYXNzRWxlbWVudHNbdGh1bWJdID0gbmV3IFRodW1iKHtcbiAgICAgIHJvb3Q6IHRoaXMuZG9tLnNjYWxlRWxlbWVudCxcbiAgICAgIHRodW1iUGVyY2VudCxcbiAgICAgIGlkLFxuICAgICAgaXNWZXJ0aWNhbDogdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNldFRpcHModmFsdWVGcm9tOiBudW1iZXIsIHZhbHVlVG86IG51bWJlciB8IHVuZGVmaW5lZCwgaXNSYW5nZTogYm9vbGVhbikge1xuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLm51bWJlclZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICBjb25zdCB7IGlzVGlwIH0gPSB0aGlzLmJvb2xlYW5WYXJpYWJsZXM7XG4gICAgaWYgKGlzVGlwICYmIHRoaXMuY2xhc3NFbGVtZW50cy50aXBGcm9tKSB7XG4gICAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aXBWYWx1ZUZyb20gPSB2YWx1ZUZyb207XG4gICAgICBpZiAodGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMudGlwRnJvbS5zZXRQb3NpdGlvbihcbiAgICAgICAgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSxcbiAgICAgICAgdGhpcy5udW1iZXJWYXJpYWJsZXMudGlwVmFsdWVGcm9tLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc05lZWREb3VibGVUaXAoKSkge1xuICAgICAgdGhpcy5jbGFzc0VsZW1lbnRzLnRpcEZyb20/LnNldFZhbHVlVGlwKGAke3ZhbHVlRnJvbX0gLSAke3ZhbHVlVG99YCk7XG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMudGlwVG8/LmhpZGVUaXAoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbGFzc0VsZW1lbnRzLnRpcFRvPy5zaG93VGlwKCk7XG4gICAgfVxuXG4gICAgaWYgKGlzUmFuZ2VcbiAgICAgICYmIHRoaXMuY2xhc3NFbGVtZW50cy50aXBUbyAmJiB2YWx1ZVRvICE9PSB1bmRlZmluZWQgJiYgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG8pIHtcbiAgICAgIHRoaXMubnVtYmVyVmFyaWFibGVzLnRpcFZhbHVlVG8gPSB2YWx1ZVRvO1xuICAgICAgdGhpcy5jbGFzc0VsZW1lbnRzLnRpcFRvLnNldFBvc2l0aW9uKFxuICAgICAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRUbyxcbiAgICAgICAgdGhpcy5udW1iZXJWYXJpYWJsZXMudGlwVmFsdWVUbyxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRUaXAodmFsdWVEaXJlY3Rpb24gPSAndmFsdWVGcm9tJykge1xuICAgIGNvbnN0IHRpcFZhbHVlID0gdmFsdWVEaXJlY3Rpb24gPT09ICd2YWx1ZUZyb20nID8gJ3RpcFZhbHVlRnJvbScgOiAndGlwVmFsdWVUbyc7XG4gICAgY29uc3QgdGlwID0gdmFsdWVEaXJlY3Rpb24gPT09ICd2YWx1ZUZyb20nID8gJ3RpcEZyb20nIDogJ3RpcFRvJztcbiAgICBjb25zdCBwZXJjZW50UG9zaXRpb24gPSB2YWx1ZURpcmVjdGlvbiA9PT0gJ3ZhbHVlRnJvbScgPyAndGh1bWJQZXJjZW50RnJvbScgOiAndGh1bWJQZXJjZW50VG8nO1xuXG4gICAgaWYgKHRoaXMubnVtYmVyVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICBpZiAodGhpcy5kb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gICAgaWYgKHZhbHVlRGlyZWN0aW9uID09PSAndmFsdWVUbycgJiYgdGhpcy5udW1iZXJWYXJpYWJsZXNbcGVyY2VudFBvc2l0aW9uXSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuZG9tLnNjYWxlRWxlbWVudCA9PT0gdW5kZWZpbmVkXG4gICAgICB8fCB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNWZXJ0aWNhbCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICB0aGlzLmNsYXNzRWxlbWVudHNbdGlwXSA9IG5ldyBUaXAoe1xuICAgICAgcm9vdDogdGhpcy5kb20uc2NhbGVFbGVtZW50LFxuICAgICAgcGVyY2VudFBvc2l0aW9uOiB0aGlzLm51bWJlclZhcmlhYmxlc1twZXJjZW50UG9zaXRpb25dIGFzIG51bWJlcixcbiAgICAgIHZhbHVlVGlwOiB0aXBWYWx1ZSxcbiAgICAgIGlzVmVydGljYWw6IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1ZlcnRpY2FsLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRQcm9ncmVzcyhcbiAgICB0aHVtYlBlcmNlbnRGcm9tOiBudW1iZXIsXG4gICAgdGh1bWJQZXJjZW50VG86IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBpc1JhbmdlOiBib29sZWFuLFxuICApIHtcbiAgICBpZiAodGhpcy5kb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLm51bWJlclZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuZG9tLnNsaWRlciA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICBjb25zdCBwcm9ncmVzcyA9IHRoaXMuZG9tLnNsaWRlci5xdWVyeVNlbGVjdG9yKCcuanMtcGx1Z2luLXNsaWRlcl9fcHJvZ3Jlc3MnKTtcbiAgICBpZiAocHJvZ3Jlc3MgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uRW5kID0gdHlwZW9mIHRodW1iUGVyY2VudFRvID09PSAnbnVtYmVyJyA/IHRodW1iUGVyY2VudFRvIDogMDtcblxuICAgICAgaWYgKHRoaXMuZG9tLnNjYWxlRWxlbWVudCA9PT0gdW5kZWZpbmVkXG4gICAgICAgIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1ZlcnRpY2FsID09PSB1bmRlZmluZWRcbiAgICAgICAgfHwgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMucHJvZ3Jlc3MgPSBuZXcgUHJvZ3Jlc3Moe1xuICAgICAgICByb290OiB0aGlzLmRvbS5zY2FsZUVsZW1lbnQsXG4gICAgICAgIHBvc2l0aW9uU3RhcnQ6IHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudEZyb20sXG4gICAgICAgIHBvc2l0aW9uRW5kLFxuICAgICAgICBpc1ZlcnRpY2FsOiB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNWZXJ0aWNhbCxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUHJvZ3Jlc3MgJiYgaXNSYW5nZSAmJiB0aHVtYlBlcmNlbnRUbykge1xuICAgICAgdGhpcy5jbGFzc0VsZW1lbnRzLnByb2dyZXNzPy5zZXRQcm9ncmVzc1Bvc2l0aW9uKFxuICAgICAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tLFxuICAgICAgICB0aHVtYlBlcmNlbnRUbyAtIHRodW1iUGVyY2VudEZyb20sXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUHJvZ3Jlc3MgJiYgdGh1bWJQZXJjZW50VG8gPT09IHRodW1iUGVyY2VudEZyb20pIHtcbiAgICAgIHRoaXMuY2xhc3NFbGVtZW50cy5wcm9ncmVzcz8uc2V0UHJvZ3Jlc3NQb3NpdGlvbigwLCAwKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1Byb2dyZXNzICYmICFpc1JhbmdlKSB7XG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMucHJvZ3Jlc3M/LnNldFByb2dyZXNzUG9zaXRpb24oMCwgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgdGhpcy5kb20uc2xpZGVyID0gU2xpZGVyLmNyZWF0ZVNsaWRlcigpO1xuICAgIHRoaXMuY3JlYXRlRWxlbWVudHMoKTtcbiAgICB0aGlzLmFkZFNsaWRlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWYXJpYWJsZXMocm9vdDogRWxlbWVudCwgc3RhdGU6IFNsaWRlck9wdGlvbnMpOiB2b2lkIHtcbiAgICBjb25zdCB7XG4gICAgICBpc1RpcCxcbiAgICAgIHZhbHVlRnJvbSxcbiAgICAgIHZhbHVlVG8sXG4gICAgICB0aHVtYlBlcmNlbnRGcm9tLFxuICAgICAgdGh1bWJQZXJjZW50VG8sXG4gICAgICBpc1Byb2dyZXNzLFxuICAgICAgaXNSYW5nZSxcbiAgICAgIHNjYWxlTWFwLFxuICAgICAgaXNWZXJ0aWNhbCxcbiAgICAgIHNjYWxlTWFya3MsXG4gICAgfSA9IHN0YXRlO1xuXG4gICAgaWYgKHRoaXMubnVtYmVyVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tID0gdGh1bWJQZXJjZW50RnJvbTtcbiAgICBpZiAodGh1bWJQZXJjZW50VG8pIHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudFRvID0gdGh1bWJQZXJjZW50VG87XG5cbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNUaXAgPSBpc1RpcCB8fCBmYWxzZTtcbiAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aXBWYWx1ZUZyb20gPSB2YWx1ZUZyb20gfHwgMDtcbiAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aXBWYWx1ZVRvID0gdmFsdWVUbyB8fCAwO1xuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1Byb2dyZXNzID0gaXNQcm9ncmVzcyB8fCBmYWxzZTtcbiAgICB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNSYW5nZSA9IGlzUmFuZ2UgfHwgZmFsc2U7XG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsIHx8IGZhbHNlO1xuICAgIHRoaXMuc2NhbGVNYXAgPSBzY2FsZU1hcDtcbiAgICB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNTY2FsZU1hcmtzID0gc2NhbGVNYXJrcztcblxuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgdGhpcy5kb20ucm9vdCA9IHJvb3Q7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUVsZW1lbnRzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkXG4gICAgICB8fCB0aGlzLm51bWJlclZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuZG9tLnNsaWRlciA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1ZlcnRpY2FsID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICBpZiAodGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICB0aGlzLmNsYXNzRWxlbWVudHMuc2xpZGVyQ29tcG9uZW50cyA9IG5ldyBTbGlkZXJDb21wb25lbnRzKFxuICAgICAgdGhpcy5kb20uc2xpZGVyLFxuICAgICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwsXG4gICAgKTtcblxuICAgIHRoaXMuY2xhc3NFbGVtZW50cy5zY2FsZSA9IG5ldyBTY2FsZSh0aGlzLmRvbS5zbGlkZXIsIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1ZlcnRpY2FsKTtcbiAgICB0aGlzLmRvbS5zY2FsZUVsZW1lbnQgPSB0aGlzLmNsYXNzRWxlbWVudHMuc2NhbGUuZ2V0U2NhbGUoKTtcbiAgICB0aGlzLnNldFRodW1iKCd2YWx1ZUZyb20nLCB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tKTtcblxuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNSYW5nZSAmJiB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRUbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnNldFRodW1iKCd2YWx1ZVRvJywgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNUaXApIHtcbiAgICAgIHRoaXMuc2V0VGlwKCd2YWx1ZUZyb20nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVGlwICYmIHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudFRvXG4gICAgICAmJiB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNSYW5nZSAmJiB0aGlzLm51bWJlclZhcmlhYmxlcy50aXBWYWx1ZVRvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuc2V0VGlwKCd2YWx1ZVRvJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuc2V0UHJvZ3Jlc3ModGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSwgMCwgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNjYWxlTWFwICYmIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1NjYWxlTWFya3MpIHtcbiAgICAgIHRoaXMuY2xhc3NFbGVtZW50cy5zY2FsZU1hcmtzID0gbmV3IFNjYWxlTWFya3MoXG4gICAgICAgIHRoaXMuZG9tLnNjYWxlRWxlbWVudCxcbiAgICAgICAgdGhpcy5zY2FsZU1hcCxcbiAgICAgICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU2xpZGVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuZG9tLnJvb3QgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmRvbS5zbGlkZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIHRoaXMuZG9tLnJvb3QuYXBwZW5kKHRoaXMuZG9tLnNsaWRlcik7XG4gIH1cblxuICBwcml2YXRlIGlzTmVlZERvdWJsZVRpcCgpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzID09PSB1bmRlZmluZWQgfHwgdGhpcy5udW1iZXJWYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRUbyA9PT0gdW5kZWZpbmVkXG4gICAgICB8fCB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNSYW5nZSA9PT0gdW5kZWZpbmVkXG4gICAgICB8fCB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tID09PSB1bmRlZmluZWRcbiAgICAgIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1RpcCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gKCh0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRUbyAtIHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudEZyb20gPD0gMilcbiAgICAgIHx8ICh0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRUbyA9PT0gMFxuICAgICAgICAmJiB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tID09PSAwKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVyO1xuIiwiaW1wb3J0IE9ic2VydmVyIGZyb20gJ1NyYy9PYnNlcnZlci9PYnNlcnZlcic7XG5pbXBvcnQgeyBTTElERVJfRVZFTlRTIH0gZnJvbSAnU3JjL09ic2VydmVyL2V2ZW50cyc7XG5pbXBvcnQgeyBTbGlkZXJPcHRpb25zIH0gZnJvbSAnU3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XG5pbXBvcnQgU2xpZGVyIGZyb20gJy4vc3ViVmlld3MvU2xpZGVyL1NsaWRlcic7XG5cbmNsYXNzIFZpZXcgZXh0ZW5kcyBPYnNlcnZlciB7XG4gIHByaXZhdGUgcm9vdD86IEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBzbGlkZXI/OiBTbGlkZXI7XG5cbiAgcHJvdGVjdGVkIGlzUmFuZ2U/OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHJvb3Q6IEVsZW1lbnQsIHByb3RlY3RlZCByZWFkb25seSBzdGF0ZTogU2xpZGVyT3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pbml0KHJvb3QsIHN0YXRlKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVTbGlkZXIoZGF0YTogU2xpZGVyT3B0aW9ucyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNsaWRlciA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgdGhpcy5zbGlkZXIuc2V0U3RhdGUoZGF0YSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKGRhdGE6IFNsaWRlck9wdGlvbnMsIGV2ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQgPT09IFNMSURFUl9FVkVOVFMuREFUQV9DT0xMRUNURUQpIHtcbiAgICAgIHRoaXMuZW1pdChTTElERVJfRVZFTlRTLlZBTFVFX0NIQU5HRUQsIGRhdGEpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQgPT09IFNMSURFUl9FVkVOVFMuVkFMVUVfQ0hBTkdFRCkge1xuICAgICAgdGhpcy51cGRhdGVTbGlkZXIoZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldFJvb3QoKTogRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMucm9vdDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRSb290KHJvb3Q6IEVsZW1lbnQpIHtcbiAgICB0aGlzLnJvb3QgPSByb290O1xuICB9XG5cbiAgcHVibGljIGdldFNsaWRlcigpOiBTbGlkZXIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNsaWRlcjtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTbGlkZXIoc2xpZGVyOiBTbGlkZXIpIHtcbiAgICB0aGlzLnNsaWRlciA9IHNsaWRlcjtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdChyb290OiBFbGVtZW50LCBzdGF0ZTogU2xpZGVyT3B0aW9ucyk6IHZvaWQge1xuICAgIGNvbnN0IHsgaXNSYW5nZSB9ID0gc3RhdGU7XG4gICAgdGhpcy5yb290ID0gcm9vdDtcbiAgICB0aGlzLmlzUmFuZ2UgPSBpc1JhbmdlO1xuICAgIHRoaXMuc2xpZGVyID0gbmV3IFNsaWRlcihyb290LCBzdGF0ZSk7XG4gICAgdGhpcy5hZGRTdWJzY3JpYmVTbGlkZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3Vic2NyaWJlU2xpZGVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNsaWRlciA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuc2xpZGVyLmNsYXNzRWxlbWVudHMudGh1bWJGcm9tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuc2xpZGVyLmNsYXNzRWxlbWVudHMudGh1bWJGcm9tLmFkZFN1YnNjcmliZXIoXG4gICAgICAgIFNMSURFUl9FVkVOVFMuVkFMVUVfU1RBUlRfQ0hBTkdFLFxuICAgICAgICB0aGlzLnNsaWRlcixcbiAgICAgICk7XG4gICAgICB0aGlzLnNsaWRlci5jbGFzc0VsZW1lbnRzLnRodW1iRnJvbS5hZGRTdWJzY3JpYmVyKFNMSURFUl9FVkVOVFMuS0VZX0RPV04sIHRoaXMuc2xpZGVyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1JhbmdlICYmIHRoaXMuc2xpZGVyLmNsYXNzRWxlbWVudHMudGh1bWJUbykge1xuICAgICAgdGhpcy5zbGlkZXIuY2xhc3NFbGVtZW50cy50aHVtYlRvLmFkZFN1YnNjcmliZXIoXG4gICAgICAgIFNMSURFUl9FVkVOVFMuVkFMVUVfU1RBUlRfQ0hBTkdFLFxuICAgICAgICB0aGlzLnNsaWRlcixcbiAgICAgICk7XG4gICAgICB0aGlzLnNsaWRlci5jbGFzc0VsZW1lbnRzLnRodW1iVG8uYWRkU3Vic2NyaWJlcihTTElERVJfRVZFTlRTLktFWV9ET1dOLCB0aGlzLnNsaWRlcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2xpZGVyLmNsYXNzRWxlbWVudHMuc2NhbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zbGlkZXIuY2xhc3NFbGVtZW50cy5zY2FsZS5hZGRTdWJzY3JpYmVyKFNMSURFUl9FVkVOVFMuU0NBTEVfQ0xJQ0tFRCwgdGhpcy5zbGlkZXIpO1xuICAgICAgaWYgKHRoaXMuc2xpZGVyLmJvb2xlYW5WYXJpYWJsZXMuaXNTY2FsZU1hcmtzXG4gICAgICAgICYmIHRoaXMuc2xpZGVyLmNsYXNzRWxlbWVudHMuc2NhbGVNYXJrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2xpZGVyLmNsYXNzRWxlbWVudHMuc2NhbGVNYXJrcy5hZGRTdWJzY3JpYmVyKFNMSURFUl9FVkVOVFMuTUFSS19DTElDS0VELCB0aGlzLnNsaWRlcik7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc2xpZGVyLmFkZFN1YnNjcmliZXIoU0xJREVSX0VWRU5UUy5TQ0FMRV9DTElDS0VELCB0aGlzKTtcbiAgICB0aGlzLnNsaWRlci5hZGRTdWJzY3JpYmVyKFNMSURFUl9FVkVOVFMuREFUQV9DT0xMRUNURUQsIHRoaXMpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZpZXc7XG4iLCJpbnRlcmZhY2UgTW9kZWxPcHRpb25zIHtcbiAgbWluOiBudW1iZXIsXG4gIG1heDogbnVtYmVyLFxuICB2YWx1ZUZyb206IG51bWJlcixcbiAgdmFsdWVUbzogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICB0aHVtYlBlcmNlbnRGcm9tOiBudW1iZXIsXG4gIHRodW1iUGVyY2VudFRvOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gIHN0ZXA6IG51bWJlcixcbiAgc2NhbGVNYXJrczogYm9vbGVhbixcbiAgc2NhbGVQZXJjZW50R2FwPzogbnVtYmVyLFxuICBpc1RpcDogYm9vbGVhbixcbiAgaXNQcm9ncmVzczogYm9vbGVhbixcbiAgaXNSYW5nZTogYm9vbGVhbixcbiAgaXNWZXJ0aWNhbDogYm9vbGVhbixcbn1cblxuaW50ZXJmYWNlIE1vZGVsSW5wdXRTdGF0ZSB7XG4gIG1pbjogbnVtYmVyLFxuICBtYXg6IG51bWJlcixcbiAgdmFsdWVGcm9tOiBudW1iZXIsXG4gIHZhbHVlVG86IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgc3RlcDogbnVtYmVyLFxuICBzY2FsZU1hcmtzOiBib29sZWFuLFxuICBzY2FsZVBlcmNlbnRHYXA/OiBudW1iZXIsXG4gIGlzVGlwOiBib29sZWFuLFxuICBpc1Byb2dyZXNzOiBib29sZWFuLFxuICBpc1JhbmdlOiBib29sZWFuLFxuICBpc1ZlcnRpY2FsOiBib29sZWFuXG59XG5cbmludGVyZmFjZSBTbGlkZXJPcHRpb25zIGV4dGVuZHMgTW9kZWxPcHRpb25zIHtcbiAgc2NhbGVNYXA/OiBNYXA8bnVtYmVyLCBudW1iZXI+XG59XG5cbnR5cGUgTW9kZWxWYWx1ZSA9ICdtaW4nIHwgJ21heCcgfCAndmFsdWVGcm9tJyB8ICdzdGVwJyB8ICd2YWx1ZVRvJyB8ICdzY2FsZU1hcmtzJyB8ICdzY2FsZVBlcmNlbnRHYXAnXG4gIHwgJ2lzVGlwJyB8ICdpc1Byb2dyZXNzJyB8ICdpc1JhbmdlJyB8ICdpc1ZlcnRpY2FsJztcbnR5cGUgVGh1bWJJZCA9ICd2YWx1ZUZyb20nIHwgJ3ZhbHVlVG8nXG50eXBlIFN0YXJ0UG9pbnQgPSAndG9wJyB8ICdsZWZ0JztcbnR5cGUgU2l6ZVBvaW50ID0gJ2hlaWdodCcgfCAnd2lkdGgnO1xuXG5jb25zdCBUaHVtYlZhbFBlcmNlbnQgPSB7XG4gIHZhbHVlRnJvbTogJ3RodW1iUGVyY2VudEZyb20nLFxuICB2YWx1ZVRvOiAndGh1bWJQZXJjZW50VG8nLFxufTtcblxuaW50ZXJmYWNlIEhhbmRsZWRNb3ZlTW9kZWwge1xuICB2YWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICB0aHVtYjogVGh1bWJJZCxcbiAgcGVyY2VudDogbnVtYmVyLFxufVxuXG5pbnRlcmZhY2UgSGFuZGxlZE1vdmVNb2RlbEZyb20ge1xuICB2YWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICB0aHVtYjogVGh1bWJJZCxcbiAgcGVyY2VudDogbnVtYmVyLFxufVxuXG5pbnRlcmZhY2UgSGFuZGxlZE1vdmVNb2RlbFRvIHtcbiAgdmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgdGh1bWI6IFRodW1iSWQsXG4gIHBlcmNlbnQ6IG51bWJlcixcbn1cblxudHlwZSBLZXlFdmVudCA9ICdkZWNyZW1lbnQnIHwgJ2luY3JlbWVudCc7XG5cbmludGVyZmFjZSBTbGlkZXJFdmVudFZhbENoYW5nZWREYXRhIHtcbiAgY29vcmRzTW92ZTogbnVtYmVyLFxuICB0aHVtYklkOiBUaHVtYklkLFxuICBpc1ZlcnRpY2FsOiBib29sZWFuLFxuICBrZXlFdmVudD86IEtleUV2ZW50LFxufVxuXG5pbnRlcmZhY2UgVmFsaWRTbGlkZXJEYXRhIHtcbiAgY29vcmRzTW92ZTogbnVtYmVyLFxuICBzY2FsZVNpemU6IG51bWJlcixcbiAgdGh1bWJJZD86IFRodW1iSWQsXG4gIGtleUV2ZW50PzogS2V5RXZlbnQsXG4gIHBlcmNlbnQ/OiBudW1iZXIsXG4gIHZhbHVlPzogbnVtYmVyLFxufVxuXG5pbnRlcmZhY2UgU2NhbGVDbGlja0RhdGEge1xuICBjbGlja1BvczogbnVtYmVyLFxuICBzY2FsZVNpemU6IG51bWJlcixcbn1cblxuaW50ZXJmYWNlIFByb2dyZXNzRGF0YSB7XG4gIHJvb3Q6IEVsZW1lbnQsXG4gIHBvc2l0aW9uU3RhcnQ6IG51bWJlcixcbiAgcG9zaXRpb25FbmQ6IG51bWJlcixcbiAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRpcERhdGEge1xuICByb290OiBIVE1MRGl2RWxlbWVudCxcbiAgcGVyY2VudFBvc2l0aW9uOiBudW1iZXIsXG4gIHZhbHVlVGlwOiBudW1iZXIgfCBzdHJpbmcsXG4gIGlzVmVydGljYWw6IGJvb2xlYW4sXG59XG5cbmludGVyZmFjZSBpc1ZhbHVlVGhlU2FtZVBvcyB7XG4gIHZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gIHZhbHVlQW5vdGhlclRodW1iOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gIHRodW1iUGVyY2VudDogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICB0aHVtYjogc3RyaW5nLFxuICBpZFZhbDogVGh1bWJJZDtcbn1cblxudHlwZSBTdGVwc01hcCA9IE1hcDxudW1iZXIsIG51bWJlcj47XG5cbmludGVyZmFjZSBUaHVtYkFyZ3Mge1xuICByb290OiBIVE1MRWxlbWVudCxcbiAgdGh1bWJQZXJjZW50OiBudW1iZXIsXG4gIGlkOiBUaHVtYklkLFxuICBpc1ZlcnRpY2FsOiBib29sZWFuLFxufVxuXG5pbnRlcmZhY2UgTW9kZWxTZXRWYWwge1xuICBoYWxmTW92ZTogbnVtYmVyLFxuICBoYWxmU3RlcDogbnVtYmVyLFxuICBuZWFyU3RlcFBlcmNlbnQ6IG51bWJlcixcbiAgdGh1bWI6IFRodW1iSWRcbn1cblxudHlwZSBNYXJrcyA9IE1hcDxudW1iZXIsIG51bWJlcj47XG5cbmV4cG9ydCB7XG4gIE1vZGVsT3B0aW9ucyxcbiAgTW9kZWxWYWx1ZSxcbiAgU2xpZGVyT3B0aW9ucyxcbiAgVmFsaWRTbGlkZXJEYXRhLFxuICBUaHVtYklkLFxuICBUaHVtYlZhbFBlcmNlbnQsXG4gIEhhbmRsZWRNb3ZlTW9kZWwsXG4gIEhhbmRsZWRNb3ZlTW9kZWxGcm9tLFxuICBIYW5kbGVkTW92ZU1vZGVsVG8sXG4gIFNsaWRlckV2ZW50VmFsQ2hhbmdlZERhdGEsXG4gIFByb2dyZXNzRGF0YSxcbiAgVGlwRGF0YSxcbiAgaXNWYWx1ZVRoZVNhbWVQb3MsXG4gIFN0ZXBzTWFwLFxuICBTdGFydFBvaW50LFxuICBTaXplUG9pbnQsXG4gIFRodW1iQXJncyxcbiAgU2NhbGVDbGlja0RhdGEsXG4gIE1vZGVsU2V0VmFsLFxuICBNb2RlbElucHV0U3RhdGUsXG4gIEtleUV2ZW50LFxuICBNYXJrcyxcbn07XG4iLCJpbXBvcnQge1xuICBNb2RlbE9wdGlvbnMsXG4gIE1vZGVsVmFsdWUsXG4gIFRodW1iSWQsXG4gIFRodW1iVmFsUGVyY2VudCxcbiAgSGFuZGxlZE1vdmVNb2RlbCxcbiAgSGFuZGxlZE1vdmVNb2RlbEZyb20sXG4gIEhhbmRsZWRNb3ZlTW9kZWxUbyxcbiAgaXNWYWx1ZVRoZVNhbWVQb3MsXG59IGZyb20gJ1NyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xuXG5jbGFzcyBNb2RlbCB7XG4gIHByaXZhdGUgc3RhdGU6IE1vZGVsT3B0aW9ucztcblxuICBwcml2YXRlIHN0ZXBQZXJjZW50PzogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBNb2RlbE9wdGlvbnMpIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBwdWJsaWMgc2V0U3RhdGUoc3RhdGU6IG9iamVjdCk6IHZvaWQge1xuICAgIGNvbnN0IG9sZFN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICB0aGlzLnN0YXRlID0geyAuLi5vbGRTdGF0ZSwgLi4uc3RhdGUgfTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGF0ZSgpOiBNb2RlbE9wdGlvbnMge1xuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZVN0YXRlTW92ZShtb3ZlZFRvOiBudW1iZXIsIHRodW1iOiBUaHVtYklkKTogdm9pZCB7XG4gICAgY29uc3QgdmFsdWVUaHVtYk9iamVjdCA9IHRoaXMuZmluZFN1aXRhYmxlUGVyY2VudChtb3ZlZFRvLCB0aHVtYik7XG4gICAgdGhpcy5oYW5kbGVNb3ZlKHZhbHVlVGh1bWJPYmplY3QpO1xuICB9XG5cbiAgcHVibGljIGdldFZhbHVlKHZhbDogTW9kZWxWYWx1ZSk6IG51bWJlciB8IHVuZGVmaW5lZCB8IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0YXRlW2Ake3ZhbH1gXTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRQZXJjZW50VmFsKCk6IG51bWJlciB7XG4gICAgY29uc3QgeyB2YWx1ZUZyb20sIG1pbiwgbWF4IH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHJhbmdlOiBudW1iZXIgPSBtYXggLSBtaW47XG4gICAgY29uc3QgcGVyY2VudCA9IE51bWJlcigoKHZhbHVlRnJvbSAvIHJhbmdlKSAqIDEwMCkudG9GaXhlZCgzKSk7XG4gICAgcmV0dXJuIHBlcmNlbnQ7XG4gIH1cblxuICBwcml2YXRlIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5zdGVwUGVyY2VudCA9IE51bWJlcigodGhpcy5zdGF0ZS5zdGVwIC8gdGhpcy5maW5kVmFsUGVyY2VudCgpKSk7XG4gIH1cblxuICBwcml2YXRlIGZpbmRTdWl0YWJsZVBlcmNlbnQocGVyY2VudE1vdmU6IG51bWJlciwgdGh1bWI6IFRodW1iSWQpOiBIYW5kbGVkTW92ZU1vZGVsIHtcbiAgICBjb25zdCB7XG4gICAgICBzdGVwLFxuICAgICAgbWF4LFxuICAgICAgbWluLFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgaWYgKHRoaXMuc3RlcFBlcmNlbnQgPT09IHVuZGVmaW5lZCkgdGhpcy5zdGVwUGVyY2VudCA9IDE7XG4gICAgY29uc3QgbmVhcmVzdFByZXZDb3VudFN0ZXAgPSBNYXRoLmZsb29yKHBlcmNlbnRNb3ZlIC8gdGhpcy5zdGVwUGVyY2VudCk7XG4gICAgY29uc3QgbmVhcmVzdE5leHRDb3VudFN0ZXAgPSBNYXRoLmNlaWwocGVyY2VudE1vdmUgLyB0aGlzLnN0ZXBQZXJjZW50KTtcblxuICAgIGNvbnN0IHByZXZTdGVwID0gbWluICsgKHN0ZXAgKiBuZWFyZXN0UHJldkNvdW50U3RlcCk7XG4gICAgY29uc3QgbmV4dFN0ZXAgPSBtaW4gKyAoc3RlcCAqIG5lYXJlc3ROZXh0Q291bnRTdGVwKTtcblxuICAgIGNvbnN0IHByZXZQZXJjZW50ID0gdGhpcy5zdGVwUGVyY2VudCAqIG5lYXJlc3RQcmV2Q291bnRTdGVwO1xuICAgIGNvbnN0IG5leHRQZXJjZW50ID0gdGhpcy5zdGVwUGVyY2VudCAqIG5lYXJlc3ROZXh0Q291bnRTdGVwO1xuXG4gICAgY29uc3QgaGFsZlN0ZXAgPSBOdW1iZXIoKHRoaXMuc3RlcFBlcmNlbnQgLyAyKS50b0ZpeGVkKDMpKTtcbiAgICBjb25zdCBoYWxmTW92ZSA9IE51bWJlcigocGVyY2VudE1vdmUgJSB0aGlzLnN0ZXBQZXJjZW50KS50b0ZpeGVkKDMpKTtcblxuICAgIGxldCB2YWx1ZTogbnVtYmVyO1xuICAgIGxldCBwZXJjZW50OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgICBpZiAoaGFsZk1vdmUgPCBoYWxmU3RlcCkge1xuICAgICAgdmFsdWUgPSBwcmV2U3RlcDtcbiAgICAgIHBlcmNlbnQgPSBwcmV2UGVyY2VudDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSBuZXh0U3RlcDtcbiAgICAgIHBlcmNlbnQgPSBuZXh0UGVyY2VudDtcbiAgICB9XG5cbiAgICBjb25zdCBhbGxTdGVwcyA9IE1hdGguY2VpbCgobWF4IC0gbWluKSAvIHN0ZXApO1xuICAgIGNvbnN0IGJlZm9yZUVuZFBlcmNlbnQgPSB0aGlzLnN0ZXBQZXJjZW50ICogKGFsbFN0ZXBzIC0gMSk7XG5cbiAgICBpZiAocGVyY2VudE1vdmUgPT09IDEwMCB8fCAxMDAgLSAoKDEwMCAtIGJlZm9yZUVuZFBlcmNlbnQpIC8gMikgPCBwZXJjZW50TW92ZSkge1xuICAgICAgdmFsdWUgPSBtYXg7XG4gICAgICBwZXJjZW50ID0gMTAwO1xuICAgIH1cbiAgICBpZiAocGVyY2VudCA9PT0gdW5kZWZpbmVkKSBwZXJjZW50ID0gdGhpcy5zdGVwUGVyY2VudCAqIG5lYXJlc3RQcmV2Q291bnRTdGVwO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlLFxuICAgICAgdGh1bWIsXG4gICAgICBwZXJjZW50LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZU1vdmUodmFsdWVzOiBIYW5kbGVkTW92ZU1vZGVsKTogdm9pZCB7XG4gICAgY29uc3Qge1xuICAgICAgdmFsdWUsXG4gICAgICB0aHVtYixcbiAgICAgIHBlcmNlbnQsXG4gICAgfSA9IHZhbHVlcztcblxuICAgIGlmICh0aHVtYiA9PT0gJ3ZhbHVlRnJvbScpIHtcbiAgICAgIHRoaXMuaGFuZGxlTW92ZUZyb20oe1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgdGh1bWIsXG4gICAgICAgIHBlcmNlbnQsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGh1bWIgPT09ICd2YWx1ZVRvJykge1xuICAgICAgdGhpcy5oYW5kbGVNb3ZlVG8oe1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgdGh1bWIsXG4gICAgICAgIHBlcmNlbnQsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZU1vdmVGcm9tKHZhbHVlczogSGFuZGxlZE1vdmVNb2RlbEZyb20pOiB2b2lkIHtcbiAgICBjb25zdCB7XG4gICAgICB2YWx1ZSxcbiAgICAgIHRodW1iLFxuICAgICAgcGVyY2VudCxcbiAgICB9ID0gdmFsdWVzO1xuXG4gICAgY29uc3Qge1xuICAgICAgdmFsdWVUbyxcbiAgICAgIHRodW1iUGVyY2VudFRvLFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgaWYgKHRoaXMuaXNWYWx1ZVRoZVNhbWVQb3Moe1xuICAgICAgdmFsdWUsXG4gICAgICB2YWx1ZUFub3RoZXJUaHVtYjogdmFsdWVUbyxcbiAgICAgIHRodW1iUGVyY2VudDogdGh1bWJQZXJjZW50VG8sXG4gICAgICB0aHVtYixcbiAgICAgIGlkVmFsOiAndmFsdWVGcm9tJyxcbiAgICB9KSAmJiB2YWx1ZVRvICE9PSB1bmRlZmluZWQgJiYgdGh1bWJQZXJjZW50VG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy51cGRhdGVNb3ZlZCh2YWx1ZVRvLCB0aHVtYlBlcmNlbnRUbywgdGh1bWIpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgdGhpcy51cGRhdGVNb3ZlZCh2YWx1ZSwgcGVyY2VudCwgdGh1bWIpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVNb3ZlVG8odmFsdWVzOiBIYW5kbGVkTW92ZU1vZGVsVG8pOiB2b2lkIHtcbiAgICBjb25zdCB7XG4gICAgICB2YWx1ZSxcbiAgICAgIHRodW1iLFxuICAgICAgcGVyY2VudCxcbiAgICB9ID0gdmFsdWVzO1xuXG4gICAgY29uc3Qge1xuICAgICAgdmFsdWVGcm9tLFxuICAgICAgdGh1bWJQZXJjZW50RnJvbSxcbiAgICB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGlmICh0aGlzLmlzVmFsdWVUaGVTYW1lUG9zKHtcbiAgICAgIHZhbHVlLFxuICAgICAgdmFsdWVBbm90aGVyVGh1bWI6IHZhbHVlRnJvbSxcbiAgICAgIHRodW1iUGVyY2VudDogdGh1bWJQZXJjZW50RnJvbSxcbiAgICAgIHRodW1iLFxuICAgICAgaWRWYWw6ICd2YWx1ZVRvJyxcbiAgICB9KSAmJiB2YWx1ZUZyb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy51cGRhdGVNb3ZlZCh2YWx1ZUZyb20sIHRodW1iUGVyY2VudEZyb20sIHRodW1iKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudXBkYXRlTW92ZWQodmFsdWUsIHBlcmNlbnQsIHRodW1iKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGlzVmFsdWVUaGVTYW1lUG9zKHZhbHVlczogaXNWYWx1ZVRoZVNhbWVQb3MpIHtcbiAgICBjb25zdCB7XG4gICAgICB2YWx1ZSxcbiAgICAgIHZhbHVlQW5vdGhlclRodW1iLFxuICAgICAgdGh1bWJQZXJjZW50LFxuICAgICAgdGh1bWIsXG4gICAgICBpZFZhbCxcbiAgICB9ID0gdmFsdWVzO1xuXG4gICAgY29uc3QgeyBpc1JhbmdlIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgY29uc3QgY2hlY2tWYWwgPSBpc1JhbmdlICYmIHRodW1iUGVyY2VudCAhPT0gdW5kZWZpbmVkICYmIHRodW1iID09PSBpZFZhbDtcbiAgICBsZXQgY29tcGFyZVZhbCA9IGZhbHNlO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlQW5vdGhlclRodW1iICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbXBhcmVWYWwgPSBpZFZhbCA9PT0gJ3ZhbHVlRnJvbScgPyB2YWx1ZSA+IHZhbHVlQW5vdGhlclRodW1iIDogdmFsdWUgPCB2YWx1ZUFub3RoZXJUaHVtYjtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hlY2tWYWwgJiYgY29tcGFyZVZhbDtcbiAgfVxuXG4gIHByaXZhdGUgZmluZFZhbFBlcmNlbnQoKTogbnVtYmVyIHtcbiAgICBjb25zdCByYW5nZSA9IHRoaXMuZmluZFJhbmdlKCk7XG4gICAgY29uc3QgcGVyY2VudCA9IHJhbmdlIC8gMTAwO1xuICAgIHJldHVybiBwZXJjZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kUmFuZ2UoKTogbnVtYmVyIHtcbiAgICBjb25zdCByYW5nZSA9IHRoaXMuc3RhdGUubWF4IC0gdGhpcy5zdGF0ZS5taW47XG4gICAgcmV0dXJuIHJhbmdlO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVNb3ZlZCh2YWw6IG51bWJlciwgcGVyY2VudDogbnVtYmVyLCB0aHVtYjogVGh1bWJJZCk6IHZvaWQge1xuICAgIGlmIChOdW1iZXIuaXNOYU4odmFsKSB8fCBwZXJjZW50ID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignU29tZXRoaW5nIHdyb25nIHdpdGggc2V0dGluZyBuZXcgdmFsdWVzJyk7XG4gICAgY29uc3QgdGh1bWJQZXJjZW50ID0gVGh1bWJWYWxQZXJjZW50W3RodW1iXTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgW3RodW1iXTogdmFsLFxuICAgICAgW3RodW1iUGVyY2VudF06IHBlcmNlbnQsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kZWw7XG4iLCJpbXBvcnQge1xuICBNb2RlbElucHV0U3RhdGUsXG4gIE1vZGVsT3B0aW9ucyxcbiAgU3RlcHNNYXAsXG4gIFRodW1iSWQsXG4gIFZhbGlkU2xpZGVyRGF0YSxcbn0gZnJvbSAnU3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XG5cbmNsYXNzIFZhbGlkYXRvciB7XG4gIHByaXZhdGUgREVGQVVMVF9HQVAgPSAyMDtcblxuICBib29sZWFuVmFyaWFibGVzOiB7XG4gICAgaXNUaXA6IGJvb2xlYW47XG4gICAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcbiAgICBpc1Byb2dyZXNzOiBib29sZWFuO1xuICAgIHNjYWxlTWFya3M6IGJvb2xlYW47XG4gICAgaXNSYW5nZTogYm9vbGVhbjtcbiAgfTtcblxuICBiYXNlUGFyYW1zOiB7XG4gICAgbWluOiBudW1iZXI7XG4gICAgbWF4OiBudW1iZXI7XG4gICAgdmFsdWVGcm9tOiBudW1iZXI7XG4gICAgdmFsdWVUbz86IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBzdGVwOiBudW1iZXJcbiAgICBzdGVwUGVyY2VudD86IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICB0aHVtYlBlcmNlbnRGcm9tPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIHRodW1iUGVyY2VudFRvPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICB9O1xuXG4gIHByaXZhdGUgcmVzdWx0T2JqZWN0PzogTW9kZWxPcHRpb25zO1xuXG4gIHByaXZhdGUgc2NhbGVQZXJjZW50R2FwOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgZGF0YTogTW9kZWxJbnB1dFN0YXRlKSB7XG4gICAgdGhpcy5iYXNlUGFyYW1zID0ge1xuICAgICAgbWluOiAwLFxuICAgICAgbWF4OiAxMDAsXG4gICAgICB2YWx1ZUZyb206IDAsXG4gICAgICBzdGVwOiAxLFxuICAgICAgdmFsdWVUbzogdW5kZWZpbmVkLFxuICAgICAgc3RlcFBlcmNlbnQ6IDEwLFxuICAgICAgdGh1bWJQZXJjZW50RnJvbTogdW5kZWZpbmVkLFxuICAgICAgdGh1bWJQZXJjZW50VG86IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzID0ge1xuICAgICAgaXNUaXA6IGZhbHNlLFxuICAgICAgaXNWZXJ0aWNhbDogZmFsc2UsXG4gICAgICBpc1Byb2dyZXNzOiBmYWxzZSxcbiAgICAgIHNjYWxlTWFya3M6IGZhbHNlLFxuICAgICAgaXNSYW5nZTogZmFsc2UsXG4gICAgfTtcblxuICAgIHRoaXMudmFsaWRhdGVEYXRhKGRhdGEpO1xuICB9XG5cbiAgcHVibGljIHZhbGlkYXRlRGF0YShkYXRhOiBNb2RlbElucHV0U3RhdGUpOiBNb2RlbE9wdGlvbnMge1xuICAgIGNvbnN0IHByZXZCb29sID0gdGhpcy5zZXRCb29sZWFucyhkYXRhKTtcbiAgICB0aGlzLnNldERhdGEoZGF0YSk7XG4gICAgdGhpcy5yZXN1bHRPYmplY3QgPSB7XG4gICAgICAuLi5kYXRhLCAuLi5wcmV2Qm9vbCwgdGh1bWJQZXJjZW50RnJvbTogMCwgdGh1bWJQZXJjZW50VG86IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgdGhpcy5jaGVja1JhbmdlKCk7XG4gICAgdGhpcy5jaGVja1N0ZXAoKTtcbiAgICB0aGlzLmNoZWNrVmFsdWVzKCk7XG4gICAgdGhpcy5jaGVja1BlcmNlbnRzKCk7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0T2JqZWN0O1xuICB9XG5cbiAgcHVibGljIHBlcmZvcm1Nb3ZlVG9QZXJjZW50KGRhdGE6IFZhbGlkU2xpZGVyRGF0YSk6IG51bWJlciB7XG4gICAgY29uc3Qge1xuICAgICAgY29vcmRzTW92ZSwgc2NhbGVTaXplLCBrZXlFdmVudCwgdGh1bWJJZCxcbiAgICB9ID0gZGF0YTtcblxuICAgIGlmIChrZXlFdmVudCAmJiB0aGlzLmJhc2VQYXJhbXMuc3RlcFBlcmNlbnQgIT09IHVuZGVmaW5lZFxuICAgICAgJiYgdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudEZyb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGtleUV2ZW50ID09PSAnaW5jcmVtZW50JyAmJiB0aHVtYklkID09PSAndmFsdWVGcm9tJykge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudEZyb20gKyB0aGlzLmJhc2VQYXJhbXMuc3RlcFBlcmNlbnQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChrZXlFdmVudCA9PT0gJ2RlY3JlbWVudCcgJiYgdGh1bWJJZCA9PT0gJ3ZhbHVlRnJvbScpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRGcm9tIC0gdGhpcy5iYXNlUGFyYW1zLnN0ZXBQZXJjZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5RXZlbnQgPT09ICdpbmNyZW1lbnQnICYmIHRodW1iSWQgPT09ICd2YWx1ZVRvJyAmJiB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50VG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvICsgdGhpcy5iYXNlUGFyYW1zLnN0ZXBQZXJjZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5RXZlbnQgPT09ICdkZWNyZW1lbnQnICYmIHRodW1iSWQgPT09ICd2YWx1ZVRvJyAmJiB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50VG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvIC0gdGhpcy5iYXNlUGFyYW1zLnN0ZXBQZXJjZW50O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29vcmRzTW92ZSA9PT0gdW5kZWZpbmVkIHx8IHNjYWxlU2l6ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IHBlcmNlbnQgPSBzY2FsZVNpemUgLyAxMDA7XG4gICAgbGV0IHBlcmNlbnRNb3ZlID0gTnVtYmVyKChjb29yZHNNb3ZlIC8gcGVyY2VudCkudG9GaXhlZCgyKSk7XG4gICAgaWYgKHBlcmNlbnRNb3ZlIDwgMCkgcGVyY2VudE1vdmUgPSAwO1xuICAgIGlmIChwZXJjZW50TW92ZSA+IDEwMCkgcGVyY2VudE1vdmUgPSAxMDA7XG4gICAgcmV0dXJuIHBlcmNlbnRNb3ZlO1xuICB9XG5cbiAgcHVibGljIHZhbGlkYXRlTWFya3Mob3B0aW9uczogeyBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIHN0ZXA6IG51bWJlciwgZ2FwOiBudW1iZXIgfSkge1xuICAgIGNvbnN0IHtcbiAgICAgIHN0ZXAsXG4gICAgICBtYXgsXG4gICAgICBtaW4sXG4gICAgICBnYXAsXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBtYXBTdGVwczogU3RlcHNNYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgdmFsaWRHYXAgPSB0aGlzLnZhbGlkYXRlR2FwKGdhcCk7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLmZpbmRSYW5nZSgpO1xuICAgIGNvbnN0IHBlcmNlbnQgPSByYW5nZSAvIDEwMDtcbiAgICBjb25zdCBzdGVwUGVyY2VudCA9IHN0ZXAgLyBwZXJjZW50O1xuICAgIGNvbnN0IHN0ZXBDb3VudEdhcCA9IHN0ZXAgKiBNYXRoLmNlaWwodmFsaWRHYXAgLyBzdGVwUGVyY2VudCk7XG4gICAgY29uc3QgcGVyY2VudENvdW50c0dhcCA9IE1hdGguY2VpbChzdGVwQ291bnRHYXAgLyBwZXJjZW50KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDEwMDsgaSArPSBwZXJjZW50Q291bnRzR2FwKSB7XG4gICAgICBpZiAoaSA8PSAoMTAwIC0gcGVyY2VudENvdW50c0dhcCkpIHtcbiAgICAgICAgY29uc3Qgc3RlcENvdW50ID0gTWF0aC5yb3VuZChpIC8gc3RlcFBlcmNlbnQpO1xuICAgICAgICBjb25zdCB2YWx1ZVN0ZXBzID0gc3RlcCAqIHN0ZXBDb3VudDtcbiAgICAgICAgY29uc3QgcGVyY2VudFNjYWxlID0gdmFsdWVTdGVwcyAvIHBlcmNlbnQ7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gbWluICsgdmFsdWVTdGVwcztcblxuICAgICAgICBtYXBTdGVwcy5zZXQodmFsdWUsIHBlcmNlbnRTY2FsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbWFwU3RlcHMuc2V0KG1heCwgMTAwKTtcbiAgICByZXR1cm4gbWFwU3RlcHM7XG4gIH1cblxuICBwdWJsaWMgdmFsaWRhdGVUaHVtYklkKG1vdmVkVG86IG51bWJlcik6IFRodW1iSWQge1xuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuICd2YWx1ZVRvJztcbiAgICBpZiAodGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudEZyb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuICd2YWx1ZVRvJztcbiAgICBpZiAoIXRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlKSByZXR1cm4gJ3ZhbHVlRnJvbSc7XG4gICAgaWYgKG1vdmVkVG8gPCB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50RnJvbSkgcmV0dXJuICd2YWx1ZUZyb20nO1xuICAgIGlmICh0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50VG8gIT09IHVuZGVmaW5lZCAmJiBtb3ZlZFRvID4gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvKSByZXR1cm4gJ3ZhbHVlVG8nO1xuXG4gICAgaWYgKG1vdmVkVG8gPiB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50RnJvbVxuICAgICAgJiYgdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvICE9PSB1bmRlZmluZWRcbiAgICAgICYmIG1vdmVkVG8gPCB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50VG8pIHtcbiAgICAgIGNvbnN0IGRpZmZGcm9tID0gbW92ZWRUbyAtIHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRGcm9tO1xuICAgICAgY29uc3QgZGlmZlRvID0gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvIC0gbW92ZWRUbztcblxuICAgICAgaWYgKGRpZmZGcm9tID09PSBkaWZmVG8gfHwgZGlmZkZyb20gPCBkaWZmVG8pIHJldHVybiAndmFsdWVGcm9tJztcbiAgICAgIGlmIChkaWZmRnJvbSA+IGRpZmZUbykgcmV0dXJuICd2YWx1ZVRvJztcbiAgICB9XG4gICAgcmV0dXJuICd2YWx1ZVRvJztcbiAgfVxuXG4gIHB1YmxpYyB2YWxpZGF0ZVBlcmNlbnQocGVyY2VudDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyLCBvbGRTdGF0ZTogTW9kZWxPcHRpb25zKSB7XG4gICAgY29uc3QgeyBpc1JhbmdlIH0gPSBvbGRTdGF0ZTtcblxuICAgIGlmICghaXNSYW5nZSkge1xuICAgICAgY29uc3QgbmV3RGF0ZSA9IHsgLi4ub2xkU3RhdGUsIHZhbHVlRnJvbTogdmFsdWUsIHRodW1iUGVyY2VudEZyb206IHBlcmNlbnQgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudmFsaWRhdGVEYXRhKG5ld0RhdGUpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBpZiAoaXNSYW5nZSAmJiBvbGRTdGF0ZS50aHVtYlBlcmNlbnRUbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCB7IHRodW1iUGVyY2VudEZyb20sIHRodW1iUGVyY2VudFRvIH0gPSBvbGRTdGF0ZTtcbiAgICAgIGxldCB0aHVtYlBlcmNlbnQgPSAndGh1bWJQZXJjZW50RnJvbSc7XG4gICAgICBsZXQgdGh1bWJWYWx1ZSA9ICd2YWx1ZUZyb20nO1xuXG4gICAgICBpZiAoTnVtYmVyKHBlcmNlbnQpID4gdGh1bWJQZXJjZW50VG8pIHtcbiAgICAgICAgdGh1bWJQZXJjZW50ID0gJ3RodW1iUGVyY2VudFRvJztcbiAgICAgICAgdGh1bWJWYWx1ZSA9ICd2YWx1ZVRvJztcbiAgICAgIH1cblxuICAgICAgaWYgKE51bWJlcihwZXJjZW50KSA+IHRodW1iUGVyY2VudEZyb20gJiYgTnVtYmVyKHBlcmNlbnQpIDwgdGh1bWJQZXJjZW50VG8pIHtcbiAgICAgICAgY29uc3QgZGlmZmVyZW50UGVyY2VudCA9IHRodW1iUGVyY2VudFRvIC0gdGh1bWJQZXJjZW50RnJvbTtcbiAgICAgICAgY29uc3QgcGVyY2VudFZhbHVlID0gcGVyY2VudCAtIHRodW1iUGVyY2VudEZyb207XG4gICAgICAgIGNvbnN0IG1pZGRsZSA9IGRpZmZlcmVudFBlcmNlbnQgLyAyO1xuXG4gICAgICAgIGlmIChwZXJjZW50VmFsdWUgPj0gbWlkZGxlKSB7XG4gICAgICAgICAgdGh1bWJQZXJjZW50ID0gJ3RodW1iUGVyY2VudFRvJztcbiAgICAgICAgICB0aHVtYlZhbHVlID0gJ3ZhbHVlVG8nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld0RhdGUgPSB7IC4uLm9sZFN0YXRlLCBbdGh1bWJWYWx1ZV06IHZhbHVlLCBbdGh1bWJQZXJjZW50XTogcGVyY2VudCB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy52YWxpZGF0ZURhdGEobmV3RGF0ZSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gb2xkU3RhdGU7XG4gIH1cblxuICBwcml2YXRlIHNldERhdGEoZGF0YTogTW9kZWxJbnB1dFN0YXRlKTogdm9pZCB7XG4gICAgY29uc3Qge1xuICAgICAgbWluLFxuICAgICAgbWF4LFxuICAgICAgdmFsdWVGcm9tLFxuICAgICAgc3RlcCxcbiAgICAgIHNjYWxlUGVyY2VudEdhcCxcbiAgICAgIHZhbHVlVG8sXG4gICAgfSA9IGRhdGE7XG5cbiAgICB0aGlzLmJhc2VQYXJhbXMubWluID0gbWluO1xuICAgIHRoaXMuYmFzZVBhcmFtcy5tYXggPSBtYXg7XG4gICAgdGhpcy5iYXNlUGFyYW1zLnZhbHVlRnJvbSA9IHZhbHVlRnJvbTtcbiAgICB0aGlzLmJhc2VQYXJhbXMuc3RlcCA9IHN0ZXA7XG4gICAgdGhpcy5zY2FsZVBlcmNlbnRHYXAgPSBzY2FsZVBlcmNlbnRHYXA7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnNjYWxlUGVyY2VudEdhcCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMuc2NhbGVQZXJjZW50R2FwICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhpcy5zY2FsZVBlcmNlbnRHYXAgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlICYmIHZhbHVlVG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5iYXNlUGFyYW1zLnZhbHVlVG8gPSB2YWx1ZVRvO1xuICAgIH1cblxuICAgIHRoaXMuYmFzZVBhcmFtcy5zdGVwUGVyY2VudCA9IHRoaXMuYmFzZVBhcmFtcy5zdGVwIC8gKHRoaXMuZmluZFJhbmdlKCkgLyAxMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRCb29sZWFucyhkYXRhOiBNb2RlbElucHV0U3RhdGUpOiBvYmplY3Qge1xuICAgIGNvbnN0IHtcbiAgICAgIGlzUmFuZ2UsXG4gICAgICBpc1RpcCxcbiAgICAgIGlzVmVydGljYWwsXG4gICAgICBpc1Byb2dyZXNzLFxuICAgICAgc2NhbGVNYXJrcyxcbiAgICB9ID0gZGF0YTtcblxuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHt9O1xuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlID0gdHlwZW9mIGlzUmFuZ2UgPT09ICdib29sZWFuJyA/IGlzUmFuZ2UgOiBmYWxzZTtcbiAgICB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNUaXAgPSB0eXBlb2YgaXNUaXAgPT09ICdib29sZWFuJyA/IGlzVGlwIDogZmFsc2U7XG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwgPSB0eXBlb2YgaXNWZXJ0aWNhbCA9PT0gJ2Jvb2xlYW4nID8gaXNWZXJ0aWNhbCA6IGZhbHNlO1xuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1Byb2dyZXNzID0gdHlwZW9mIGlzUHJvZ3Jlc3MgPT09ICdib29sZWFuJyA/IGlzUHJvZ3Jlc3MgOiBmYWxzZTtcbiAgICB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuc2NhbGVNYXJrcyA9IHR5cGVvZiBzY2FsZU1hcmtzID09PSAnYm9vbGVhbicgPyBzY2FsZU1hcmtzIDogZmFsc2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNSYW5nZTogdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UsXG4gICAgICBpc1RpcDogdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVGlwLFxuICAgICAgaXNWZXJ0aWNhbDogdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwsXG4gICAgICBpc1Byb2dyZXNzOiB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNQcm9ncmVzcyxcbiAgICAgIHNjYWxlTWFya3M6IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5zY2FsZU1hcmtzLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlR2FwKGJhc2lzUGVyY2VudDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBsZXQgcmVzdWx0ID0gYmFzaXNQZXJjZW50O1xuICAgIGlmIChyZXN1bHQgPCAwIHx8IHJlc3VsdCA+IDEwMCkgcmVzdWx0ID0gdGhpcy5ERUZBVUxUX0dBUDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1JhbmdlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnJlc3VsdE9iamVjdCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKE51bWJlci5pc05hTih0aGlzLmJhc2VQYXJhbXMubWluKSkgdGhpcy5iYXNlUGFyYW1zLm1pbiA9IDA7XG4gICAgaWYgKE51bWJlci5pc05hTih0aGlzLmJhc2VQYXJhbXMubWF4KSkgdGhpcy5iYXNlUGFyYW1zLm1heCA9IDEwO1xuICAgIGlmICh0aGlzLmJhc2VQYXJhbXMubWluID09PSB0aGlzLmJhc2VQYXJhbXMubWF4KSB7XG4gICAgICB0aGlzLmJhc2VQYXJhbXMubWF4ID0gdGhpcy5iYXNlUGFyYW1zLm1pbiArIHRoaXMuYmFzZVBhcmFtcy5zdGVwO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJhc2VQYXJhbXMubWluID4gdGhpcy5iYXNlUGFyYW1zLm1heCkge1xuICAgICAgW3RoaXMuYmFzZVBhcmFtcy5taW4sIHRoaXMuYmFzZVBhcmFtcy5tYXhdID0gW3RoaXMuYmFzZVBhcmFtcy5tYXgsIHRoaXMuYmFzZVBhcmFtcy5taW5dO1xuICAgIH1cbiAgICB0aGlzLnJlc3VsdE9iamVjdC5taW4gPSB0aGlzLmJhc2VQYXJhbXMubWluO1xuICAgIHRoaXMucmVzdWx0T2JqZWN0Lm1heCA9IHRoaXMuYmFzZVBhcmFtcy5tYXg7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrU3RlcCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5yZXN1bHRPYmplY3QgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmIChOdW1iZXIuaXNOYU4odGhpcy5iYXNlUGFyYW1zLnN0ZXApKSB0aGlzLmJhc2VQYXJhbXMuc3RlcCA9IDE7XG4gICAgY29uc3QgYWxsUmFuZ2UgPSB0aGlzLmZpbmRSYW5nZSgpO1xuXG4gICAgaWYgKHRoaXMuYmFzZVBhcmFtcy5zdGVwID4gYWxsUmFuZ2UpIHtcbiAgICAgIHRoaXMuYmFzZVBhcmFtcy5zdGVwID0gYWxsUmFuZ2U7XG4gICAgfVxuICAgIGlmICh0aGlzLmJhc2VQYXJhbXMuc3RlcCA8IDAuMDAxKSB0aGlzLmJhc2VQYXJhbXMuc3RlcCA9IDAuMDAxO1xuICAgIGlmICghdGhpcy5iYXNlUGFyYW1zLnN0ZXApIHRoaXMuYmFzZVBhcmFtcy5zdGVwID0gMTtcbiAgICB0aGlzLnJlc3VsdE9iamVjdC5zdGVwID0gdGhpcy5iYXNlUGFyYW1zLnN0ZXA7XG4gIH1cblxuICBwcml2YXRlIGZpbmRSYW5nZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYmFzZVBhcmFtcy5tYXggLSB0aGlzLmJhc2VQYXJhbXMubWluO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrVmFsdWVzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIHRoaXMuYmFzZVBhcmFtcy52YWx1ZUZyb20gPSB0aGlzLmNoZWNrVmFsdWUodGhpcy5iYXNlUGFyYW1zLnZhbHVlRnJvbSk7XG5cbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UgJiYgdGhpcy5iYXNlUGFyYW1zLnZhbHVlVG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5iYXNlUGFyYW1zLnZhbHVlVG8gPSB0aGlzLmNoZWNrVmFsdWUodGhpcy5iYXNlUGFyYW1zLnZhbHVlVG8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJhc2VQYXJhbXMudmFsdWVUbyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuYmFzZVBhcmFtcy52YWx1ZUZyb20gPiB0aGlzLmJhc2VQYXJhbXMudmFsdWVUb1xuICAgICAgJiYgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UpIHtcbiAgICAgIFt0aGlzLmJhc2VQYXJhbXMudmFsdWVGcm9tLFxuICAgICAgdGhpcy5iYXNlUGFyYW1zLnZhbHVlVG9dID0gW3RoaXMuYmFzZVBhcmFtcy52YWx1ZVRvLCB0aGlzLmJhc2VQYXJhbXMudmFsdWVGcm9tXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZXN1bHRPYmplY3QgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIHRoaXMucmVzdWx0T2JqZWN0LnZhbHVlRnJvbSA9IHRoaXMuYmFzZVBhcmFtcy52YWx1ZUZyb207XG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlKSB0aGlzLnJlc3VsdE9iamVjdC52YWx1ZVRvID0gdGhpcy5iYXNlUGFyYW1zLnZhbHVlVG87XG4gIH1cblxuICBwcml2YXRlIGNoZWNrVmFsdWUodmFsdWU6IG51bWJlcik6IG51bWJlciB7XG4gICAgbGV0IHJlc3VsdCA9IHZhbHVlO1xuICAgIGlmIChOdW1iZXIuaXNOYU4ocmVzdWx0KSkgcmVzdWx0ID0gMDtcbiAgICBpZiAocmVzdWx0ID09PSB0aGlzLmJhc2VQYXJhbXMubWF4KSB7XG4gICAgICByZXN1bHQgPSB0aGlzLmJhc2VQYXJhbXMubWF4O1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ICUgdGhpcy5iYXNlUGFyYW1zLnN0ZXAgIT09IDAgJiYgcmVzdWx0ICE9PSB0aGlzLmJhc2VQYXJhbXMubWluKSB7XG4gICAgICBjb25zdCBjb3VudFN0ZXAgPSBNYXRoLnJvdW5kKChyZXN1bHQgLSB0aGlzLmJhc2VQYXJhbXMubWluKSAvIHRoaXMuYmFzZVBhcmFtcy5zdGVwKTtcbiAgICAgIGNvbnN0IGNvdW50VmFsID0gdGhpcy5iYXNlUGFyYW1zLm1pbiArICh0aGlzLmJhc2VQYXJhbXMuc3RlcCAqIGNvdW50U3RlcCk7XG4gICAgICByZXN1bHQgPSBjb3VudFZhbDtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ID4gdGhpcy5iYXNlUGFyYW1zLm1heCkge1xuICAgICAgcmVzdWx0ID0gdGhpcy5iYXNlUGFyYW1zLm1heDtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0IDwgdGhpcy5iYXNlUGFyYW1zLm1pbikge1xuICAgICAgcmVzdWx0ID0gdGhpcy5iYXNlUGFyYW1zLm1pbjtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1BlcmNlbnRzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnJlc3VsdE9iamVjdCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudEZyb20gPSB0aGlzLmNoZWNrUGVyY2VudCgndmFsdWVGcm9tJyk7XG4gICAgdGhpcy5yZXN1bHRPYmplY3QudGh1bWJQZXJjZW50RnJvbSA9IHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRGcm9tO1xuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNSYW5nZSkge1xuICAgICAgdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvID0gdGhpcy5jaGVja1BlcmNlbnQoJ3ZhbHVlVG8nKTtcbiAgICAgIHRoaXMucmVzdWx0T2JqZWN0LnRodW1iUGVyY2VudFRvID0gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tQZXJjZW50KHZhbHVlOiBUaHVtYklkID0gJ3ZhbHVlRnJvbScpOiBudW1iZXIge1xuICAgIGNvbnN0IHZhcmlhYmxlID0gdGhpcy5iYXNlUGFyYW1zW3ZhbHVlXTtcbiAgICBpZiAodmFyaWFibGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIDA7XG4gICAgY29uc3QgdmFsdWVPZlJhbmdlID0gdmFyaWFibGUgLSB0aGlzLmJhc2VQYXJhbXMubWluO1xuICAgIGNvbnN0IGN1cnJlbnRQZXJjZW50ID0gTnVtYmVyKCh2YWx1ZU9mUmFuZ2UgLyAodGhpcy5maW5kUmFuZ2UoKSAvIDEwMCkpLnRvRml4ZWQoMykpO1xuICAgIHJldHVybiBjdXJyZW50UGVyY2VudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBWYWxpZGF0b3I7XG4iLCJpbXBvcnQgT2JzZXJ2ZXIgZnJvbSAnU3JjL09ic2VydmVyL09ic2VydmVyJztcbmltcG9ydCB7IE1PREVMX0VWRU5UUyB9IGZyb20gJ1NyYy9PYnNlcnZlci9ldmVudHMnO1xuaW1wb3J0IHtcbiAgTW9kZWxJbnB1dFN0YXRlLFxuICBNb2RlbE9wdGlvbnMsXG4gIE1vZGVsVmFsdWUsXG4gIFNsaWRlck9wdGlvbnMsXG4gIFN0ZXBzTWFwLFxuICBWYWxpZFNsaWRlckRhdGEsXG59IGZyb20gJ1NyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xuaW1wb3J0IE1vZGVsIGZyb20gJy4vTW9kZWwnO1xuaW1wb3J0IFZhbGlkYXRvciBmcm9tICcuL1ZhbGlkYXRvcic7XG5cbmNsYXNzIE1vZGVsRmFjYWRlIGV4dGVuZHMgT2JzZXJ2ZXIge1xuICBwcml2YXRlIG1vZGVsOiBNb2RlbDtcblxuICBwcml2YXRlIHZhbGlkYXRvcjogVmFsaWRhdG9yO1xuXG4gIHByaXZhdGUgdmFsaWRTdGF0ZTogTW9kZWxPcHRpb25zO1xuXG4gIHByaXZhdGUgcHJldk1vdmU/OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3Ioc3RhdGU6IE1vZGVsSW5wdXRTdGF0ZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy52YWxpZGF0b3IgPSBuZXcgVmFsaWRhdG9yKHN0YXRlKTtcbiAgICB0aGlzLnZhbGlkU3RhdGUgPSB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZURhdGEoc3RhdGUpO1xuICAgIHRoaXMubW9kZWwgPSBuZXcgTW9kZWwodGhpcy52YWxpZFN0YXRlKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTdGF0ZShzdGF0ZTogTW9kZWxJbnB1dFN0YXRlKTogdm9pZCB7XG4gICAgY29uc3QgdmFsaWRTdGF0ZSA9IHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlRGF0YShzdGF0ZSk7XG4gICAgdGhpcy5tb2RlbC5zZXRTdGF0ZSh2YWxpZFN0YXRlKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGF0ZSgpOiBTbGlkZXJPcHRpb25zIHtcbiAgICBpZiAodGhpcy5tb2RlbC5nZXRTdGF0ZSgpLnNjYWxlTWFya3MpIHtcbiAgICAgIGNvbnN0IHNsaWRlck1hcmtzID0gdGhpcy52YWxpZEdhcE1hcmtzKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi50aGlzLm1vZGVsLmdldFN0YXRlKCksXG4gICAgICAgIHNjYWxlTWFwOiBzbGlkZXJNYXJrcyxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1vZGVsLmdldFN0YXRlKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TW9kZWwoKTogTW9kZWwge1xuICAgIHJldHVybiB0aGlzLm1vZGVsO1xuICB9XG5cbiAgcHVibGljIGdldFZhbGlkYXRvcigpOiBWYWxpZGF0b3Ige1xuICAgIHJldHVybiB0aGlzLnZhbGlkYXRvcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRWYWx1ZSh2YWx1ZTogTW9kZWxWYWx1ZSkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsLmdldFN0YXRlKClbYCR7dmFsdWV9YF07XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKGRhdGE6IFZhbGlkU2xpZGVyRGF0YSk6IHZvaWQge1xuICAgIGNvbnN0IHR5cGVEYXRhOiAnc2NhbGVNb3ZlJyB8ICdtYXJrTW92ZScgPSBkYXRhLnBlcmNlbnQgPT09IHVuZGVmaW5lZCA/ICdzY2FsZU1vdmUnIDogJ21hcmtNb3ZlJztcblxuICAgIGlmICh0eXBlRGF0YSA9PT0gJ3NjYWxlTW92ZScpIHtcbiAgICAgIGNvbnN0IG1vdmVkVG8gPSB0aGlzLnZhbGlkYXRvci5wZXJmb3JtTW92ZVRvUGVyY2VudChkYXRhKTtcbiAgICAgIGxldCB7IHRodW1iSWQgfSA9IGRhdGE7XG4gICAgICBpZiAodGh1bWJJZCA9PT0gdW5kZWZpbmVkKSB0aHVtYklkID0gdGhpcy52YWxpZGF0b3IudmFsaWRhdGVUaHVtYklkKG1vdmVkVG8pO1xuICAgICAgaWYgKG1vdmVkVG8gPT09IHRoaXMucHJldk1vdmUpIHJldHVybjtcblxuICAgICAgdGhpcy5wcmV2TW92ZSA9IG1vdmVkVG87XG4gICAgICB0aGlzLm1vZGVsLnVwZGF0ZVN0YXRlTW92ZShtb3ZlZFRvLCB0aHVtYklkKTtcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gdGhpcy5tb2RlbC5nZXRTdGF0ZSgpO1xuICAgICAgY29uc3QgdmFsaWRTdGF0ZSA9IHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlRGF0YShuZXdTdGF0ZSk7XG4gICAgICB0aGlzLm1vZGVsLnNldFN0YXRlKHZhbGlkU3RhdGUpO1xuXG4gICAgICBpZiAobmV3U3RhdGUuc2NhbGVNYXJrcykge1xuICAgICAgICB0aGlzLmVtaXQoTU9ERUxfRVZFTlRTLlZBTFVFX0NIQU5HRUQsIHtcbiAgICAgICAgICAuLi50aGlzLm1vZGVsLmdldFN0YXRlKCksXG4gICAgICAgICAgc2NhbGVNYXA6IHRoaXMudmFsaWRHYXBNYXJrcygpLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZW1pdChNT0RFTF9FVkVOVFMuVkFMVUVfQ0hBTkdFRCwgdGhpcy5tb2RlbC5nZXRTdGF0ZSgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5wZXJjZW50ICE9PSB1bmRlZmluZWQgJiYgZGF0YS52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVEYXRhID09PSAnbWFya01vdmUnKSB7XG4gICAgICBjb25zdCB7IHBlcmNlbnQsIHZhbHVlIH0gPSBkYXRhO1xuICAgICAgY29uc3Qgb2xkU3RhdGUgPSB0aGlzLm1vZGVsLmdldFN0YXRlKCk7XG4gICAgICBjb25zdCBwZXJmb3JtZWREYXRhID0gdGhpcy52YWxpZGF0b3IudmFsaWRhdGVQZXJjZW50KHBlcmNlbnQsIHZhbHVlLCBvbGRTdGF0ZSk7XG4gICAgICB0aGlzLm1vZGVsLnNldFN0YXRlKHBlcmZvcm1lZERhdGEpO1xuICAgICAgdGhpcy5lbWl0KE1PREVMX0VWRU5UUy5WQUxVRV9DSEFOR0VELCB0aGlzLm1vZGVsLmdldFN0YXRlKCkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZXRWYWx1ZShwYXJhbTogTW9kZWxWYWx1ZSwgdmFsdWU6IG51bWJlciB8IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMubW9kZWwuZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBuZXdTdGF0ZSA9IHsgLi4ub2xkU3RhdGUsIFtwYXJhbV06IHZhbHVlIH07XG4gICAgY29uc3QgdmFsaWRTdGF0ZSA9IHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlRGF0YShuZXdTdGF0ZSk7XG4gICAgdGhpcy5tb2RlbC5zZXRTdGF0ZSh2YWxpZFN0YXRlKTtcbiAgICB0aGlzLmVtaXQoTU9ERUxfRVZFTlRTLlZBTFVFX0NIQU5HRUQsIHRoaXMubW9kZWwuZ2V0U3RhdGUoKSk7XG4gIH1cblxuICBwdWJsaWMgdmFsaWRHYXBNYXJrcygpOiBTdGVwc01hcCB7XG4gICAgY29uc3QgZ2FwID0gdGhpcy5tb2RlbC5nZXRTdGF0ZSgpLnNjYWxlUGVyY2VudEdhcCB8fCAyMDtcbiAgICBjb25zdCB7IG1pbiwgbWF4LCBzdGVwIH0gPSB0aGlzLm1vZGVsLmdldFN0YXRlKCk7XG4gICAgY29uc3Qgc2xpZGVyTWFya3MgPSB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZU1hcmtzKHtcbiAgICAgIG1pbiwgbWF4LCBzdGVwLCBnYXAsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2xpZGVyTWFya3M7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kZWxGYWNhZGU7XG4iLCJpbXBvcnQgeyBNT0RFTF9FVkVOVFMsIFNMSURFUl9FVkVOVFMgfSBmcm9tICdTcmMvT2JzZXJ2ZXIvZXZlbnRzJztcbmltcG9ydCBPYnNlcnZlciBmcm9tICdTcmMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuaW1wb3J0IHsgTW9kZWxJbnB1dFN0YXRlLCBNb2RlbFZhbHVlLCBTbGlkZXJPcHRpb25zIH0gZnJvbSAnU3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XG5pbXBvcnQgVmlldyBmcm9tICcuLi9WaWV3L1ZpZXcnO1xuaW1wb3J0IE1vZGVsRmFjYWRlIGZyb20gJy4uL01vZGVsL01vZGVsRmFjYWRlJztcblxuY2xhc3MgUHJlc2VudGVyIGV4dGVuZHMgT2JzZXJ2ZXIge1xuICBwcml2YXRlIG1vZGVsRmFjYWRlOiBNb2RlbEZhY2FkZTtcblxuICBwcml2YXRlIHZpZXc6IFZpZXc7XG5cbiAgY29uc3RydWN0b3Iocm9vdDogSFRNTEVsZW1lbnQsIHN0YXRlOiBNb2RlbElucHV0U3RhdGUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubW9kZWxGYWNhZGUgPSBuZXcgTW9kZWxGYWNhZGUoc3RhdGUpO1xuICAgIHRoaXMudmlldyA9IG5ldyBWaWV3KHJvb3QsIHRoaXMubW9kZWxGYWNhZGUuZ2V0U3RhdGUoKSk7XG4gICAgdGhpcy5zdWJzY3JpYmVNb2RlbCgpO1xuICAgIHRoaXMuc3Vic2NyaWJlU2xpZGVyKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3RhdGUoKTogU2xpZGVyT3B0aW9ucyB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWxGYWNhZGUuZ2V0U3RhdGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTdGF0ZShzdGF0ZTogTW9kZWxJbnB1dFN0YXRlKTogdm9pZCB7XG4gICAgdGhpcy5tb2RlbEZhY2FkZS5zZXRTdGF0ZShzdGF0ZSk7XG4gIH1cblxuICBwdWJsaWMgc2V0VmFsdWUocGFyYW06IE1vZGVsVmFsdWUsIHZhbHVlOiBudW1iZXIgfCBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5tb2RlbEZhY2FkZS5zZXRWYWx1ZShwYXJhbSwgdmFsdWUpO1xuICB9XG5cbiAgcHVibGljIGdldFZhbHVlKHBhcmFtOiBNb2RlbFZhbHVlKTogbnVtYmVyIHwgYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWxGYWNhZGUuZ2V0VmFsdWUocGFyYW0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVTbGlkZXIoKTogdm9pZCB7XG4gICAgdGhpcy52aWV3LmFkZFN1YnNjcmliZXIoU0xJREVSX0VWRU5UUy5WQUxVRV9DSEFOR0VELCB0aGlzLm1vZGVsRmFjYWRlKTtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlTW9kZWwoKTogdm9pZCB7XG4gICAgdGhpcy5tb2RlbEZhY2FkZS5hZGRTdWJzY3JpYmVyKE1PREVMX0VWRU5UUy5WQUxVRV9DSEFOR0VELCB0aGlzLnZpZXcpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByZXNlbnRlcjtcbiIsImNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgbWluOiAwLFxuICBtYXg6IDEwMCxcbiAgdmFsdWVGcm9tOiAwLFxuICB2YWx1ZVRvOiAwLFxuICBzdGVwOiAxLFxuICBzY2FsZVBlcmNlbnRHYXA6IDEwLFxuICBzY2FsZU1hcmtzOiBmYWxzZSxcbiAgaXNUaXA6IGZhbHNlLFxuICBpc1Byb2dyZXNzOiBmYWxzZSxcbiAgaXNSYW5nZTogZmFsc2UsXG4gIGlzVmVydGljYWw6IGZhbHNlLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5pdGlhbFN0YXRlO1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBQcmVzZW50ZXIgZnJvbSAnLi9jb21wb25lbnRzL1ByZXNlbnRlci9QcmVzZW50ZXInO1xuaW1wb3J0IGluaXRpYWxTdGF0ZSBmcm9tICcuL3N0YXRlJztcblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSlF1ZXJ5IHtcbiAgICBzbGlkZXJQbHVnaW4ob3B0aW9uczogb2JqZWN0KTogUHJlc2VudGVyXG4gIH1cbn1cblxuJC5mbi5zbGlkZXJQbHVnaW4gPSBmdW5jdGlvbiBzbGlkZXJQbHVnaW4ob3B0aW9uczogb2JqZWN0KTogUHJlc2VudGVyIHtcbiAgY29uc3Qgc3RhdGUgPSB7IC4uLmluaXRpYWxTdGF0ZSwgLi4ub3B0aW9ucyB9O1xuICBjb25zdCBzbGlkZXIgPSBuZXcgUHJlc2VudGVyKHRoaXNbMF0sIHN0YXRlKTtcbiAgcmV0dXJuIHNsaWRlcjtcbn07XG4iXSwibmFtZXMiOlsiTU9ERUxfRVZFTlRTIiwiU0xJREVSX0VWRU5UUyIsImNvbnN0cnVjdG9yIiwib2JzZXJ2ZXJzIiwiYWRkU3Vic2NyaWJlciIsImV2ZW50Iiwib2JzZXJ2ZXIiLCJ0aGlzIiwia2V5cyIsInJlbW92ZVN1YnNjcmliZXIiLCJmaWx0ZXIiLCJvYnMiLCJlbWl0IiwiZGF0YSIsImZvckVhY2giLCJ1cGRhdGUiLCJPYnNlcnZlciIsInJvb3QiLCJpc1ZlcnRpY2FsIiwic3VwZXIiLCJkaXJlY3Rpb24iLCJzdGFydFBvaW50Iiwic2l6ZSIsIm1vZCIsImNsYXNzTmFtZSIsImVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwZXJmb3JtUG9pbnRlck1vdmUiLCJ0aHVtYlBvcyIsImlkIiwiaGFuZGxlVGh1bWJQb2ludGVyTW92ZSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImVsZW1TaXplIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibmV3UG9zIiwiY29vcmRzTW92ZSIsInRodW1iSWQiLCJoYW5kbGVUaHVtYlBvaW50ZXJVcCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwicGVyZm9ybVRvdWNoTW92ZSIsImhhbmRsZVRodW1iVG91Y2hNb3ZlIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwidG91Y2hlcyIsImhhbmRsZVRodW1iVG91Y2hFbmQiLCJwZXJmb3JtS2V5RG93biIsImtleUV2ZW50IiwicGVyZm9ybUNsaWNrTWFyayIsInBlcmNlbnQiLCJ2YWx1ZSIsIlNsaWRlckNvbXBvbmVudHMiLCJwb3NpdGlvblN0YXJ0IiwicG9zaXRpb25FbmQiLCJwcm9ncmVzcyIsInNldFByb2dyZXNzIiwic3R5bGUiLCJhcHBlbmQiLCJzZXRQcm9ncmVzc1Bvc2l0aW9uIiwic2NhbGUiLCJoYW5kbGVTY2FsZVBvaW50ZXJEb3duIiwiYmluZCIsImluaXQiLCJnZXRTY2FsZSIsImNsYXNzTGlzdCIsImFkZCIsImFkZFNjYWxlIiwiYWRkTGlzdGVuZXJzIiwidGFyZ2V0IiwiY2xvc2VzdCIsImNvbnRhaW5zIiwic2NhbGVTaXplIiwic2NhbGVTdGFydCIsImVtaXREYXRhIiwibWFya3MiLCJoYW5kbGVSb290Q2xpY2siLCJjcmVhdGVNYXJrcyIsImRhdGFzZXQiLCJ1bmRlZmluZWQiLCJOdW1iZXIiLCJjcmVhdGVNYXJrIiwibWFyayIsIm1hcmtWYWx1ZSIsImlubmVyVGV4dCIsInZhbHVlcyIsInRodW1iUGVyY2VudCIsImhhbmRsZVRodW1iUG9pbnRlckRvd24iLCJoYW5kbGVUaHVtYktleURvd24iLCJoYW5kbGVUaHVtYlRvdWNoIiwidGh1bWJFbGVtZW50IiwidGFiSW5kZXgiLCJzZXRQb3NpdGlvbiIsImNoZWNrWkluZCIsImdldFRodW1iIiwiZ2V0VGh1bWJJZCIsInpJbmRleCIsInNpemVFbGVtZW50IiwibW92ZWQiLCJrZXkiLCJwZXJjZW50UG9zaXRpb24iLCJ2YWx1ZVRpcCIsInRpcCIsImNyZWF0ZVRpcCIsImFkZFRpcCIsInNldFZhbHVlVGlwIiwiaGlkZVRpcCIsImRpc3BsYXkiLCJzaG93VGlwIiwiU2xpZGVyIiwic3RhdGUiLCJkb20iLCJzbGlkZXIiLCJzY2FsZUVsZW1lbnQiLCJudW1iZXJWYXJpYWJsZXMiLCJ0aXBWYWx1ZUZyb20iLCJ0aHVtYlBlcmNlbnRGcm9tIiwidGh1bWJQZXJjZW50VG8iLCJ0aXBWYWx1ZVRvIiwiYm9vbGVhblZhcmlhYmxlcyIsImlzUHJvZ3Jlc3MiLCJpc1JhbmdlIiwiaXNUaXAiLCJpc1NjYWxlTWFya3MiLCJjbGFzc0VsZW1lbnRzIiwidGh1bWJGcm9tIiwidGh1bWJUbyIsInNjYWxlTWFya3MiLCJ0aXBGcm9tIiwidGlwVG8iLCJzbGlkZXJDb21wb25lbnRzIiwiY3JlYXRlVmFyaWFibGVzIiwic2V0U3RhdGUiLCJzbGlkZXJXcmFwcGVyIiwic2xpZGVyRGF0YSIsInZhbHVlRnJvbSIsInZhbHVlVG8iLCJzZXRUaHVtYnMiLCJzZXRUaXBzIiwicXVlcnlTZWxlY3RvciIsInNldFRodW1iIiwidGh1bWIiLCJUaHVtYiIsImlzTmVlZERvdWJsZVRpcCIsIl9hIiwiX2IiLCJfYyIsInNldFRpcCIsInZhbHVlRGlyZWN0aW9uIiwidGlwVmFsdWUiLCJUaXAiLCJQcm9ncmVzcyIsImNyZWF0ZVNsaWRlciIsImNyZWF0ZUVsZW1lbnRzIiwiYWRkU2xpZGVyIiwic2NhbGVNYXAiLCJTY2FsZSIsIlNjYWxlTWFya3MiLCJ1cGRhdGVTbGlkZXIiLCJnZXRSb290Iiwic2V0Um9vdCIsImdldFNsaWRlciIsInNldFNsaWRlciIsImFkZFN1YnNjcmliZVNsaWRlciIsIlRodW1iVmFsUGVyY2VudCIsIm9sZFN0YXRlIiwiT2JqZWN0IiwiZ2V0U3RhdGUiLCJ1cGRhdGVTdGF0ZU1vdmUiLCJtb3ZlZFRvIiwidmFsdWVUaHVtYk9iamVjdCIsImZpbmRTdWl0YWJsZVBlcmNlbnQiLCJoYW5kbGVNb3ZlIiwiZ2V0VmFsdWUiLCJ2YWwiLCJnZXRQZXJjZW50VmFsIiwibWluIiwibWF4IiwidG9GaXhlZCIsInN0ZXBQZXJjZW50Iiwic3RlcCIsImZpbmRWYWxQZXJjZW50IiwicGVyY2VudE1vdmUiLCJuZWFyZXN0UHJldkNvdW50U3RlcCIsIk1hdGgiLCJmbG9vciIsIm5lYXJlc3ROZXh0Q291bnRTdGVwIiwiY2VpbCIsInByZXZTdGVwIiwibmV4dFN0ZXAiLCJwcmV2UGVyY2VudCIsIm5leHRQZXJjZW50IiwiaGFsZlN0ZXAiLCJhbGxTdGVwcyIsImJlZm9yZUVuZFBlcmNlbnQiLCJoYW5kbGVNb3ZlRnJvbSIsImhhbmRsZU1vdmVUbyIsImlzVmFsdWVUaGVTYW1lUG9zIiwidmFsdWVBbm90aGVyVGh1bWIiLCJpZFZhbCIsInVwZGF0ZU1vdmVkIiwiY29tcGFyZVZhbCIsImZpbmRSYW5nZSIsImlzTmFOIiwiRXJyb3IiLCJERUZBVUxUX0dBUCIsImJhc2VQYXJhbXMiLCJ2YWxpZGF0ZURhdGEiLCJwcmV2Qm9vbCIsInNldEJvb2xlYW5zIiwic2V0RGF0YSIsInJlc3VsdE9iamVjdCIsImNoZWNrUmFuZ2UiLCJjaGVja1N0ZXAiLCJjaGVja1ZhbHVlcyIsImNoZWNrUGVyY2VudHMiLCJwZXJmb3JtTW92ZVRvUGVyY2VudCIsInZhbGlkYXRlTWFya3MiLCJvcHRpb25zIiwiZ2FwIiwibWFwU3RlcHMiLCJNYXAiLCJ2YWxpZEdhcCIsInZhbGlkYXRlR2FwIiwic3RlcENvdW50R2FwIiwicGVyY2VudENvdW50c0dhcCIsImkiLCJ2YWx1ZVN0ZXBzIiwicm91bmQiLCJwZXJjZW50U2NhbGUiLCJzZXQiLCJ2YWxpZGF0ZVRodW1iSWQiLCJkaWZmRnJvbSIsImRpZmZUbyIsInZhbGlkYXRlUGVyY2VudCIsIm5ld0RhdGUiLCJ0aHVtYlZhbHVlIiwic2NhbGVQZXJjZW50R2FwIiwiYmFzaXNQZXJjZW50IiwicmVzdWx0IiwiYWxsUmFuZ2UiLCJjaGVja1ZhbHVlIiwiY291bnRTdGVwIiwiY2hlY2tQZXJjZW50IiwidmFyaWFibGUiLCJ2YWx1ZU9mUmFuZ2UiLCJ2YWxpZGF0b3IiLCJWYWxpZGF0b3IiLCJ2YWxpZFN0YXRlIiwibW9kZWwiLCJNb2RlbCIsInNsaWRlck1hcmtzIiwidmFsaWRHYXBNYXJrcyIsImdldE1vZGVsIiwiZ2V0VmFsaWRhdG9yIiwidHlwZURhdGEiLCJwcmV2TW92ZSIsIm5ld1N0YXRlIiwicGVyZm9ybWVkRGF0YSIsInNldFZhbHVlIiwicGFyYW0iLCJtb2RlbEZhY2FkZSIsIk1vZGVsRmFjYWRlIiwidmlldyIsIlZpZXciLCJzdWJzY3JpYmVNb2RlbCIsInN1YnNjcmliZVNsaWRlciIsIiQiLCJpbml0aWFsU3RhdGUiLCJQcmVzZW50ZXIiXSwic291cmNlUm9vdCI6IiJ9