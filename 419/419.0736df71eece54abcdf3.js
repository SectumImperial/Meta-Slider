"use strict";(self.webpackChunkmeta_slider=self.webpackChunkmeta_slider||[]).push([[419],{419:function(e,t,s){var i=s(755),a=s.n(i);const r="VALUE_CHANGED",o="VALUE_START_CHANGE",n="DATA_COLLECTED",l="VALUE_CHANGED",h=" SCALE_CLICKED",m="KEY_DOWN",u="MARK_CLICKED";var c=class{constructor(){this.observers=Object.create(null)}addSubscriber(e,t){if(this.observers[e]){const s=this.observers[e];this.observers[e]=[...s,t]}else this.observers[e]=[t]}removeSubscriber(e,t){this.observers[e]=(this.observers[e]||[]).filter((e=>e!==t))}emit(e,t){(this.observers[e]||[]).forEach((s=>{s.update(t,e)}))}};var b=class extends c{constructor(e,t){super(),this.isVertical=t,this.direction=this.isVertical?"clientY":"clientX",this.startPoint=this.isVertical?"top":"left",this.size=this.isVertical?"height":"width",this.mod=this.isVertical?"vertical":"horizontal",this.root=e}static createElement(e){const t=document.createElement("div");return t.className=e,t}performPointerMove(e,t){const s=s=>{s.preventDefault();const i=this.root.getBoundingClientRect()[this.startPoint],a=s[this.direction]-e-i;this.emit(o,{coordsMove:a,ThumbAttr:t})},i=()=>{document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",i)};document.addEventListener("pointermove",s),document.addEventListener("pointerup",i)}performTouchMove(e,t){const s=s=>{s.stopImmediatePropagation();const i=this.root.getBoundingClientRect()[this.startPoint],a=s.touches[0][this.direction]-e-i;this.emit(o,{coordsMove:a,ThumbAttr:t})},i=()=>{document.removeEventListener("touchmove",s),document.removeEventListener("touchend",i)};document.addEventListener("touchmove",s),document.addEventListener("touchend",i)}performKeyDown(e,t){this.emit(m,{keyEvent:e,ThumbAttr:t})}performClickMark(e,t){this.emit(u,{percent:e,value:t})}};var d=class extends b{constructor(e){const{root:t,positionStart:s,positionEnd:i,isVertical:a}=e;super(t,a),this.positionStart=s,this.positionEnd=i,this.progress=b.createElement("plugin-slider__progress js-plugin-slider__progress"),this.setProgress()}setProgress(){this.progress.style[this.startPoint]=`${this.positionStart}%`,this.progress.style[this.size]=`${this.positionEnd}%`,this.root.append(this.progress)}setProgressPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;this.progress.style[this.startPoint]=`${e}%`,this.progress.style[this.size]=`${t}%`}};var v=class extends b{constructor(e,t){super(e,t),this.scale=b.createElement("plugin-slider__scale js-plugin-slider__scale"),this.handleScalePointerDown=this.handleScalePointerDown.bind(this),this.init()}getScale(){return this.scale||(this.scale=b.createElement("plugin-slider__scale")),this.scale}init(){const e=this.isVertical?"plugin-slider__scale_orientation_vertical":"plugin-slider__scale_orientation_horizontal";this.scale.classList.add(e),this.addScale(),this.addListeners()}addScale(){this.root.append(this.scale)}addListeners(){this.scale.addEventListener("pointerdown",this.handleScalePointerDown)}handleScalePointerDown(e){const t=e.target;if(!t.closest(".plugin-slider__scale")||t.classList.contains("plugin-slider__mark-value"))return;const s=this.scale.getBoundingClientRect(),i=s[this.size],a=s[this.startPoint],r=e[this.direction]-a;r>i||r<0||this.emitData(r,i)}emitData(e,t){const s={coordsMove:e,scaleSize:t};this.emit(h,s)}};const p="plugin-slider__mark_hidden";var P=class extends b{constructor(e,t,s){super(e,s),this.marks=t,this.init()}init(){this.createMarks(),this.addListeners(),this.adjustMarkVisibility()}addListeners(){this.root.addEventListener("click",this.handleRootClick.bind(this))}handleRootClick(e){const t=e.target,{value:s,percent:i}=t.dataset;t.classList.contains("plugin-slider__mark-value")&&void 0!==i&&this.performClickMark(Number(i),Number(s))}createMarks(){this.marks.forEach(((e,t)=>{this.createMark(t,e)}))}createMark(e,t){const s=this.createMarkElement(t),i=this.createMarkValueElement(e,t);s.append(i),this.root.append(s)}createMarkElement(e){const t=b.createElement("plugin-slider__mark js-plugin-slider__mark");return t.classList.add(`plugin-slider__mark_${this.mod}`),t.style[this.startPoint]=`${e}%`,t}createMarkValueElement(e,t){const s=document.createElement("span");return s.className=`plugin-slider__mark-value plugin-slider__mark-value_${this.mod}`,s.dataset.value=`${e}`,s.dataset.percent=`${t}`,s.innerText=`${e}`,s}adjustMarkVisibility(){const e=Array.from(this.root.querySelectorAll(".plugin-slider__mark"));let t=null;e.forEach((e=>{const s=e.querySelector(".plugin-slider__mark-value"),i=s?Number(s.getAttribute("data-percent")):null;if(null===t)return e.classList.remove(p),void(t=i);(null!==i?i-t:0)<5?e.classList.add(p):(e.classList.remove(p),t=i)}))}};var g=class extends b{constructor(e){const{root:t,thumbPercent:s=0,attr:i="valueFrom",isVertical:a,minValue:r,maxValue:o}=e;super(t,a),this.thumbPercent=s,this.thumbAttr=i,this.minValue=r,this.maxValue=o,this.handleThumbPointerDown=this.handleThumbPointerDown.bind(this),this.handleThumbKeyDown=this.handleThumbKeyDown.bind(this),this.handleThumbTouch=this.handleThumbTouch.bind(this),this.init()}init(){this.thumbElement=this.createThumb(),this.thumbElement.setAttribute("data-thumb-attr",this.thumbAttr),this.thumbElement.tabIndex=1,this.root.append(this.thumbElement),this.setPosition(this.thumbPercent),this.addListeners()}setPosition(e){if(this.thumbPercent=e,this.checkZInd(),void 0!==this.thumbElement){this.thumbElement.style[this.startPoint]=`${this.thumbPercent}%`;const e=this.minValue+this.thumbPercent/100*(this.maxValue-this.minValue);this.thumbElement.setAttribute("aria-valuenow",e.toString())}}getThumb(){return this.thumbElement}getThumbAttr(){return this.thumbAttr}addListeners(){void 0!==this.thumbElement&&(this.thumbElement.addEventListener("pointerdown",this.handleThumbPointerDown),this.thumbElement.addEventListener("keydown",this.handleThumbKeyDown),this.thumbElement.addEventListener("touchstart",this.handleThumbTouch))}createThumb(){const e=b.createElement("plugin-slider__thumb js-plugin-slider__thumb");return e.setAttribute("role","slider"),e.setAttribute("aria-valuemin",this.minValue.toString()),e.setAttribute("aria-valuemax",this.maxValue.toString()),e.setAttribute("aria-valuenow",this.thumbPercent.toString()),e.setAttribute("aria-label","Value slider"),e}checkZInd(){void 0!==this.thumbElement&&("valueFrom"===this.thumbAttr&&100===this.thumbPercent&&(this.thumbElement.style.zIndex="10"),"valueFrom"===this.thumbAttr&&this.thumbPercent<100&&(this.thumbElement.style.zIndex="5"),"valueTo"===this.thumbAttr&&0===this.thumbPercent&&(this.thumbElement.style.zIndex="10"),"valueTo"===this.thumbAttr&&this.thumbPercent>0&&(this.thumbElement.style.zIndex="5"))}handleThumbTouch(e){if(e.preventDefault(),void 0===this.thumbElement)return;const t=this.thumbElement.getBoundingClientRect()[this.startPoint];this.moved=e.touches[0][this.direction]-(t+this.thumbElement.getBoundingClientRect()[this.size]/2),super.performTouchMove(this.moved,this.thumbAttr)}handleThumbPointerDown(e){e.preventDefault(),void 0!==this.thumbElement&&(this.moved=e[this.direction]-(this.thumbElement.getBoundingClientRect()[this.startPoint]+this.thumbElement.getBoundingClientRect()[this.size]/2),this.checkZInd(),super.performPointerMove(this.moved,this.thumbAttr))}handleThumbKeyDown(e){if("Tab"===e.key)return;e.preventDefault();const{key:t}=e;"ArrowLeft"!==t&&"ArrowUp"!==t&&"ArrowRight"!==t&&"ArrowDown"!==t||e.preventDefault(),("ArrowLeft"===t&&!this.isVertical||"ArrowUp"===t&&this.isVertical)&&super.performKeyDown("decrement",this.thumbAttr),("ArrowRight"===t&&!this.isVertical||"ArrowDown"===t&&this.isVertical)&&super.performKeyDown("increment",this.thumbAttr)}};var T=class extends b{constructor(e){const{root:t,percentPosition:s,valueTip:i,isVertical:a}=e;super(t,a),this.percentPosition=s,this.valueTip=i,this.tip=this.createTip(),this.addTip()}setValueTip(e){this.tip.innerText=`${e}`}hideTip(){this.tip.style.display="none"}showTip(){this.tip.style.display=""}setPosition(e,t){this.tip.style[this.startPoint]=`${e}%`,this.tip.innerText=`${t}`}createTip(){const e=b.createElement("plugin-slider__tip js-plugin-slider__tip");return e.classList.add(`plugin-slider__tip_${this.mod}`),e.innerText=`${this.valueTip}`,e.style[super.startPoint]=`${this.percentPosition}%`,e}addTip(){this.root.append(this.tip)}};class V extends c{constructor(e,t){super(),this.state=t,this.dom={slider:void 0,scaleElement:void 0,root:e},this.numberVariables={tipValueFrom:0,thumbPercentFrom:0,thumbPercentTo:void 0,tipValueTo:void 0},this.booleanVariables={isProgress:!1,isRange:!1,isVertical:!1,isTip:!1,isScaleMarks:!1},this.classElements={thumbFrom:void 0,thumbTo:void 0,scale:void 0,scaleMarks:void 0,tipFrom:void 0,tipTo:void 0,progress:void 0,sliderComponents:void 0},this.createVariables(e,t),this.init(),this.setState(t)}static createSlider(){const e=document.createElement("div");return e.className="plugin-slider js-plugin-slider",e}update(e,t){if(void 0===this.dom)return;if(void 0===this.classElements.sliderComponents||void 0===this.dom.scaleElement)return;const{size:s}=this.classElements.sliderComponents,i=this.dom.scaleElement.getBoundingClientRect()[s];if(t===o){const t=Object.assign(Object.assign({},e),{scaleSize:i});this.emit(n,t)}else this.emit(n,e)}setState(e){const{thumbPercentFrom:t,valueFrom:s,isRange:i,thumbPercentTo:a,valueTo:r}=e;this.setThumbs(t,a,i),this.setTips(s,r,i),this.setProgress(t,a,i)}setThumbs(e,t,s){if(void 0!==this.classElements.thumbFrom&&void 0!==this.numberVariables&&void 0!==this.dom){if(this.numberVariables.thumbPercentFrom=e,this.classElements.thumbFrom.setPosition(this.numberVariables.thumbPercentFrom),s&&void 0!==this.dom.slider){null===this.dom.slider.querySelector("#valueTo")&&void 0!==t&&this.setThumb("valueTo",t)}s&&void 0!==t&&this.classElements.thumbTo&&(this.numberVariables.thumbPercentTo=t,this.classElements.thumbTo.setPosition(this.numberVariables.thumbPercentTo))}}setThumb(e,t){const s="valueTo"===e?"thumbTo":"thumbFrom";void 0!==this.dom&&void 0!==this.booleanVariables&&void 0!==this.dom.scaleElement&&void 0!==this.booleanVariables.isVertical&&(this.classElements[s]=new g({root:this.dom.scaleElement,thumbPercent:t,attr:e,isVertical:this.booleanVariables.isVertical,minValue:this.state.min,maxValue:this.state.max}))}setTips(e,t,s){var i,a,r;if(void 0===this.booleanVariables)return;if(void 0===this.numberVariables)return;const{isTip:o}=this.booleanVariables;if(o&&this.classElements.tipFrom){if(this.numberVariables.tipValueFrom=e,void 0===this.numberVariables.thumbPercentFrom)return;this.classElements.tipFrom.setPosition(this.numberVariables.thumbPercentFrom,this.numberVariables.tipValueFrom)}this.isNeedDoubleTip()?(null===(i=this.classElements.tipFrom)||void 0===i||i.setValueTip(`${e} - ${t}`),null===(a=this.classElements.tipTo)||void 0===a||a.hideTip()):null===(r=this.classElements.tipTo)||void 0===r||r.showTip(),s&&this.classElements.tipTo&&void 0!==t&&this.numberVariables.thumbPercentTo&&(this.numberVariables.tipValueTo=t,this.classElements.tipTo.setPosition(this.numberVariables.thumbPercentTo,this.numberVariables.tipValueTo))}setTip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"valueFrom";var t;const s="valueFrom"===e?"tipValueFrom":"tipValueTo",i="valueFrom"===e?"tipFrom":"tipTo",a="valueFrom"===e?"thumbPercentFrom":"thumbPercentTo";void 0!==this.numberVariables&&void 0!==this.dom&&void 0!==this.booleanVariables&&("valueTo"===e&&void 0===this.numberVariables[a]||void 0!==this.dom.scaleElement&&void 0!==this.booleanVariables.isVertical&&(this.classElements[i]=new T({root:this.dom.scaleElement,percentPosition:null!==(t=this.numberVariables[a])&&void 0!==t?t:0,valueTip:s,isVertical:this.booleanVariables.isVertical})))}setProgress(e,t,s){var i,a,r;if(void 0===this.dom)return;if(void 0===this.booleanVariables)return;if(void 0===this.numberVariables)return;if(void 0===this.dom.slider)return;if(null===this.dom.slider.querySelector(".js-plugin-slider__progress")){const e="number"==typeof t?t:0;if(void 0===this.dom.scaleElement||void 0===this.booleanVariables.isVertical||void 0===this.numberVariables.thumbPercentFrom)return;this.classElements.progress=new d({root:this.dom.scaleElement,positionStart:this.numberVariables.thumbPercentFrom,positionEnd:e,isVertical:this.booleanVariables.isVertical})}this.booleanVariables.isProgress&&s&&t&&(null===(i=this.classElements.progress)||void 0===i||i.setProgressPosition(this.numberVariables.thumbPercentFrom,t-e)),this.booleanVariables.isProgress&&t===e&&(null===(a=this.classElements.progress)||void 0===a||a.setProgressPosition(0,0)),this.booleanVariables.isProgress&&!s&&(null===(r=this.classElements.progress)||void 0===r||r.setProgressPosition(0,this.numberVariables.thumbPercentFrom))}init(){void 0!==this.dom&&(this.dom.slider=V.createSlider(),this.createElements(),this.addSlider())}createVariables(e,t){const{isTip:s,valueFrom:i,valueTo:a,thumbPercentFrom:r,thumbPercentTo:o,isProgress:n,isRange:l,scaleMap:h,isVertical:m,scaleMarks:u}=t;void 0!==this.numberVariables&&(this.numberVariables.thumbPercentFrom=r,o&&(this.numberVariables.thumbPercentTo=o),void 0!==this.booleanVariables&&(this.booleanVariables.isTip=s||!1,this.numberVariables.tipValueFrom=i||0,this.numberVariables.tipValueTo=a||0,this.booleanVariables.isProgress=n||!1,this.booleanVariables.isRange=l||!1,this.booleanVariables.isVertical=m||!1,this.scaleMap=h,this.booleanVariables.isScaleMarks=u,void 0!==this.dom&&(this.dom.root=e)))}createElements(){void 0!==this.dom&&void 0!==this.booleanVariables&&void 0!==this.numberVariables&&void 0!==this.dom.slider&&void 0!==this.booleanVariables.isVertical&&void 0!==this.numberVariables.thumbPercentFrom&&(this.classElements.sliderComponents=new b(this.dom.slider,this.booleanVariables.isVertical),this.classElements.scale=new v(this.dom.slider,this.booleanVariables.isVertical),this.dom.scaleElement=this.classElements.scale.getScale(),this.setThumb("valueFrom",this.numberVariables.thumbPercentFrom),this.booleanVariables.isRange&&void 0!==this.numberVariables.thumbPercentTo&&this.setThumb("valueTo",this.numberVariables.thumbPercentTo),this.booleanVariables.isTip&&this.setTip("valueFrom"),this.booleanVariables.isTip&&this.numberVariables.thumbPercentTo&&this.booleanVariables.isRange&&void 0!==this.numberVariables.tipValueTo&&this.setTip("valueTo"),void 0!==this.booleanVariables.isRange&&this.setProgress(this.numberVariables.thumbPercentFrom,0,this.booleanVariables.isRange),this.scaleMap&&this.booleanVariables.isScaleMarks&&(this.classElements.scaleMarks=new P(this.dom.scaleElement,this.scaleMap,this.booleanVariables.isVertical)))}addSlider(){void 0!==this.dom&&void 0!==this.dom.root&&void 0!==this.dom.slider&&this.dom.root.append(this.dom.slider)}isNeedDoubleTip(){return void 0!==this.booleanVariables&&void 0!==this.numberVariables&&(void 0!==this.numberVariables.thumbPercentTo&&void 0!==this.booleanVariables.isRange&&void 0!==this.numberVariables.thumbPercentFrom&&void 0!==this.booleanVariables.isTip&&(this.numberVariables.thumbPercentTo-this.numberVariables.thumbPercentFrom<=2||0===this.numberVariables.thumbPercentTo&&0===this.numberVariables.thumbPercentFrom))}}var E=V;var F=class extends c{constructor(e,t){super(),this.state=t,this.init(e,t)}updateSlider(e){void 0!==this.slider&&this.slider.setState(e)}update(e,t){t===n&&this.emit(l,e),t===l&&this.updateSlider(e)}getRoot(){return this.root}setRoot(e){this.root=e}getSlider(){return this.slider}setSlider(e){this.slider=e}init(e,t){const{isRange:s}=t;this.root=e,this.isRange=s,this.slider=new E(e,t),this.addSubscribeSlider()}addSubscribeSlider(){void 0!==this.slider&&void 0!==this.slider.classElements&&void 0!==this.slider.booleanVariables&&(void 0!==this.slider.classElements.thumbFrom&&(this.slider.classElements.thumbFrom.addSubscriber(o,this.slider),this.slider.classElements.thumbFrom.addSubscriber(m,this.slider)),this.isRange&&this.slider.classElements.thumbTo&&(this.slider.classElements.thumbTo.addSubscriber(o,this.slider),this.slider.classElements.thumbTo.addSubscriber(m,this.slider)),void 0!==this.slider.classElements.scale&&(this.slider.classElements.scale.addSubscriber(h,this.slider),this.slider.booleanVariables.isScaleMarks&&void 0!==this.slider.classElements.scaleMarks&&this.slider.classElements.scaleMarks.addSubscriber(u,this.slider)),this.slider.addSubscriber(h,this),this.slider.addSubscriber(n,this))}};var S=class{constructor(e){this.handleSliderClick=(e,t)=>{const s=this.findSuitablePercent(e);this.updateStateMove(s.value,t)},this.handleMouseMove=(e,t)=>{const s=this.findPercent(e,t),{value:i}=s;void 0!==i&&"number"==typeof i&&this.updateStateMove(i,t)},this.getValue=e=>this.state[e],this.getPercentVal=()=>{const{valueFrom:e,min:t,max:s}=this.state;return Number((e/(s-t)*100).toFixed(3))},this.getStepsCount=()=>Math.ceil((this.state.max-this.state.min)/this.state.step),this.updateStateMove=(e,t)=>{if(Number.isNaN(e)||e<this.state.min||e>this.state.max)throw new Error("Invalid value provided while updating the model.");this.setState({[t]:e})},this.state=e}setState(e){this.state=Object.assign(Object.assign({},this.state),e)}getState(){return this.state}findSuitablePercent(e){const{step:t,min:s,max:i}=this.state,a=Math.round(e/(100/this.getStepsCount())),r=100/this.getStepsCount()*a;let o;return o=100===r?i:s+t*a,{value:o,percent:r}}findPercent(e,t){const{min:s,max:i,step:a,isRange:r}=this.state,o="valueFrom"===t?"thumbPercentFrom":"thumbPercentTo";let n=this.state[o],l=this.state[t];void 0===l&&(l=s),void 0===n&&("number"==typeof l?void 0===n&&(n=(l-s)/(i-s)*100):(l=s,n=(l-s)/(i-s)*100));const h=n+100/this.getStepsCount(),m=n-100/this.getStepsCount(),u=s+Math.floor(e/100*this.getStepsCount())*a,c=s+Math.ceil(e/100*this.getStepsCount())*a,b=e>=h?u:e<=m?c:l,d=e>=h?(u-s)/(i-s)*100:e<=m?(c-s)/(i-s)*100:e;if("number"!=typeof b)throw new Error("value should be a number");if("valueFrom"===t&&void 0!==this.state.valueTo&&b>this.state.valueTo&&r){const{valueTo:e,thumbPercentTo:t}=this.state;return{valueTo:e,thumbPercentTo:t}}if("valueTo"===t&&void 0!==this.state.valueFrom&&b<this.state.valueFrom&&r){const{valueFrom:e,thumbPercentFrom:t}=this.state;return{valueFrom:e,thumbPercentFrom:t}}return{value:b,percent:d}}};var f=class{constructor(e){this.data=e,this.DEFAULT_GAP=20,this.baseParams={min:0,max:100,valueFrom:0,step:1,valueTo:void 0,stepPercent:10,thumbPercentFrom:void 0,thumbPercentTo:void 0},this.booleanVariables={isTip:!1,isVertical:!1,isProgress:!1,scaleMarks:!1,isRange:!1},this.validateData(e)}validateData(e){return this.setBooleans(e),this.setData(e),this.resultObject=Object.assign(Object.assign(Object.assign({},e),this.booleanVariables),{thumbPercentFrom:0,thumbPercentTo:void 0}),this.checkRange(),this.checkStep(),this.checkValues(),this.checkPercents(),this.resultObject}performMoveToPercent(e){const{coordsMove:t,scaleSize:s,keyEvent:i,ThumbAttr:a}=e;if(void 0!==i&&void 0!==this.baseParams.stepPercent&&void 0!==this.baseParams.thumbPercentFrom){if("increment"===i&&"valueFrom"===a)return this.baseParams.thumbPercentFrom+this.baseParams.stepPercent;if("decrement"===i&&"valueFrom"===a)return this.baseParams.thumbPercentFrom-this.baseParams.stepPercent;if("increment"===i&&"valueTo"===a&&void 0!==this.baseParams.thumbPercentTo)return this.baseParams.thumbPercentTo+this.baseParams.stepPercent;if("decrement"===i&&"valueTo"===a&&void 0!==this.baseParams.thumbPercentTo)return this.baseParams.thumbPercentTo-this.baseParams.stepPercent}if(void 0===t||void 0===s)return 0;let r=Number((t/(s/100)).toFixed(2));return r<0&&(r=0),r>100&&(r=100),r}validateMarks(e){const{step:t,max:s,min:i,gap:a}=e,r=new Map,o=this.validateGap(a),n=this.findRange()/100,l=t/n,h=t*Math.ceil(o/l),m=Math.ceil(h/n);for(let e=0;e<=100;e+=m)if(e<=100-m){const s=t*Math.round(e/l),a=s/n,o=i+s;r.set(o,a)}return r.set(s,100),r}validateThumbAttr(e){if(void 0===this.baseParams.thumbPercentFrom)return"valueTo";if(!this.booleanVariables.isRange)return"valueFrom";if(e<this.baseParams.thumbPercentFrom)return"valueFrom";if(void 0!==this.baseParams.thumbPercentTo&&e>this.baseParams.thumbPercentTo)return"valueTo";if(void 0!==this.baseParams.thumbPercentTo&&e>this.baseParams.thumbPercentFrom&&e<this.baseParams.thumbPercentTo){const t=e-this.baseParams.thumbPercentFrom,s=this.baseParams.thumbPercentTo-e;if(t===s||t<s)return"valueFrom";if(t>s)return"valueTo"}return"valueTo"}validatePercent(e,t,s){const{isRange:i}=s;if(!i){const i=Object.assign(Object.assign({},s),{valueFrom:t,thumbPercentFrom:e});return this.validateData(i)}if(void 0!==s.thumbPercentTo){const{thumbPercentFrom:i,thumbPercentTo:a}=s;let r="thumbPercentFrom",o="valueFrom";if(e>a)r="thumbPercentTo",o="valueTo";else if(e>i&&e<a){e-i>=(a-i)/2&&(r="thumbPercentTo",o="valueTo")}const n=Object.assign(Object.assign({},s),{[o]:t,[r]:e});return this.validateData(n)}return s}setData(e){const{min:t,max:s,valueFrom:i,step:a,scalePercentGap:r,valueTo:o}=e;this.baseParams.min=t,this.baseParams.max=s,this.baseParams.valueFrom=i,this.baseParams.step=a,this.scalePercentGap="number"==typeof r?r:void 0,this.booleanVariables.isRange&&void 0!==o&&(this.baseParams.valueTo=o),this.baseParams.stepPercent=this.baseParams.step/(this.findRange()/100)}setBooleans(e){const{isRange:t,isTip:s,isVertical:i,isProgress:a,scaleMarks:r}=e;this.booleanVariables.isRange="boolean"==typeof t&&t,this.booleanVariables.isTip="boolean"==typeof s&&s,this.booleanVariables.isVertical="boolean"==typeof i&&i,this.booleanVariables.isProgress="boolean"==typeof a&&a,this.booleanVariables.scaleMarks="boolean"==typeof r&&r}validateGap(e){let t=e;return(t<0||t>100)&&(t=this.DEFAULT_GAP),t}checkRange(){Number.isNaN(this.baseParams.min)&&(this.baseParams.min=0),Number.isNaN(this.baseParams.max)&&(this.baseParams.max=10),this.baseParams.min===this.baseParams.max&&(this.baseParams.max=this.baseParams.min+this.baseParams.step),this.baseParams.min>this.baseParams.max&&([this.baseParams.min,this.baseParams.max]=[this.baseParams.max,this.baseParams.min]),this.resultObject.min=this.baseParams.min,this.resultObject.max=this.baseParams.max}checkStep(){Number.isNaN(this.baseParams.step)&&(this.baseParams.step=1);const e=this.findRange();this.baseParams.step>e&&(this.baseParams.step=e),this.baseParams.step<.001&&(this.baseParams.step=.001),this.resultObject.step=this.baseParams.step}findRange(){return this.baseParams.max-this.baseParams.min}checkValues(){this.baseParams.valueFrom=this.checkValue(this.baseParams.valueFrom),this.booleanVariables.isRange&&void 0!==this.baseParams.valueTo&&(this.baseParams.valueTo=this.checkValue(this.baseParams.valueTo)),void 0!==this.baseParams.valueTo&&this.baseParams.valueFrom>this.baseParams.valueTo&&this.booleanVariables.isRange&&([this.baseParams.valueFrom,this.baseParams.valueTo]=[this.baseParams.valueTo,this.baseParams.valueFrom]),this.resultObject.valueFrom=this.baseParams.valueFrom,this.booleanVariables.isRange&&(this.resultObject.valueTo=this.baseParams.valueTo)}checkValue(e){let t=e;if(Number.isNaN(t)&&(t=0),t===this.baseParams.max)return t;if(t%this.baseParams.step!=0&&t!==this.baseParams.min){const e=Math.round((t-this.baseParams.min)/this.baseParams.step);t=this.baseParams.min+this.baseParams.step*e}return t>this.baseParams.max&&(t=this.baseParams.max),t<this.baseParams.min&&(t=this.baseParams.min),t}checkPercents(){this.baseParams.thumbPercentFrom=this.checkPercent("valueFrom"),this.resultObject.thumbPercentFrom=this.baseParams.thumbPercentFrom,this.booleanVariables.isRange&&(this.baseParams.thumbPercentTo=this.checkPercent("valueTo"),this.resultObject.thumbPercentTo=this.baseParams.thumbPercentTo)}checkPercent(e){let t=0;if(e in this.baseParams&&(t=this.baseParams[e]),void 0===t)return 0;const s=t-this.baseParams.min;return Number((s/(this.findRange()/100)).toFixed(3))}};var k=class extends c{constructor(e){super(),this.validator=new f(e);const t=this.validator.validateData(e);this.model=new S(t)}setState(e){const t=this.validator.validateData(e);this.model.setState(t)}getState(){if(this.model.getState().scaleMarks){const e=this.validGapMarks();return Object.assign(Object.assign({},this.model.getState()),{scaleMap:e})}return this.model.getState()}getValue(e){return this.model.getState()[e]}update(e){if(void 0===e.percent){const t=this.validator.performMoveToPercent(e);if(void 0!==e.ThumbAttr&&this.model.handleMouseMove(t,e.ThumbAttr),void 0===e.ThumbAttr){const e=this.validator.validateThumbAttr(t);this.model.handleSliderClick(t,e)}const s=this.model.getState(),i=this.validator.validateData(s);this.model.setState(i),s.scaleMarks?this.emit(r,Object.assign(Object.assign({},this.model.getState()),{scaleMap:this.validGapMarks()})):this.emit(r,this.model.getState())}else{const{percent:t,value:s}=e,i=this.validator.validatePercent(t,s,this.model.getState());this.model.setState(i),this.emit(r,this.model.getState())}}setValue(e,t){const s=this.model.getState(),i=Object.assign(Object.assign({},s),{[e]:t}),a=this.validator.validateData(i);this.model.setState(a),this.emit(r,this.model.getState())}validGapMarks(){const{scalePercentGap:e,min:t,max:s,step:i}=this.model.getState(),a=null!=e?e:20;return this.validator.validateMarks({min:t,max:s,step:i,gap:a})}};var _=class extends c{constructor(e,t){super(),this.modelFacade=new k(t),this.view=new F(e,this.modelFacade.getState()),this.subscribeModel(),this.subscribeSlider()}getState(){return this.modelFacade.getState()}setState(e){this.modelFacade.setState(e)}setValue(e,t){this.modelFacade.setValue(e,t)}getValue(e){return this.modelFacade.getValue(e)}subscribeSlider(){this.view.addSubscriber(l,this.modelFacade)}subscribeModel(){this.modelFacade.addSubscriber(r,this.view)}};var M={min:0,max:100,valueFrom:0,valueTo:0,step:1,scalePercentGap:10,scaleMarks:!1,isTip:!1,isProgress:!1,isRange:!1,isVertical:!1};a().fn.sliderPlugin=function(e){const t=Object.assign(Object.assign({},M),e);return new _(this[0],t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxHQUVwQyxPQURlLElBQUlpRCxFQUFVL1EsS0FBSyxHQUFJK0gsRUFFeEMsQyIsInNvdXJjZXMiOlsid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL09ic2VydmVyL2V2ZW50cy50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9PYnNlcnZlci9PYnNlcnZlci50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL1ZpZXcvc3ViVmlld3MvU2xpZGVyQ29tcG9uZW50cy9TbGlkZXJDb21wb25lbnRzLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvVmlldy9zdWJWaWV3cy9Qcm9ncmVzcy9Qcm9ncmVzcy50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL1ZpZXcvc3ViVmlld3MvU2NhbGUvU2NhbGUudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvY29tcG9uZW50cy9WaWV3L3N1YlZpZXdzL1NjYWxlTWFya3MvY29uc3RhbnRzLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvVmlldy9zdWJWaWV3cy9TY2FsZU1hcmtzL1NjYWxlTWFya3MudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvY29tcG9uZW50cy9WaWV3L3N1YlZpZXdzL1RodW1iL1RodW1iLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvVmlldy9zdWJWaWV3cy9UaXAvVGlwLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvVmlldy9zdWJWaWV3cy9TbGlkZXIvU2xpZGVyLnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvVmlldy9WaWV3LnRzIiwid2VicGFjazovL21ldGEtc2xpZGVyLy4vc3JjL2NvbXBvbmVudHMvTW9kZWwvTW9kZWwudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvY29tcG9uZW50cy9Nb2RlbC9WYWxpZGF0b3IudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvY29tcG9uZW50cy9Nb2RlbC9Nb2RlbEZhY2FkZS50cyIsIndlYnBhY2s6Ly9tZXRhLXNsaWRlci8uL3NyYy9jb21wb25lbnRzL1ByZXNlbnRlci9QcmVzZW50ZXIudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvc3RhdGUudHMiLCJ3ZWJwYWNrOi8vbWV0YS1zbGlkZXIvLi9zcmMvc2xpZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1PREVMX0VWRU5UUyA9IHtcclxuICBWQUxVRV9DSEFOR0VEOiAnVkFMVUVfQ0hBTkdFRCcsXHJcbn07XHJcblxyXG5jb25zdCBTTElERVJfRVZFTlRTID0ge1xyXG4gIFZBTFVFX1NUQVJUX0NIQU5HRTogJ1ZBTFVFX1NUQVJUX0NIQU5HRScsXHJcbiAgREFUQV9DT0xMRUNURUQ6ICdEQVRBX0NPTExFQ1RFRCcsXHJcbiAgVkFMVUVfQ0hBTkdFRDogJ1ZBTFVFX0NIQU5HRUQnLFxyXG4gIFNDQUxFX0NMSUNLRUQ6ICcgU0NBTEVfQ0xJQ0tFRCcsXHJcbiAgS0VZX0RPV046ICdLRVlfRE9XTicsXHJcbiAgTUFSS19DTElDS0VEOiAnTUFSS19DTElDS0VEJyxcclxufTtcclxuXHJcbmV4cG9ydCB7IE1PREVMX0VWRU5UUywgU0xJREVSX0VWRU5UUyB9O1xyXG4iLCJpbnRlcmZhY2UgVmFsdWVPYnNlcnZlckVudHJ5IHtcclxuICB1cGRhdGUoZGF0YTogb2JqZWN0LCBldmVudDogc3RyaW5nKTogdm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIE9ic2VydmVycyB7XHJcbiAgW2luZGV4OiBzdHJpbmddOiBWYWx1ZU9ic2VydmVyRW50cnlbXVxyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBPYnNlcnZlciB7XHJcbiAgcHVibGljIG9ic2VydmVyczogT2JzZXJ2ZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuXHJcbiAgcHVibGljIGFkZFN1YnNjcmliZXIoZXZlbnQ6IHN0cmluZywgb2JzZXJ2ZXI6IFZhbHVlT2JzZXJ2ZXJFbnRyeSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSkge1xyXG4gICAgICBjb25zdCBrZXlzID0gdGhpcy5vYnNlcnZlcnNbZXZlbnRdO1xyXG4gICAgICB0aGlzLm9ic2VydmVyc1tldmVudF0gPSBbLi4ua2V5cywgb2JzZXJ2ZXJdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gW29ic2VydmVyXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyByZW1vdmVTdWJzY3JpYmVyKGV2ZW50OiBzdHJpbmcsIG9ic2VydmVyOiBWYWx1ZU9ic2VydmVyRW50cnkpOiB2b2lkIHtcclxuICAgIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSA9ICh0aGlzLm9ic2VydmVyc1tldmVudF0gfHwgW10pLmZpbHRlcigob2JzKSA9PiBvYnMgIT09IG9ic2VydmVyKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBlbWl0KGV2ZW50OiBzdHJpbmcsIGRhdGE6IG9iamVjdCk6IHZvaWQge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnNbZXZlbnRdIHx8IFtdO1xyXG4gICAgb2JzZXJ2ZXJzLmZvckVhY2goKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgIG9ic2VydmVyLnVwZGF0ZShkYXRhLCBldmVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE9ic2VydmVyO1xyXG4iLCJpbXBvcnQgT2JzZXJ2ZXIgZnJvbSAnQHNyYy9PYnNlcnZlci9PYnNlcnZlcic7XHJcbmltcG9ydCB7IFNMSURFUl9FVkVOVFMgfSBmcm9tICdAc3JjL09ic2VydmVyL2V2ZW50cyc7XHJcbmltcG9ydCB7XHJcbiAgS2V5RXZlbnQsXHJcbiAgU2l6ZVBvaW50LFxyXG4gIFN0YXJ0UG9pbnQsXHJcbiAgVGh1bWJBdHRyLFxyXG59IGZyb20gJ0BzcmMvY29tcG9uZW50cy9JbnRlcmZhY2VzJztcclxuXHJcbmNsYXNzIFNsaWRlckNvbXBvbmVudHMgZXh0ZW5kcyBPYnNlcnZlciB7XHJcbiAgcmVhZG9ubHkgc2l6ZTogU2l6ZVBvaW50O1xyXG5cclxuICBwcm90ZWN0ZWQgc2NhbGVFbGVtZW50PzogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gIHByb3RlY3RlZCByZWFkb25seSByb290OiBFbGVtZW50O1xyXG5cclxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgZGlyZWN0aW9uOiAnY2xpZW50WScgfCAnY2xpZW50WCc7XHJcblxyXG4gIHByb3RlY3RlZCByZWFkb25seSBzdGFydFBvaW50OiBTdGFydFBvaW50O1xyXG5cclxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgbW9kOiAndmVydGljYWwnIHwgJ2hvcml6b250YWwnO1xyXG5cclxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgaXNWZXJ0aWNhbDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3Iocm9vdDogRWxlbWVudCwgaXNWZXJ0aWNhbDogYm9vbGVhbikge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgICB0aGlzLmRpcmVjdGlvbiA9IHRoaXMuaXNWZXJ0aWNhbCA/ICdjbGllbnRZJyA6ICdjbGllbnRYJztcclxuICAgIHRoaXMuc3RhcnRQb2ludCA9IHRoaXMuaXNWZXJ0aWNhbCA/ICd0b3AnIDogJ2xlZnQnO1xyXG4gICAgdGhpcy5zaXplID0gdGhpcy5pc1ZlcnRpY2FsID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xyXG4gICAgdGhpcy5tb2QgPSB0aGlzLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xyXG4gICAgdGhpcy5yb290ID0gcm9vdDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVFbGVtZW50KGNsYXNzTmFtZTogc3RyaW5nKTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwZXJmb3JtUG9pbnRlck1vdmUodGh1bWJQb3M6IG51bWJlciwgYXR0cjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCBoYW5kbGVUaHVtYlBvaW50ZXJNb3ZlID0gKGU6IFBvaW50ZXJFdmVudCkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGVsZW1TaXplID0gdGhpcy5yb290LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuc3RhcnRQb2ludF07XHJcbiAgICAgIGNvbnN0IG5ld1BvcyA9IGVbdGhpcy5kaXJlY3Rpb25dIC0gdGh1bWJQb3MgLSBlbGVtU2l6ZTtcclxuICAgICAgdGhpcy5lbWl0KFNMSURFUl9FVkVOVFMuVkFMVUVfU1RBUlRfQ0hBTkdFLCB7XHJcbiAgICAgICAgY29vcmRzTW92ZTogbmV3UG9zLFxyXG4gICAgICAgIFRodW1iQXR0cjogYXR0cixcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZVRodW1iUG9pbnRlclVwID0gKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIGhhbmRsZVRodW1iUG9pbnRlck1vdmUpO1xyXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBoYW5kbGVUaHVtYlBvaW50ZXJVcCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgaGFuZGxlVGh1bWJQb2ludGVyTW92ZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBoYW5kbGVUaHVtYlBvaW50ZXJVcCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGVyZm9ybVRvdWNoTW92ZSh0aHVtYlBvczogbnVtYmVyLCBpZDogVGh1bWJBdHRyKTogdm9pZCB7XHJcbiAgICBjb25zdCBoYW5kbGVUaHVtYlRvdWNoTW92ZSA9IChlOiBUb3VjaEV2ZW50KSA9PiB7XHJcbiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNvbnN0IGVsZW1TaXplID0gdGhpcy5yb290LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuc3RhcnRQb2ludF07XHJcbiAgICAgIGNvbnN0IG5ld1BvcyA9IGUudG91Y2hlc1swXVt0aGlzLmRpcmVjdGlvbl0gLSB0aHVtYlBvcyAtIGVsZW1TaXplO1xyXG4gICAgICB0aGlzLmVtaXQoU0xJREVSX0VWRU5UUy5WQUxVRV9TVEFSVF9DSEFOR0UsIHtcclxuICAgICAgICBjb29yZHNNb3ZlOiBuZXdQb3MsXHJcbiAgICAgICAgVGh1bWJBdHRyOiBpZCxcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZVRodW1iVG91Y2hFbmQgPSAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGhhbmRsZVRodW1iVG91Y2hNb3ZlKTtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBoYW5kbGVUaHVtYlRvdWNoRW5kKTtcclxuICAgIH07XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaGFuZGxlVGh1bWJUb3VjaE1vdmUpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBoYW5kbGVUaHVtYlRvdWNoRW5kKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwZXJmb3JtS2V5RG93bihrZXlFdmVudDogS2V5RXZlbnQsIGlkOiBUaHVtYkF0dHIpOiB2b2lkIHtcclxuICAgIHRoaXMuZW1pdChTTElERVJfRVZFTlRTLktFWV9ET1dOLCB7XHJcbiAgICAgIGtleUV2ZW50LFxyXG4gICAgICBUaHVtYkF0dHI6IGlkLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgcGVyZm9ybUNsaWNrTWFyayhwZXJjZW50OiBudW1iZXIsIHZhbHVlOiBudW1iZXIpIHtcclxuICAgIHRoaXMuZW1pdChTTElERVJfRVZFTlRTLk1BUktfQ0xJQ0tFRCwge1xyXG4gICAgICBwZXJjZW50LFxyXG4gICAgICB2YWx1ZSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2xpZGVyQ29tcG9uZW50cztcclxuIiwiaW1wb3J0IHsgUHJvZ3Jlc3NEYXRhIH0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xyXG5pbXBvcnQgU2xpZGVyQ29tcG9uZW50cyBmcm9tICcuLi9TbGlkZXJDb21wb25lbnRzL1NsaWRlckNvbXBvbmVudHMnO1xyXG5pbXBvcnQgJy4vcHJvZ3Jlc3Muc2Nzcyc7XHJcblxyXG5jbGFzcyBQcm9ncmVzcyBleHRlbmRzIFNsaWRlckNvbXBvbmVudHMge1xyXG4gIHByaXZhdGUgcG9zaXRpb25TdGFydDogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIHBvc2l0aW9uRW5kOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgcHJvZ3Jlc3M6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcihkYXRhOiBQcm9ncmVzc0RhdGEpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgcm9vdCxcclxuICAgICAgcG9zaXRpb25TdGFydCxcclxuICAgICAgcG9zaXRpb25FbmQsXHJcbiAgICAgIGlzVmVydGljYWwsXHJcbiAgICB9ID0gZGF0YTtcclxuXHJcbiAgICBzdXBlcihyb290LCBpc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMucG9zaXRpb25TdGFydCA9IHBvc2l0aW9uU3RhcnQ7XHJcbiAgICB0aGlzLnBvc2l0aW9uRW5kID0gcG9zaXRpb25FbmQ7XHJcbiAgICB0aGlzLnByb2dyZXNzID0gU2xpZGVyQ29tcG9uZW50cy5jcmVhdGVFbGVtZW50KCdwbHVnaW4tc2xpZGVyX19wcm9ncmVzcyBqcy1wbHVnaW4tc2xpZGVyX19wcm9ncmVzcycpO1xyXG4gICAgdGhpcy5zZXRQcm9ncmVzcygpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldFByb2dyZXNzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5wcm9ncmVzcy5zdHlsZVt0aGlzLnN0YXJ0UG9pbnRdID0gYCR7dGhpcy5wb3NpdGlvblN0YXJ0fSVgO1xyXG4gICAgdGhpcy5wcm9ncmVzcy5zdHlsZVt0aGlzLnNpemVdID0gYCR7dGhpcy5wb3NpdGlvbkVuZH0lYDtcclxuICAgIHRoaXMucm9vdC5hcHBlbmQodGhpcy5wcm9ncmVzcyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0UHJvZ3Jlc3NQb3NpdGlvbihwb3NpdGlvblN0YXJ0ID0gMCwgcG9zaXRpb25FbmQgPSAxMDApOiB2b2lkIHtcclxuICAgIHRoaXMucHJvZ3Jlc3Muc3R5bGVbdGhpcy5zdGFydFBvaW50XSA9IGAke3Bvc2l0aW9uU3RhcnR9JWA7XHJcbiAgICB0aGlzLnByb2dyZXNzLnN0eWxlW3RoaXMuc2l6ZV0gPSBgJHtwb3NpdGlvbkVuZH0lYDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFByb2dyZXNzO1xyXG4iLCJpbXBvcnQgeyBTTElERVJfRVZFTlRTIH0gZnJvbSAnQHNyYy9PYnNlcnZlci9ldmVudHMnO1xyXG5pbXBvcnQgU2xpZGVyQ29tcG9uZW50cyBmcm9tICcuLi9TbGlkZXJDb21wb25lbnRzL1NsaWRlckNvbXBvbmVudHMnO1xyXG5pbXBvcnQgJy4vc2NhbGUuc2Nzcyc7XHJcblxyXG5jbGFzcyBTY2FsZSBleHRlbmRzIFNsaWRlckNvbXBvbmVudHMge1xyXG4gIHB1YmxpYyBzY2FsZTogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJvb3Q6IEhUTUxEaXZFbGVtZW50LCBpc1ZlcnRpY2FsOiBib29sZWFuKSB7XHJcbiAgICBzdXBlcihyb290LCBpc1ZlcnRpY2FsKTtcclxuXHJcbiAgICB0aGlzLnNjYWxlID0gU2xpZGVyQ29tcG9uZW50cy5jcmVhdGVFbGVtZW50KCdwbHVnaW4tc2xpZGVyX19zY2FsZSBqcy1wbHVnaW4tc2xpZGVyX19zY2FsZScpO1xyXG4gICAgdGhpcy5oYW5kbGVTY2FsZVBvaW50ZXJEb3duID0gdGhpcy5oYW5kbGVTY2FsZVBvaW50ZXJEb3duLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmluaXQoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRTY2FsZSgpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICBpZiAoIXRoaXMuc2NhbGUpIHtcclxuICAgICAgdGhpcy5zY2FsZSA9IFNsaWRlckNvbXBvbmVudHMuY3JlYXRlRWxlbWVudCgncGx1Z2luLXNsaWRlcl9fc2NhbGUnKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnNjYWxlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2NhbGVDbGFzcyA9IHRoaXMuaXNWZXJ0aWNhbCA/ICdwbHVnaW4tc2xpZGVyX19zY2FsZV9vcmllbnRhdGlvbl92ZXJ0aWNhbCcgOiAncGx1Z2luLXNsaWRlcl9fc2NhbGVfb3JpZW50YXRpb25faG9yaXpvbnRhbCc7XHJcbiAgICB0aGlzLnNjYWxlLmNsYXNzTGlzdC5hZGQoc2NhbGVDbGFzcyk7XHJcbiAgICB0aGlzLmFkZFNjYWxlKCk7XHJcbiAgICB0aGlzLmFkZExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTY2FsZSgpOiB2b2lkIHtcclxuICAgIHRoaXMucm9vdC5hcHBlbmQodGhpcy5zY2FsZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZExpc3RlbmVycygpOiB2b2lkIHtcclxuICAgIHRoaXMuc2NhbGUuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLmhhbmRsZVNjYWxlUG9pbnRlckRvd24pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVTY2FsZVBvaW50ZXJEb3duKGU6IFBvaW50ZXJFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgRWxlbWVudDtcclxuXHJcbiAgICBpZiAoIXRhcmdldC5jbG9zZXN0KCcucGx1Z2luLXNsaWRlcl9fc2NhbGUnKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwbHVnaW4tc2xpZGVyX19tYXJrLXZhbHVlJykpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNjYWxlUmVjdCA9IHRoaXMuc2NhbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBzY2FsZVNpemUgPSBzY2FsZVJlY3RbdGhpcy5zaXplXTtcclxuICAgIGNvbnN0IHNjYWxlU3RhcnQgPSBzY2FsZVJlY3RbdGhpcy5zdGFydFBvaW50XTtcclxuICAgIGNvbnN0IGNvb3Jkc01vdmUgPSBlW3RoaXMuZGlyZWN0aW9uXSAtIHNjYWxlU3RhcnQ7XHJcblxyXG4gICAgaWYgKGNvb3Jkc01vdmUgPiBzY2FsZVNpemUgfHwgY29vcmRzTW92ZSA8IDApIHJldHVybjtcclxuXHJcbiAgICB0aGlzLmVtaXREYXRhKGNvb3Jkc01vdmUsIHNjYWxlU2l6ZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVtaXREYXRhKGNvb3Jkc01vdmU6IG51bWJlciwgc2NhbGVTaXplOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIGNvb3Jkc01vdmUsXHJcbiAgICAgIHNjYWxlU2l6ZSxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5lbWl0KFNMSURFUl9FVkVOVFMuU0NBTEVfQ0xJQ0tFRCwgZGF0YSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTY2FsZTtcclxuIiwiZXhwb3J0IGNvbnN0IE1JTl9TUEFDRSA9IDU7IFxyXG5leHBvcnQgY29uc3QgTUFSS1NfSElEREVOID0gXCJwbHVnaW4tc2xpZGVyX19tYXJrX2hpZGRlblwiOyIsImltcG9ydCB7IE1hcmtzLCBNYXJrVmFsdWUsIE1hcmtQZXJjZW50IH0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xyXG5pbXBvcnQgU2xpZGVyQ29tcG9uZW50cyBmcm9tICcuLi9TbGlkZXJDb21wb25lbnRzL1NsaWRlckNvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBNSU5fU1BBQ0UsIE1BUktTX0hJRERFTiB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuaW1wb3J0ICcuL3NjYWxlTWFya3Muc2Nzcyc7XHJcblxyXG5jbGFzcyBTY2FsZU1hcmtzIGV4dGVuZHMgU2xpZGVyQ29tcG9uZW50cyB7XHJcbiAgcHVibGljIG1hcmtzOiBNYXJrcztcclxuXHJcbiAgY29uc3RydWN0b3Iocm9vdDogSFRNTERpdkVsZW1lbnQsIG1hcmtzOiBNYXJrcywgaXNWZXJ0aWNhbDogYm9vbGVhbikge1xyXG4gICAgc3VwZXIocm9vdCwgaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLm1hcmtzID0gbWFya3M7XHJcbiAgICB0aGlzLmluaXQoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JlYXRlTWFya3MoKTtcclxuICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLmFkanVzdE1hcmtWaXNpYmlsaXR5KCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZExpc3RlbmVycygpOiB2b2lkIHtcclxuICAgIHRoaXMucm9vdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlUm9vdENsaWNrLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVSb290Q2xpY2soZTogRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgY29uc3QgeyB2YWx1ZSwgcGVyY2VudCB9ID0gdGFyZ2V0LmRhdGFzZXQ7XHJcblxyXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BsdWdpbi1zbGlkZXJfX21hcmstdmFsdWUnKSAmJiBwZXJjZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5wZXJmb3JtQ2xpY2tNYXJrKE51bWJlcihwZXJjZW50KSwgTnVtYmVyKHZhbHVlKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZU1hcmtzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5tYXJrcy5mb3JFYWNoKChwZXJjZW50OiBNYXJrVmFsdWUsIHZhbHVlOiBNYXJrUGVyY2VudCkgPT4ge1xyXG4gICAgICB0aGlzLmNyZWF0ZU1hcmsodmFsdWUsIHBlcmNlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZU1hcmsodmFsdWU6IE1hcmtWYWx1ZSwgcGVyY2VudDogTWFya1BlcmNlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IG1hcmsgPSB0aGlzLmNyZWF0ZU1hcmtFbGVtZW50KHBlcmNlbnQpO1xyXG4gICAgY29uc3QgbWFya1ZhbHVlID0gdGhpcy5jcmVhdGVNYXJrVmFsdWVFbGVtZW50KHZhbHVlLCBwZXJjZW50KTtcclxuICAgIG1hcmsuYXBwZW5kKG1hcmtWYWx1ZSk7XHJcbiAgICB0aGlzLnJvb3QuYXBwZW5kKG1hcmspO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVNYXJrRWxlbWVudChwZXJjZW50OiBNYXJrUGVyY2VudCk6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgIGNvbnN0IG1hcmsgPSBTbGlkZXJDb21wb25lbnRzLmNyZWF0ZUVsZW1lbnQoJ3BsdWdpbi1zbGlkZXJfX21hcmsganMtcGx1Z2luLXNsaWRlcl9fbWFyaycpO1xyXG4gICAgbWFyay5jbGFzc0xpc3QuYWRkKGBwbHVnaW4tc2xpZGVyX19tYXJrXyR7dGhpcy5tb2R9YCk7XHJcbiAgICBtYXJrLnN0eWxlW3RoaXMuc3RhcnRQb2ludF0gPSBgJHtwZXJjZW50fSVgO1xyXG4gICAgcmV0dXJuIG1hcms7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZU1hcmtWYWx1ZUVsZW1lbnQodmFsdWU6IE1hcmtWYWx1ZSwgcGVyY2VudDogTWFya1BlcmNlbnQpOiBIVE1MU3BhbkVsZW1lbnQge1xyXG4gICAgY29uc3QgbWFya1ZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgbWFya1ZhbHVlLmNsYXNzTmFtZSA9IGBwbHVnaW4tc2xpZGVyX19tYXJrLXZhbHVlIHBsdWdpbi1zbGlkZXJfX21hcmstdmFsdWVfJHt0aGlzLm1vZH1gO1xyXG4gICAgbWFya1ZhbHVlLmRhdGFzZXQudmFsdWUgPSBgJHt2YWx1ZX1gO1xyXG4gICAgbWFya1ZhbHVlLmRhdGFzZXQucGVyY2VudCA9IGAke3BlcmNlbnR9YDtcclxuICAgIG1hcmtWYWx1ZS5pbm5lclRleHQgPSBgJHt2YWx1ZX1gO1xyXG4gICAgcmV0dXJuIG1hcmtWYWx1ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRqdXN0TWFya1Zpc2liaWxpdHkoKTogdm9pZCB7XHJcbiAgICBjb25zdCBtYXJrRWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcucGx1Z2luLXNsaWRlcl9fbWFyaycpKTtcclxuICAgIGxldCBsYXN0VmlzaWJsZU1hcmtQb3NpdGlvbjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgbWFya0VsZW1lbnRzLmZvckVhY2goKG1hcmspID0+IHtcclxuICAgICAgY29uc3QgbWFya1ZhbHVlRWxlbWVudCA9IG1hcmsucXVlcnlTZWxlY3RvcignLnBsdWdpbi1zbGlkZXJfX21hcmstdmFsdWUnKTtcclxuICAgICAgY29uc3QgbWFya1BlcmNlbnQgPSBtYXJrVmFsdWVFbGVtZW50ID8gTnVtYmVyKG1hcmtWYWx1ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBlcmNlbnQnKSkgOiBudWxsO1xyXG5cclxuICAgICAgaWYgKGxhc3RWaXNpYmxlTWFya1Bvc2l0aW9uID09PSBudWxsKSB7XHJcbiAgICAgICAgbWFyay5jbGFzc0xpc3QucmVtb3ZlKE1BUktTX0hJRERFTik7XHJcbiAgICAgICAgbGFzdFZpc2libGVNYXJrUG9zaXRpb24gPSBtYXJrUGVyY2VudDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGRpc3RhbmNlVG9MYXN0ID0gbWFya1BlcmNlbnQgIT09IG51bGwgPyBtYXJrUGVyY2VudCAtIGxhc3RWaXNpYmxlTWFya1Bvc2l0aW9uIDogMDtcclxuXHJcbiAgICAgIGlmIChkaXN0YW5jZVRvTGFzdCA8IE1JTl9TUEFDRSkge1xyXG4gICAgICAgIG1hcmsuY2xhc3NMaXN0LmFkZChNQVJLU19ISURERU4pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG1hcmsuY2xhc3NMaXN0LnJlbW92ZShNQVJLU19ISURERU4pO1xyXG4gICAgICAgIGxhc3RWaXNpYmxlTWFya1Bvc2l0aW9uID0gbWFya1BlcmNlbnQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2NhbGVNYXJrcztcclxuIiwiaW1wb3J0IHsgVGh1bWJBcmdzLCBUaHVtYkF0dHIgfSBmcm9tICdAc3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XHJcbmltcG9ydCBTbGlkZXJDb21wb25lbnRzIGZyb20gJy4uL1NsaWRlckNvbXBvbmVudHMvU2xpZGVyQ29tcG9uZW50cyc7XHJcbmltcG9ydCAnLi90aHVtYi5zY3NzJztcclxuXHJcbmNsYXNzIFRodW1iIGV4dGVuZHMgU2xpZGVyQ29tcG9uZW50cyB7XHJcbiAgcHJpdmF0ZSBtb3ZlZD86IG51bWJlcjtcclxuICB0aHVtYlBlcmNlbnQ6IG51bWJlcjtcclxuICB0aHVtYkVsZW1lbnQ/OiBIVE1MRGl2RWxlbWVudDtcclxuICB0aHVtYkF0dHI6IFRodW1iQXR0cjtcclxuICBtaW5WYWx1ZTogbnVtYmVyO1xyXG4gIG1heFZhbHVlOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZhbHVlczogVGh1bWJBcmdzKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHJvb3QsXHJcbiAgICAgIHRodW1iUGVyY2VudCA9IDAsXHJcbiAgICAgIGF0dHIgPSAndmFsdWVGcm9tJyxcclxuICAgICAgaXNWZXJ0aWNhbCxcclxuICAgICAgbWluVmFsdWUsXHJcbiAgICAgIG1heFZhbHVlXHJcbiAgICB9ID0gdmFsdWVzO1xyXG5cclxuICAgIHN1cGVyKHJvb3QsIGlzVmVydGljYWwpO1xyXG4gICAgdGhpcy50aHVtYlBlcmNlbnQgPSB0aHVtYlBlcmNlbnQ7XHJcbiAgICB0aGlzLnRodW1iQXR0ciA9IGF0dHI7XHJcbiAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7XHJcbiAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7XHJcblxyXG4gICAgdGhpcy5oYW5kbGVUaHVtYlBvaW50ZXJEb3duID0gdGhpcy5oYW5kbGVUaHVtYlBvaW50ZXJEb3duLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmhhbmRsZVRodW1iS2V5RG93biA9IHRoaXMuaGFuZGxlVGh1bWJLZXlEb3duLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmhhbmRsZVRodW1iVG91Y2ggPSB0aGlzLmhhbmRsZVRodW1iVG91Y2guYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy50aHVtYkVsZW1lbnQgPSB0aGlzLmNyZWF0ZVRodW1iKCk7XHJcbiAgICB0aGlzLnRodW1iRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGh1bWItYXR0cicsIHRoaXMudGh1bWJBdHRyKTtcclxuICAgIHRoaXMudGh1bWJFbGVtZW50LnRhYkluZGV4ID0gMTtcclxuICAgIHRoaXMucm9vdC5hcHBlbmQodGhpcy50aHVtYkVsZW1lbnQpO1xyXG4gICAgdGhpcy5zZXRQb3NpdGlvbih0aGlzLnRodW1iUGVyY2VudCk7XHJcbiAgICB0aGlzLmFkZExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldFBvc2l0aW9uKHRodW1iUGVyY2VudDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLnRodW1iUGVyY2VudCA9IHRodW1iUGVyY2VudDtcclxuICAgIHRoaXMuY2hlY2taSW5kKCk7XHJcbiAgICBpZiAodGhpcy50aHVtYkVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnRodW1iRWxlbWVudC5zdHlsZVt0aGlzLnN0YXJ0UG9pbnRdID0gYCR7dGhpcy50aHVtYlBlcmNlbnR9JWA7XHJcblxyXG4gICAgICBjb25zdCBzY2FsZVZhbHVlID0gdGhpcy5taW5WYWx1ZSArICh0aGlzLnRodW1iUGVyY2VudCAvIDEwMCkgKiAodGhpcy5tYXhWYWx1ZSAtIHRoaXMubWluVmFsdWUpO1xyXG4gICAgICB0aGlzLnRodW1iRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCBzY2FsZVZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFRodW1iKCk6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLnRodW1iRWxlbWVudDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRUaHVtYkF0dHIoKTogVGh1bWJBdHRyIHtcclxuICAgIHJldHVybiB0aGlzLnRodW1iQXR0cjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkTGlzdGVuZXJzKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMudGh1bWJFbGVtZW50ID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIHRoaXMudGh1bWJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5oYW5kbGVUaHVtYlBvaW50ZXJEb3duKTtcclxuICAgIHRoaXMudGh1bWJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZVRodW1iS2V5RG93bik7XHJcbiAgICB0aGlzLnRodW1iRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAndG91Y2hzdGFydCcsXHJcbiAgICAgIHRoaXMuaGFuZGxlVGh1bWJUb3VjaCxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZVRodW1iKCk6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgIGNvbnN0IHRodW1iRWxlbWVudCA9IFNsaWRlckNvbXBvbmVudHMuY3JlYXRlRWxlbWVudCgncGx1Z2luLXNsaWRlcl9fdGh1bWIganMtcGx1Z2luLXNsaWRlcl9fdGh1bWInKTtcclxuICAgIHRodW1iRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnc2xpZGVyJyk7XHJcbiAgICB0aHVtYkVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbWluJywgdGhpcy5taW5WYWx1ZS50b1N0cmluZygpKTtcclxuICAgIHRodW1iRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtYXgnLCB0aGlzLm1heFZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgdGh1bWJFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHRoaXMudGh1bWJQZXJjZW50LnRvU3RyaW5nKCkpO1xyXG4gICAgdGh1bWJFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdWYWx1ZSBzbGlkZXInKTtcclxuICAgIHJldHVybiB0aHVtYkVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoZWNrWkluZCgpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnRodW1iRWxlbWVudCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy50aHVtYkF0dHIgPT09ICd2YWx1ZUZyb20nICYmIHRoaXMudGh1bWJQZXJjZW50ID09PSAxMDApIHtcclxuICAgICAgdGhpcy50aHVtYkVsZW1lbnQuc3R5bGUuekluZGV4ID0gJzEwJztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnRodW1iQXR0ciA9PT0gJ3ZhbHVlRnJvbScgJiYgdGhpcy50aHVtYlBlcmNlbnQgPCAxMDApIHtcclxuICAgICAgdGhpcy50aHVtYkVsZW1lbnQuc3R5bGUuekluZGV4ID0gJzUnO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudGh1bWJBdHRyID09PSAndmFsdWVUbycgJiYgdGhpcy50aHVtYlBlcmNlbnQgPT09IDApIHtcclxuICAgICAgdGhpcy50aHVtYkVsZW1lbnQuc3R5bGUuekluZGV4ID0gJzEwJztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnRodW1iQXR0ciA9PT0gJ3ZhbHVlVG8nICYmIHRoaXMudGh1bWJQZXJjZW50ID4gMCkge1xyXG4gICAgICB0aGlzLnRodW1iRWxlbWVudC5zdHlsZS56SW5kZXggPSAnNSc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZVRodW1iVG91Y2goZTogVG91Y2hFdmVudCk6IHZvaWQge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKHRoaXMudGh1bWJFbGVtZW50ID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGNvbnN0IHNpemVFbGVtZW50ID0gdGhpcy50aHVtYkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5zdGFydFBvaW50XTtcclxuICAgIHRoaXMubW92ZWQgPSBlLnRvdWNoZXNbMF1bdGhpcy5kaXJlY3Rpb25dIC0gKHNpemVFbGVtZW50XHJcbiAgICAgICsgKHRoaXMudGh1bWJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuc2l6ZV0gLyAyKSk7XHJcbiAgICBzdXBlci5wZXJmb3JtVG91Y2hNb3ZlKHRoaXMubW92ZWQsIHRoaXMudGh1bWJBdHRyKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlVGh1bWJQb2ludGVyRG93bihlOiBQb2ludGVyRXZlbnQpOiB2b2lkIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICh0aGlzLnRodW1iRWxlbWVudCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICB0aGlzLm1vdmVkID0gZVt0aGlzLmRpcmVjdGlvbl0gLSAodGhpcy50aHVtYkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5zdGFydFBvaW50XVxyXG4gICAgICArICh0aGlzLnRodW1iRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0aGlzLnNpemVdIC8gMikpO1xyXG4gICAgdGhpcy5jaGVja1pJbmQoKTtcclxuICAgIHN1cGVyLnBlcmZvcm1Qb2ludGVyTW92ZSh0aGlzLm1vdmVkLCB0aGlzLnRodW1iQXR0cik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZVRodW1iS2V5RG93bihlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICBpZihlLmtleSA9PT0gJ1RhYicpIHJldHVybjtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IHsga2V5IH0gPSBlO1xyXG4gICAgaWYgKGtleSA9PT0gJ0Fycm93TGVmdCcgfHwga2V5ID09PSAnQXJyb3dVcCcgfHwga2V5ID09PSAnQXJyb3dSaWdodCcgfHwga2V5ID09PSAnQXJyb3dEb3duJykgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKChrZXkgPT09ICdBcnJvd0xlZnQnICYmICF0aGlzLmlzVmVydGljYWwpIHx8IChrZXkgPT09ICdBcnJvd1VwJyAmJiB0aGlzLmlzVmVydGljYWwpKSB7XHJcbiAgICAgIHN1cGVyLnBlcmZvcm1LZXlEb3duKCdkZWNyZW1lbnQnLCB0aGlzLnRodW1iQXR0cik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKChrZXkgPT09ICdBcnJvd1JpZ2h0JyAmJiAhdGhpcy5pc1ZlcnRpY2FsKSB8fCAoa2V5ID09PSAnQXJyb3dEb3duJyAmJiB0aGlzLmlzVmVydGljYWwpKSB7XHJcbiAgICAgIHN1cGVyLnBlcmZvcm1LZXlEb3duKCdpbmNyZW1lbnQnLCB0aGlzLnRodW1iQXR0cik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUaHVtYjtcclxuIiwiaW1wb3J0IHsgVGlwRGF0YSB9IGZyb20gJ0BzcmMvY29tcG9uZW50cy9JbnRlcmZhY2VzJztcclxuaW1wb3J0IFNsaWRlckNvbXBvbmVudHMgZnJvbSAnLi4vU2xpZGVyQ29tcG9uZW50cy9TbGlkZXJDb21wb25lbnRzJztcclxuaW1wb3J0ICcuL3RpcC5zY3NzJztcclxuXHJcbmNsYXNzIFRpcCBleHRlbmRzIFNsaWRlckNvbXBvbmVudHMge1xyXG4gIHRpcDogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gIHZhbHVlVGlwOiBudW1iZXIgfCBzdHJpbmc7XHJcblxyXG4gIHByaXZhdGUgcGVyY2VudFBvc2l0aW9uOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGRhdGE6IFRpcERhdGEpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgcm9vdCxcclxuICAgICAgcGVyY2VudFBvc2l0aW9uLFxyXG4gICAgICB2YWx1ZVRpcCxcclxuICAgICAgaXNWZXJ0aWNhbCxcclxuICAgIH0gPSBkYXRhO1xyXG5cclxuICAgIHN1cGVyKHJvb3QsIGlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5wZXJjZW50UG9zaXRpb24gPSBwZXJjZW50UG9zaXRpb247XHJcbiAgICB0aGlzLnZhbHVlVGlwID0gdmFsdWVUaXA7XHJcblxyXG4gICAgdGhpcy50aXAgPSB0aGlzLmNyZWF0ZVRpcCgpO1xyXG4gICAgdGhpcy5hZGRUaXAoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRWYWx1ZVRpcCh2YWx1ZVRpcDogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLnRpcC5pbm5lclRleHQgPSBgJHt2YWx1ZVRpcH1gO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGhpZGVUaXAoKTogdm9pZCB7XHJcbiAgICB0aGlzLnRpcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNob3dUaXAoKTogdm9pZCB7XHJcbiAgICB0aGlzLnRpcC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0UG9zaXRpb24ocGVyY2VudFBvc2l0aW9uOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMudGlwLnN0eWxlW3RoaXMuc3RhcnRQb2ludF0gPSBgJHtwZXJjZW50UG9zaXRpb259JWA7XHJcbiAgICB0aGlzLnRpcC5pbm5lclRleHQgPSBgJHt2YWx1ZX1gO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVUaXAoKTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgY29uc3QgdGlwID0gU2xpZGVyQ29tcG9uZW50cy5jcmVhdGVFbGVtZW50KCdwbHVnaW4tc2xpZGVyX190aXAganMtcGx1Z2luLXNsaWRlcl9fdGlwJyk7XHJcbiAgICB0aXAuY2xhc3NMaXN0LmFkZChgcGx1Z2luLXNsaWRlcl9fdGlwXyR7dGhpcy5tb2R9YCk7XHJcbiAgICB0aXAuaW5uZXJUZXh0ID0gYCR7dGhpcy52YWx1ZVRpcH1gO1xyXG4gICAgdGlwLnN0eWxlW3N1cGVyLnN0YXJ0UG9pbnRdID0gYCR7dGhpcy5wZXJjZW50UG9zaXRpb259JWA7XHJcbiAgICByZXR1cm4gdGlwO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRUaXAoKSB7XHJcbiAgICB0aGlzLnJvb3QuYXBwZW5kKHRoaXMudGlwKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRpcDtcclxuIiwiaW1wb3J0IE9ic2VydmVyIGZyb20gJ0BzcmMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xyXG5pbXBvcnQgeyBTTElERVJfRVZFTlRTIH0gZnJvbSAnQHNyYy9PYnNlcnZlci9ldmVudHMnO1xyXG5pbXBvcnQge1xyXG4gIFNsaWRlck9wdGlvbnMsXHJcbiAgU2xpZGVyRXZlbnRWYWxDaGFuZ2VkRGF0YSxcclxuICBTY2FsZUNsaWNrRGF0YSxcclxuICBUaHVtYkF0dHIsXHJcbn0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xyXG5pbXBvcnQgUHJvZ3Jlc3MgZnJvbSAnLi4vUHJvZ3Jlc3MvUHJvZ3Jlc3MnO1xyXG5pbXBvcnQgU2NhbGUgZnJvbSAnLi4vU2NhbGUvU2NhbGUnO1xyXG5pbXBvcnQgU2NhbGVNYXJrcyBmcm9tICcuLi9TY2FsZU1hcmtzL1NjYWxlTWFya3MnO1xyXG5pbXBvcnQgU2xpZGVyQ29tcG9uZW50cyBmcm9tICcuLi9TbGlkZXJDb21wb25lbnRzL1NsaWRlckNvbXBvbmVudHMnO1xyXG5pbXBvcnQgVGh1bWIgZnJvbSAnLi4vVGh1bWIvVGh1bWInO1xyXG5pbXBvcnQgVGlwIGZyb20gJy4uL1RpcC9UaXAnO1xyXG5pbXBvcnQgJy4vc2xpZGVyLnNjc3MnO1xyXG5cclxuY2xhc3MgU2xpZGVyIGV4dGVuZHMgT2JzZXJ2ZXIge1xyXG5cclxuICBwdWJsaWMgY2xhc3NFbGVtZW50czoge1xyXG4gICAgdGh1bWJGcm9tOiBUaHVtYiB8IHVuZGVmaW5lZDtcclxuICAgIHRodW1iVG86IFRodW1iIHwgdW5kZWZpbmVkO1xyXG4gICAgc2NhbGU6IFNjYWxlIHwgdW5kZWZpbmVkO1xyXG4gICAgc2NhbGVNYXJrczogU2NhbGVNYXJrcyB8IHVuZGVmaW5lZDtcclxuICAgIHRpcEZyb206IFRpcCB8IHVuZGVmaW5lZDtcclxuICAgIHRpcFRvOiBUaXAgfCB1bmRlZmluZWQ7XHJcbiAgICBwcm9ncmVzczogUHJvZ3Jlc3MgfCB1bmRlZmluZWQ7XHJcbiAgICBzbGlkZXJDb21wb25lbnRzOiBTbGlkZXJDb21wb25lbnRzIHwgdW5kZWZpbmVkO1xyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBib29sZWFuVmFyaWFibGVzOiB7XHJcbiAgICBpc1Byb2dyZXNzOiBib29sZWFuO1xyXG4gICAgaXNSYW5nZTogYm9vbGVhbjtcclxuICAgIGlzVmVydGljYWw6IGJvb2xlYW47XHJcbiAgICBpc1RpcDogYm9vbGVhbjtcclxuICAgIGlzU2NhbGVNYXJrczogYm9vbGVhbjtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIG51bWJlclZhcmlhYmxlczoge1xyXG4gICAgdGlwVmFsdWVGcm9tOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgICB0aHVtYlBlcmNlbnRGcm9tOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgICB0aHVtYlBlcmNlbnRUbzogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgdGlwVmFsdWVUbzogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgZG9tOiB7XHJcbiAgICBzbGlkZXI6IHVuZGVmaW5lZCB8IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgc2NhbGVFbGVtZW50OiB1bmRlZmluZWQgfCBIVE1MRGl2RWxlbWVudDtcclxuICAgIHJvb3Q/OiBFbGVtZW50O1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgc2NhbGVNYXA6IE1hcDxudW1iZXIsIG51bWJlcj4gfCB1bmRlZmluZWQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJvb3Q6IEVsZW1lbnQsIHByb3RlY3RlZCByZWFkb25seSBzdGF0ZTogU2xpZGVyT3B0aW9ucykge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLmRvbSA9IHtcclxuICAgICAgc2xpZGVyOiB1bmRlZmluZWQsXHJcbiAgICAgIHNjYWxlRWxlbWVudDogdW5kZWZpbmVkLFxyXG4gICAgICByb290LFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm51bWJlclZhcmlhYmxlcyA9IHtcclxuICAgICAgdGlwVmFsdWVGcm9tOiAwLFxyXG4gICAgICB0aHVtYlBlcmNlbnRGcm9tOiAwLFxyXG4gICAgICB0aHVtYlBlcmNlbnRUbzogdW5kZWZpbmVkLFxyXG4gICAgICB0aXBWYWx1ZVRvOiB1bmRlZmluZWQsXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9IHtcclxuICAgICAgaXNQcm9ncmVzczogZmFsc2UsXHJcbiAgICAgIGlzUmFuZ2U6IGZhbHNlLFxyXG4gICAgICBpc1ZlcnRpY2FsOiBmYWxzZSxcclxuICAgICAgaXNUaXA6IGZhbHNlLFxyXG4gICAgICBpc1NjYWxlTWFya3M6IGZhbHNlLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNsYXNzRWxlbWVudHMgPSB7XHJcbiAgICAgIHRodW1iRnJvbTogdW5kZWZpbmVkLFxyXG4gICAgICB0aHVtYlRvOiB1bmRlZmluZWQsXHJcbiAgICAgIHNjYWxlOiB1bmRlZmluZWQsXHJcbiAgICAgIHNjYWxlTWFya3M6IHVuZGVmaW5lZCxcclxuICAgICAgdGlwRnJvbTogdW5kZWZpbmVkLFxyXG4gICAgICB0aXBUbzogdW5kZWZpbmVkLFxyXG4gICAgICBwcm9ncmVzczogdW5kZWZpbmVkLFxyXG4gICAgICBzbGlkZXJDb21wb25lbnRzOiB1bmRlZmluZWQsXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlVmFyaWFibGVzKHJvb3QsIHN0YXRlKTtcclxuICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlU2xpZGVyKCk6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgIGNvbnN0IHNsaWRlcldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHNsaWRlcldyYXBwZXIuY2xhc3NOYW1lID0gJ3BsdWdpbi1zbGlkZXIganMtcGx1Z2luLXNsaWRlcic7XHJcbiAgICByZXR1cm4gc2xpZGVyV3JhcHBlcjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGUoXHJcbiAgICBkYXRhOiBTbGlkZXJFdmVudFZhbENoYW5nZWREYXRhIHwgU2NhbGVDbGlja0RhdGEsXHJcbiAgICBldmVudDogc3RyaW5nLFxyXG4gICk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuZG9tID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmNsYXNzRWxlbWVudHMuc2xpZGVyQ29tcG9uZW50cyA9PT0gdW5kZWZpbmVkXHJcbiAgICAgIHx8IHRoaXMuZG9tLnNjYWxlRWxlbWVudCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBjb25zdCB7IHNpemUgfSA9IHRoaXMuY2xhc3NFbGVtZW50cy5zbGlkZXJDb21wb25lbnRzO1xyXG4gICAgY29uc3Qgc2NhbGVTaXplID0gdGhpcy5kb20uc2NhbGVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3NpemVdO1xyXG5cclxuICAgIGlmIChldmVudCA9PT0gU0xJREVSX0VWRU5UUy5WQUxVRV9TVEFSVF9DSEFOR0UpIHtcclxuICAgICAgY29uc3Qgc2xpZGVyRGF0YSA9IHsgLi4uZGF0YSwgc2NhbGVTaXplIH07XHJcbiAgICAgIHRoaXMuZW1pdChTTElERVJfRVZFTlRTLkRBVEFfQ09MTEVDVEVELCBzbGlkZXJEYXRhKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZW1pdChTTElERVJfRVZFTlRTLkRBVEFfQ09MTEVDVEVELCBkYXRhKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRTdGF0ZShkYXRhOiBTbGlkZXJPcHRpb25zKTogdm9pZCB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHRodW1iUGVyY2VudEZyb20sXHJcbiAgICAgIHZhbHVlRnJvbSxcclxuICAgICAgaXNSYW5nZSxcclxuICAgICAgdGh1bWJQZXJjZW50VG8sXHJcbiAgICAgIHZhbHVlVG8sXHJcbiAgICB9ID0gZGF0YTtcclxuXHJcbiAgICB0aGlzLnNldFRodW1icyh0aHVtYlBlcmNlbnRGcm9tLCB0aHVtYlBlcmNlbnRUbywgaXNSYW5nZSk7XHJcbiAgICB0aGlzLnNldFRpcHModmFsdWVGcm9tLCB2YWx1ZVRvLCBpc1JhbmdlKTtcclxuICAgIHRoaXMuc2V0UHJvZ3Jlc3ModGh1bWJQZXJjZW50RnJvbSwgdGh1bWJQZXJjZW50VG8sIGlzUmFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRUaHVtYnMoXHJcbiAgICB0aHVtYlBlcmNlbnRGcm9tOiBudW1iZXIsXHJcbiAgICB0aHVtYlBlcmNlbnRUbzogbnVtYmVyIHwgdW5kZWZpbmVkLFxyXG4gICAgaXNSYW5nZTogYm9vbGVhbixcclxuICApIHtcclxuICAgIGlmICh0aGlzLmNsYXNzRWxlbWVudHMudGh1bWJGcm9tID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGlmICh0aGlzLm51bWJlclZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5kb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudEZyb20gPSB0aHVtYlBlcmNlbnRGcm9tO1xyXG4gICAgdGhpcy5jbGFzc0VsZW1lbnRzLnRodW1iRnJvbS5zZXRQb3NpdGlvbih0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tKTtcclxuXHJcbiAgICBpZiAoaXNSYW5nZSAmJiB0aGlzLmRvbS5zbGlkZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBjb25zdCBzZWNvbmRUaHVtYiA9IHRoaXMuZG9tLnNsaWRlci5xdWVyeVNlbGVjdG9yKCcjdmFsdWVUbycpO1xyXG4gICAgICBpZiAoc2Vjb25kVGh1bWIgPT09IG51bGwgJiYgdGh1bWJQZXJjZW50VG8gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuc2V0VGh1bWIoJ3ZhbHVlVG8nLCB0aHVtYlBlcmNlbnRUbyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNSYW5nZSAmJiB0aHVtYlBlcmNlbnRUbyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuY2xhc3NFbGVtZW50cy50aHVtYlRvKSB7XHJcbiAgICAgIHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudFRvID0gdGh1bWJQZXJjZW50VG87XHJcbiAgICAgIHRoaXMuY2xhc3NFbGVtZW50cy50aHVtYlRvLnNldFBvc2l0aW9uKHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudFRvKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VGh1bWIoYXR0cjogVGh1bWJBdHRyLCB0aHVtYlBlcmNlbnQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgdGh1bWIgPSBhdHRyID09PSAndmFsdWVUbycgPyAndGh1bWJUbycgOiAndGh1bWJGcm9tJztcclxuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5kb20uc2NhbGVFbGVtZW50ID09PSB1bmRlZmluZWRcclxuICAgICAgfHwgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgdGhpcy5jbGFzc0VsZW1lbnRzW3RodW1iXSA9IG5ldyBUaHVtYih7XHJcbiAgICAgIHJvb3Q6IHRoaXMuZG9tLnNjYWxlRWxlbWVudCxcclxuICAgICAgdGh1bWJQZXJjZW50LFxyXG4gICAgICBhdHRyOiBhdHRyLFxyXG4gICAgICBpc1ZlcnRpY2FsOiB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNWZXJ0aWNhbCxcclxuICAgICAgbWluVmFsdWU6IHRoaXMuc3RhdGUubWluLFxyXG4gICAgICBtYXhWYWx1ZTogdGhpcy5zdGF0ZS5tYXgsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VGlwcyh2YWx1ZUZyb206IG51bWJlciwgdmFsdWVUbzogbnVtYmVyIHwgdW5kZWZpbmVkLCBpc1JhbmdlOiBib29sZWFuKSB7XHJcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGlmICh0aGlzLm51bWJlclZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgeyBpc1RpcCB9ID0gdGhpcy5ib29sZWFuVmFyaWFibGVzO1xyXG4gICAgaWYgKGlzVGlwICYmIHRoaXMuY2xhc3NFbGVtZW50cy50aXBGcm9tKSB7XHJcbiAgICAgIHRoaXMubnVtYmVyVmFyaWFibGVzLnRpcFZhbHVlRnJvbSA9IHZhbHVlRnJvbTtcclxuICAgICAgaWYgKHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudEZyb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMudGlwRnJvbS5zZXRQb3NpdGlvbihcclxuICAgICAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tLFxyXG4gICAgICAgIHRoaXMubnVtYmVyVmFyaWFibGVzLnRpcFZhbHVlRnJvbSxcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc05lZWREb3VibGVUaXAoKSkge1xyXG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMudGlwRnJvbT8uc2V0VmFsdWVUaXAoYCR7dmFsdWVGcm9tfSAtICR7dmFsdWVUb31gKTtcclxuICAgICAgdGhpcy5jbGFzc0VsZW1lbnRzLnRpcFRvPy5oaWRlVGlwKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMudGlwVG8/LnNob3dUaXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNSYW5nZVxyXG4gICAgICAmJiB0aGlzLmNsYXNzRWxlbWVudHMudGlwVG8gJiYgdmFsdWVUbyAhPT0gdW5kZWZpbmVkICYmIHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudFRvKSB7XHJcbiAgICAgIHRoaXMubnVtYmVyVmFyaWFibGVzLnRpcFZhbHVlVG8gPSB2YWx1ZVRvO1xyXG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMudGlwVG8uc2V0UG9zaXRpb24oXHJcbiAgICAgICAgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG8sXHJcbiAgICAgICAgdGhpcy5udW1iZXJWYXJpYWJsZXMudGlwVmFsdWVUbyxcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VGlwKHZhbHVlRGlyZWN0aW9uID0gJ3ZhbHVlRnJvbScpIHtcclxuICAgIGNvbnN0IHRpcFZhbHVlID0gdmFsdWVEaXJlY3Rpb24gPT09ICd2YWx1ZUZyb20nID8gJ3RpcFZhbHVlRnJvbScgOiAndGlwVmFsdWVUbyc7XHJcbiAgICBjb25zdCB0aXAgPSB2YWx1ZURpcmVjdGlvbiA9PT0gJ3ZhbHVlRnJvbScgPyAndGlwRnJvbScgOiAndGlwVG8nO1xyXG4gICAgY29uc3QgcGVyY2VudFBvc2l0aW9uID0gdmFsdWVEaXJlY3Rpb24gPT09ICd2YWx1ZUZyb20nID8gJ3RodW1iUGVyY2VudEZyb20nIDogJ3RodW1iUGVyY2VudFRvJztcclxuXHJcbiAgICBpZiAodGhpcy5udW1iZXJWYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuZG9tID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG5cclxuICAgIGlmICh2YWx1ZURpcmVjdGlvbiA9PT0gJ3ZhbHVlVG8nICYmIHRoaXMubnVtYmVyVmFyaWFibGVzW3BlcmNlbnRQb3NpdGlvbl0gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuZG9tLnNjYWxlRWxlbWVudCA9PT0gdW5kZWZpbmVkXHJcbiAgICAgIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1ZlcnRpY2FsID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuXHJcbiAgICB0aGlzLmNsYXNzRWxlbWVudHNbdGlwXSA9IG5ldyBUaXAoe1xyXG4gICAgICByb290OiB0aGlzLmRvbS5zY2FsZUVsZW1lbnQsXHJcbiAgICAgIHBlcmNlbnRQb3NpdGlvbjogdGhpcy5udW1iZXJWYXJpYWJsZXNbcGVyY2VudFBvc2l0aW9uXSAgPz8gMCxcclxuICAgICAgdmFsdWVUaXA6IHRpcFZhbHVlLFxyXG4gICAgICBpc1ZlcnRpY2FsOiB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNWZXJ0aWNhbCxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRQcm9ncmVzcyhcclxuICAgIHRodW1iUGVyY2VudEZyb206IG51bWJlcixcclxuICAgIHRodW1iUGVyY2VudFRvOiBudW1iZXIgfCB1bmRlZmluZWQsXHJcbiAgICBpc1JhbmdlOiBib29sZWFuLFxyXG4gICkge1xyXG4gICAgaWYgKHRoaXMuZG9tID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMubnVtYmVyVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmRvbS5zbGlkZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHByb2dyZXNzID0gdGhpcy5kb20uc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5qcy1wbHVnaW4tc2xpZGVyX19wcm9ncmVzcycpO1xyXG4gICAgaWYgKHByb2dyZXNzID09PSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uRW5kID0gdHlwZW9mIHRodW1iUGVyY2VudFRvID09PSAnbnVtYmVyJyA/IHRodW1iUGVyY2VudFRvIDogMDtcclxuXHJcbiAgICAgIGlmICh0aGlzLmRvbS5zY2FsZUVsZW1lbnQgPT09IHVuZGVmaW5lZFxyXG4gICAgICAgIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1ZlcnRpY2FsID09PSB1bmRlZmluZWRcclxuICAgICAgICB8fCB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgICAgdGhpcy5jbGFzc0VsZW1lbnRzLnByb2dyZXNzID0gbmV3IFByb2dyZXNzKHtcclxuICAgICAgICByb290OiB0aGlzLmRvbS5zY2FsZUVsZW1lbnQsXHJcbiAgICAgICAgcG9zaXRpb25TdGFydDogdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSxcclxuICAgICAgICBwb3NpdGlvbkVuZCxcclxuICAgICAgICBpc1ZlcnRpY2FsOiB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNWZXJ0aWNhbCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUHJvZ3Jlc3MgJiYgaXNSYW5nZSAmJiB0aHVtYlBlcmNlbnRUbykge1xyXG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMucHJvZ3Jlc3M/LnNldFByb2dyZXNzUG9zaXRpb24oXHJcbiAgICAgICAgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSxcclxuICAgICAgICB0aHVtYlBlcmNlbnRUbyAtIHRodW1iUGVyY2VudEZyb20sXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUHJvZ3Jlc3MgJiYgdGh1bWJQZXJjZW50VG8gPT09IHRodW1iUGVyY2VudEZyb20pIHtcclxuICAgICAgdGhpcy5jbGFzc0VsZW1lbnRzLnByb2dyZXNzPy5zZXRQcm9ncmVzc1Bvc2l0aW9uKDAsIDApO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1Byb2dyZXNzICYmICFpc1JhbmdlKSB7XHJcbiAgICAgIHRoaXMuY2xhc3NFbGVtZW50cy5wcm9ncmVzcz8uc2V0UHJvZ3Jlc3NQb3NpdGlvbigwLCB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICB0aGlzLmRvbS5zbGlkZXIgPSBTbGlkZXIuY3JlYXRlU2xpZGVyKCk7XHJcbiAgICB0aGlzLmNyZWF0ZUVsZW1lbnRzKCk7XHJcbiAgICB0aGlzLmFkZFNsaWRlcigpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVWYXJpYWJsZXMocm9vdDogRWxlbWVudCwgc3RhdGU6IFNsaWRlck9wdGlvbnMpOiB2b2lkIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgaXNUaXAsXHJcbiAgICAgIHZhbHVlRnJvbSxcclxuICAgICAgdmFsdWVUbyxcclxuICAgICAgdGh1bWJQZXJjZW50RnJvbSxcclxuICAgICAgdGh1bWJQZXJjZW50VG8sXHJcbiAgICAgIGlzUHJvZ3Jlc3MsXHJcbiAgICAgIGlzUmFuZ2UsXHJcbiAgICAgIHNjYWxlTWFwLFxyXG4gICAgICBpc1ZlcnRpY2FsLFxyXG4gICAgICBzY2FsZU1hcmtzLFxyXG4gICAgfSA9IHN0YXRlO1xyXG5cclxuICAgIGlmICh0aGlzLm51bWJlclZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tID0gdGh1bWJQZXJjZW50RnJvbTtcclxuICAgIGlmICh0aHVtYlBlcmNlbnRUbykgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG8gPSB0aHVtYlBlcmNlbnRUbztcclxuXHJcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1RpcCA9IGlzVGlwIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5udW1iZXJWYXJpYWJsZXMudGlwVmFsdWVGcm9tID0gdmFsdWVGcm9tIHx8IDA7XHJcbiAgICB0aGlzLm51bWJlclZhcmlhYmxlcy50aXBWYWx1ZVRvID0gdmFsdWVUbyB8fCAwO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUHJvZ3Jlc3MgPSBpc1Byb2dyZXNzIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UgPSBpc1JhbmdlIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5zY2FsZU1hcCA9IHNjYWxlTWFwO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzU2NhbGVNYXJrcyA9IHNjYWxlTWFya3M7XHJcblxyXG4gICAgaWYgKHRoaXMuZG9tID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIHRoaXMuZG9tLnJvb3QgPSByb290O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVFbGVtZW50cygpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmRvbSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkXHJcbiAgICAgIHx8IHRoaXMubnVtYmVyVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmRvbS5zbGlkZXIgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNWZXJ0aWNhbCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcblxyXG4gICAgdGhpcy5jbGFzc0VsZW1lbnRzLnNsaWRlckNvbXBvbmVudHMgPSBuZXcgU2xpZGVyQ29tcG9uZW50cyhcclxuICAgICAgdGhpcy5kb20uc2xpZGVyLFxyXG4gICAgICB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNWZXJ0aWNhbCxcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5jbGFzc0VsZW1lbnRzLnNjYWxlID0gbmV3IFNjYWxlKHRoaXMuZG9tLnNsaWRlciwgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5kb20uc2NhbGVFbGVtZW50ID0gdGhpcy5jbGFzc0VsZW1lbnRzLnNjYWxlLmdldFNjYWxlKCk7XHJcbiAgICB0aGlzLnNldFRodW1iKCd2YWx1ZUZyb20nLCB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tKTtcclxuXHJcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UgJiYgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG8gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnNldFRodW1iKCd2YWx1ZVRvJywgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG8pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNUaXApIHtcclxuICAgICAgdGhpcy5zZXRUaXAoJ3ZhbHVlRnJvbScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNUaXAgJiYgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG9cclxuICAgICAgJiYgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UgJiYgdGhpcy5udW1iZXJWYXJpYWJsZXMudGlwVmFsdWVUbyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuc2V0VGlwKCd2YWx1ZVRvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5zZXRQcm9ncmVzcyh0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tLCAwLCB0aGlzLmJvb2xlYW5WYXJpYWJsZXMuaXNSYW5nZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuc2NhbGVNYXAgJiYgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzU2NhbGVNYXJrcykge1xyXG4gICAgICB0aGlzLmNsYXNzRWxlbWVudHMuc2NhbGVNYXJrcyA9IG5ldyBTY2FsZU1hcmtzKFxyXG4gICAgICAgIHRoaXMuZG9tLnNjYWxlRWxlbWVudCxcclxuICAgICAgICB0aGlzLnNjYWxlTWFwLFxyXG4gICAgICAgIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1ZlcnRpY2FsLFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTbGlkZXIoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5kb20gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuZG9tLnJvb3QgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmRvbS5zbGlkZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgdGhpcy5kb20ucm9vdC5hcHBlbmQodGhpcy5kb20uc2xpZGVyKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNOZWVkRG91YmxlVGlwKCk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMubnVtYmVyVmFyaWFibGVzID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcclxuICAgIGlmICh0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRUbyA9PT0gdW5kZWZpbmVkXHJcbiAgICAgIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlID09PSB1bmRlZmluZWRcclxuICAgICAgfHwgdGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50RnJvbSA9PT0gdW5kZWZpbmVkXHJcbiAgICAgIHx8IHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1RpcCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgcmV0dXJuICgodGhpcy5udW1iZXJWYXJpYWJsZXMudGh1bWJQZXJjZW50VG8gLSB0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRGcm9tIDw9IDIpXHJcbiAgICAgIHx8ICh0aGlzLm51bWJlclZhcmlhYmxlcy50aHVtYlBlcmNlbnRUbyA9PT0gMFxyXG4gICAgICAgICYmIHRoaXMubnVtYmVyVmFyaWFibGVzLnRodW1iUGVyY2VudEZyb20gPT09IDApKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNsaWRlcjsiLCJpbXBvcnQgT2JzZXJ2ZXIgZnJvbSAnQHNyYy9PYnNlcnZlci9PYnNlcnZlcic7XHJcbmltcG9ydCB7IFNMSURFUl9FVkVOVFMgfSBmcm9tICdAc3JjL09ic2VydmVyL2V2ZW50cyc7XHJcbmltcG9ydCB7IFNsaWRlck9wdGlvbnMgfSBmcm9tICdAc3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XHJcbmltcG9ydCBTbGlkZXIgZnJvbSAnLi9zdWJWaWV3cy9TbGlkZXIvU2xpZGVyJztcclxuXHJcbmNsYXNzIFZpZXcgZXh0ZW5kcyBPYnNlcnZlciB7XHJcbiAgcHJpdmF0ZSByb290PzogRWxlbWVudDtcclxuXHJcbiAgcHJpdmF0ZSBzbGlkZXI/OiBTbGlkZXI7XHJcblxyXG4gIHByb3RlY3RlZCBpc1JhbmdlPzogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3Iocm9vdDogRWxlbWVudCwgcHJvdGVjdGVkIHJlYWRvbmx5IHN0YXRlOiBTbGlkZXJPcHRpb25zKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5pbml0KHJvb3QsIHN0YXRlKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVTbGlkZXIoZGF0YTogU2xpZGVyT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc2xpZGVyID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIHRoaXMuc2xpZGVyLnNldFN0YXRlKGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHVwZGF0ZShkYXRhOiBTbGlkZXJPcHRpb25zLCBldmVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBpZiAoZXZlbnQgPT09IFNMSURFUl9FVkVOVFMuREFUQV9DT0xMRUNURUQpIHtcclxuICAgICAgdGhpcy5lbWl0KFNMSURFUl9FVkVOVFMuVkFMVUVfQ0hBTkdFRCwgZGF0YSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQgPT09IFNMSURFUl9FVkVOVFMuVkFMVUVfQ0hBTkdFRCkge1xyXG4gICAgICB0aGlzLnVwZGF0ZVNsaWRlcihkYXRhKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRSb290KCk6IEVsZW1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHRoaXMucm9vdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRSb290KHJvb3Q6IEVsZW1lbnQpIHtcclxuICAgIHRoaXMucm9vdCA9IHJvb3Q7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0U2xpZGVyKCk6IFNsaWRlciB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdGhpcy5zbGlkZXI7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0U2xpZGVyKHNsaWRlcjogU2xpZGVyKSB7XHJcbiAgICB0aGlzLnNsaWRlciA9IHNsaWRlcjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdChyb290OiBFbGVtZW50LCBzdGF0ZTogU2xpZGVyT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgY29uc3QgeyBpc1JhbmdlIH0gPSBzdGF0ZTtcclxuICAgIHRoaXMucm9vdCA9IHJvb3Q7XHJcbiAgICB0aGlzLmlzUmFuZ2UgPSBpc1JhbmdlO1xyXG4gICAgdGhpcy5zbGlkZXIgPSBuZXcgU2xpZGVyKHJvb3QsIHN0YXRlKTtcclxuICAgIHRoaXMuYWRkU3Vic2NyaWJlU2xpZGVyKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFN1YnNjcmliZVNsaWRlcigpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnNsaWRlciA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5zbGlkZXIuY2xhc3NFbGVtZW50cyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5zbGlkZXIuYm9vbGVhblZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5zbGlkZXIuY2xhc3NFbGVtZW50cy50aHVtYkZyb20gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnNsaWRlci5jbGFzc0VsZW1lbnRzLnRodW1iRnJvbS5hZGRTdWJzY3JpYmVyKFxyXG4gICAgICAgIFNMSURFUl9FVkVOVFMuVkFMVUVfU1RBUlRfQ0hBTkdFLFxyXG4gICAgICAgIHRoaXMuc2xpZGVyLFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnNsaWRlci5jbGFzc0VsZW1lbnRzLnRodW1iRnJvbS5hZGRTdWJzY3JpYmVyKFNMSURFUl9FVkVOVFMuS0VZX0RPV04sIHRoaXMuc2xpZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc1JhbmdlICYmIHRoaXMuc2xpZGVyLmNsYXNzRWxlbWVudHMudGh1bWJUbykge1xyXG4gICAgICB0aGlzLnNsaWRlci5jbGFzc0VsZW1lbnRzLnRodW1iVG8uYWRkU3Vic2NyaWJlcihcclxuICAgICAgICBTTElERVJfRVZFTlRTLlZBTFVFX1NUQVJUX0NIQU5HRSxcclxuICAgICAgICB0aGlzLnNsaWRlcixcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5zbGlkZXIuY2xhc3NFbGVtZW50cy50aHVtYlRvLmFkZFN1YnNjcmliZXIoU0xJREVSX0VWRU5UUy5LRVlfRE9XTiwgdGhpcy5zbGlkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnNsaWRlci5jbGFzc0VsZW1lbnRzLnNjYWxlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5zbGlkZXIuY2xhc3NFbGVtZW50cy5zY2FsZS5hZGRTdWJzY3JpYmVyKFNMSURFUl9FVkVOVFMuU0NBTEVfQ0xJQ0tFRCwgdGhpcy5zbGlkZXIpO1xyXG4gICAgICBpZiAodGhpcy5zbGlkZXIuYm9vbGVhblZhcmlhYmxlcy5pc1NjYWxlTWFya3NcclxuICAgICAgICAmJiB0aGlzLnNsaWRlci5jbGFzc0VsZW1lbnRzLnNjYWxlTWFya3MgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuc2xpZGVyLmNsYXNzRWxlbWVudHMuc2NhbGVNYXJrcy5hZGRTdWJzY3JpYmVyKFNMSURFUl9FVkVOVFMuTUFSS19DTElDS0VELCB0aGlzLnNsaWRlcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc2xpZGVyLmFkZFN1YnNjcmliZXIoU0xJREVSX0VWRU5UUy5TQ0FMRV9DTElDS0VELCB0aGlzKTtcclxuICAgIHRoaXMuc2xpZGVyLmFkZFN1YnNjcmliZXIoU0xJREVSX0VWRU5UUy5EQVRBX0NPTExFQ1RFRCwgdGhpcyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWaWV3O1xyXG4iLCJpbXBvcnQge1xyXG4gIE1vZGVsT3B0aW9ucyxcclxuICBNb2RlbFZhbHVlLFxyXG4gIFRodW1iQXR0cixcclxufSBmcm9tICdAc3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XHJcblxyXG5jbGFzcyBNb2RlbCB7XHJcbiAgcHJpdmF0ZSBzdGF0ZTogTW9kZWxPcHRpb25zO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogTW9kZWxPcHRpb25zKSB7XHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0U3RhdGUoc3RhdGU6IFBhcnRpYWw8TW9kZWxPcHRpb25zPik6IHZvaWQge1xyXG4gICAgdGhpcy5zdGF0ZSA9IHsgLi4udGhpcy5zdGF0ZSwgLi4uc3RhdGUgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRTdGF0ZSgpOiBNb2RlbE9wdGlvbnMge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGFuZGxlU2xpZGVyQ2xpY2sgPSAoY2xpY2tQb3M6IG51bWJlciwgdGh1bWI6IFRodW1iQXR0cik6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgdmFsdWVUaHVtYk9iamVjdCA9IHRoaXMuZmluZFN1aXRhYmxlUGVyY2VudChjbGlja1Bvcyk7XHJcbiAgICB0aGlzLnVwZGF0ZVN0YXRlTW92ZSh2YWx1ZVRodW1iT2JqZWN0LnZhbHVlLCB0aHVtYik7XHJcbiAgfTtcclxuXHJcbiAgcHVibGljIGhhbmRsZU1vdXNlTW92ZSA9IChtb3ZlZFRvOiBudW1iZXIsIHRodW1iOiBUaHVtYkF0dHIpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHZhbHVlVGh1bWJPYmplY3QgPSB0aGlzLmZpbmRQZXJjZW50KG1vdmVkVG8sIHRodW1iKTtcclxuICAgIGNvbnN0IHsgdmFsdWUgfSA9IHZhbHVlVGh1bWJPYmplY3Q7XHJcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB0aGlzLnVwZGF0ZVN0YXRlTW92ZSh2YWx1ZSwgdGh1bWIpO1xyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBnZXRWYWx1ZSA9ICh2YWw6IE1vZGVsVmFsdWUpOiBudW1iZXIgfCB1bmRlZmluZWQgfCBib29sZWFuID0+IHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRlW3ZhbF07XHJcbiAgfTtcclxuXHJcbiAgcHVibGljIGdldFBlcmNlbnRWYWwgPSAoKTogbnVtYmVyID0+IHtcclxuICAgIGNvbnN0IHsgdmFsdWVGcm9tLCBtaW4sIG1heCB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHJhbmdlOiBudW1iZXIgPSBtYXggLSBtaW47XHJcbiAgICByZXR1cm4gTnVtYmVyKCgodmFsdWVGcm9tIC8gcmFuZ2UpICogMTAwKS50b0ZpeGVkKDMpKTtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIGZpbmRTdWl0YWJsZVBlcmNlbnQocGVyY2VudE1vdmU6IG51bWJlcikge1xyXG4gICAgY29uc3QgeyBzdGVwLCBtaW4sIG1heCB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IG5lYXJlc3RTdGVwID0gTWF0aC5yb3VuZChwZXJjZW50TW92ZSAvICgxMDAgLyB0aGlzLmdldFN0ZXBzQ291bnQoKSkpO1xyXG4gICAgY29uc3QgcGVyY2VudCA9ICgxMDAgLyB0aGlzLmdldFN0ZXBzQ291bnQoKSkgKiBuZWFyZXN0U3RlcDtcclxuXHJcbiAgICBsZXQgdmFsdWU6IG51bWJlcjtcclxuICAgIGlmIChwZXJjZW50ID09PSAxMDApIHtcclxuICAgICAgdmFsdWUgPSBtYXg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWx1ZSA9IG1pbiArIHN0ZXAgKiBuZWFyZXN0U3RlcDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWx1ZSxcclxuICAgICAgcGVyY2VudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZpbmRQZXJjZW50KHBlcmNlbnRNb3ZlOiBudW1iZXIsIHRodW1iOiBUaHVtYkF0dHIpIHtcclxuICAgIGNvbnN0IHsgbWluLCBtYXgsIHN0ZXAsIGlzUmFuZ2UgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBwZXJjZW50VmFsdWUgPSB0aHVtYiA9PT0gJ3ZhbHVlRnJvbScgPyAndGh1bWJQZXJjZW50RnJvbScgOiAndGh1bWJQZXJjZW50VG8nO1xyXG4gIFxyXG4gICAgbGV0IGN1cnJlbnRQZXJjZW50ID0gdGhpcy5zdGF0ZVtwZXJjZW50VmFsdWVdO1xyXG4gICAgbGV0IGN1cnJlbnRWYWx1ZSA9IHRoaXMuc3RhdGVbdGh1bWIgYXMga2V5b2YgTW9kZWxPcHRpb25zXTtcclxuXHJcbiAgICBpZiAoY3VycmVudFZhbHVlID09PSB1bmRlZmluZWQpIGN1cnJlbnRWYWx1ZSA9IG1pbjtcclxuICAgIGlmIChjdXJyZW50UGVyY2VudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgY3VycmVudFZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIGlmIChjdXJyZW50UGVyY2VudCA9PT0gdW5kZWZpbmVkKSBjdXJyZW50UGVyY2VudCA9IChjdXJyZW50VmFsdWUgLSBtaW4pIC8gKG1heCAtIG1pbikgKiAxMDA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY3VycmVudFZhbHVlID0gbWluO1xyXG4gICAgICAgIGN1cnJlbnRQZXJjZW50ID0gKGN1cnJlbnRWYWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKSAqIDEwMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIFxyXG4gICAgY29uc3QgbmV4dFBlcmNlbnQgPSBjdXJyZW50UGVyY2VudCArICgxMDAgLyB0aGlzLmdldFN0ZXBzQ291bnQoKSk7XHJcbiAgICBjb25zdCBwcmV2UGVyY2VudCA9IGN1cnJlbnRQZXJjZW50IC0gKDEwMCAvIHRoaXMuZ2V0U3RlcHNDb3VudCgpKTtcclxuICBcclxuICAgIGNvbnN0IG5lYXJlc3RQcmV2U3RlcCA9IE1hdGguZmxvb3IoKHBlcmNlbnRNb3ZlIC8gMTAwKSAqIHRoaXMuZ2V0U3RlcHNDb3VudCgpKTtcclxuICAgIGNvbnN0IG5lYXJlc3ROZXh0U3RlcCA9IE1hdGguY2VpbCgocGVyY2VudE1vdmUgLyAxMDApICogdGhpcy5nZXRTdGVwc0NvdW50KCkpO1xyXG4gIFxyXG4gICAgY29uc3QgbmVhcmVzdFByZXZWYWx1ZSA9ICBtaW4gKyBuZWFyZXN0UHJldlN0ZXAgKiBzdGVwO1xyXG4gICAgY29uc3QgbmVhcmVzdE5leHRWYWx1ZSA9IG1pbiArIG5lYXJlc3ROZXh0U3RlcCAqIHN0ZXA7XHJcbiAgICBjb25zdCBuZWFyZXN0UHJldlBlcmNlbnQgPSAobmVhcmVzdFByZXZWYWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKSAqIDEwMDtcclxuICAgIGNvbnN0IG5lYXJlc3ROZXh0UGVyY2VudCA9IChuZWFyZXN0TmV4dFZhbHVlIC0gbWluKSAvIChtYXggLSBtaW4pICogMTAwO1xyXG4gIFxyXG4gIFxyXG4gICAgY29uc3QgdmFsdWUgPSBwZXJjZW50TW92ZSA+PSBuZXh0UGVyY2VudCA/IG5lYXJlc3RQcmV2VmFsdWVcclxuICAgICAgOiBwZXJjZW50TW92ZSA8PSBwcmV2UGVyY2VudCA/IG5lYXJlc3ROZXh0VmFsdWVcclxuICAgICAgOiBjdXJyZW50VmFsdWU7XHJcbiAgXHJcbiAgICBjb25zdCBwZXJjZW50ID0gcGVyY2VudE1vdmUgPj0gbmV4dFBlcmNlbnQgPyBuZWFyZXN0UHJldlBlcmNlbnRcclxuICAgICAgOiBwZXJjZW50TW92ZSA8PSBwcmV2UGVyY2VudCA/IG5lYXJlc3ROZXh0UGVyY2VudFxyXG4gICAgICA6IHBlcmNlbnRNb3ZlO1xyXG4gIFxyXG4gICAgaWYodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZSBzaG91bGQgYmUgYSBudW1iZXInKTtcclxuICAgIGlmICh0aHVtYiA9PT0gJ3ZhbHVlRnJvbScgJiYgdGhpcy5zdGF0ZS52YWx1ZVRvICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgPiB0aGlzLnN0YXRlLnZhbHVlVG8gJiYgaXNSYW5nZSkge1xyXG4gICAgICBjb25zdCB7IHZhbHVlVG8sIHRodW1iUGVyY2VudFRvIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHZhbHVlVG8sXHJcbiAgICAgICAgdGh1bWJQZXJjZW50VG8sXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgXHJcbiAgICBpZiAodGh1bWIgPT09ICd2YWx1ZVRvJyAmJiB0aGlzLnN0YXRlLnZhbHVlRnJvbSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlIDwgdGhpcy5zdGF0ZS52YWx1ZUZyb20gJiYgaXNSYW5nZSkge1xyXG4gICAgICBjb25zdCB7IHZhbHVlRnJvbSwgdGh1bWJQZXJjZW50RnJvbSB9ID0gdGhpcy5zdGF0ZTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWx1ZUZyb20sXHJcbiAgICAgICAgdGh1bWJQZXJjZW50RnJvbSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICBwZXJjZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBnZXRTdGVwc0NvdW50ID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKCh0aGlzLnN0YXRlLm1heCAtIHRoaXMuc3RhdGUubWluKSAvIHRoaXMuc3RhdGUuc3RlcCk7XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVTdGF0ZU1vdmUgPSAodmFsOiBudW1iZXIsIHRodW1iOiBUaHVtYkF0dHIpOiB2b2lkID0+IHtcclxuICAgIGlmIChOdW1iZXIuaXNOYU4odmFsKSB8fCB2YWwgPCB0aGlzLnN0YXRlLm1pbiB8fCB2YWwgPiB0aGlzLnN0YXRlLm1heCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsdWUgcHJvdmlkZWQgd2hpbGUgdXBkYXRpbmcgdGhlIG1vZGVsLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBbdGh1bWJdOiB2YWwsXHJcbiAgICB9KTtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNb2RlbDtcclxuIiwiaW1wb3J0IHtcclxuICBNb2RlbElucHV0U3RhdGUsXHJcbiAgTW9kZWxPcHRpb25zLFxyXG4gIFN0ZXBzTWFwLFxyXG4gIFRodW1iQXR0cixcclxuICBWYWxpZFNsaWRlckRhdGEsXHJcbn0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0ludGVyZmFjZXMnO1xyXG5cclxuY2xhc3MgVmFsaWRhdG9yIHtcclxuICBwcml2YXRlIERFRkFVTFRfR0FQID0gMjA7XHJcblxyXG4gIGJvb2xlYW5WYXJpYWJsZXM6IHtcclxuICAgIGlzVGlwOiBib29sZWFuO1xyXG4gICAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcclxuICAgIGlzUHJvZ3Jlc3M6IGJvb2xlYW47XHJcbiAgICBzY2FsZU1hcmtzOiBib29sZWFuO1xyXG4gICAgaXNSYW5nZTogYm9vbGVhbjtcclxuICB9O1xyXG5cclxuICBiYXNlUGFyYW1zOiB7XHJcbiAgICBtaW46IG51bWJlcjtcclxuICAgIG1heDogbnVtYmVyO1xyXG4gICAgdmFsdWVGcm9tOiBudW1iZXI7XHJcbiAgICB2YWx1ZVRvPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgc3RlcDogbnVtYmVyXHJcbiAgICBzdGVwUGVyY2VudD86IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICAgIHRodW1iUGVyY2VudEZyb20/OiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgICB0aHVtYlBlcmNlbnRUbz86IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIHJlc3VsdE9iamVjdD86IE1vZGVsT3B0aW9ucztcclxuICBzY2FsZVBlcmNlbnRHYXA6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgZGF0YTogTW9kZWxJbnB1dFN0YXRlKSB7XHJcbiAgICB0aGlzLmJhc2VQYXJhbXMgPSB7XHJcbiAgICAgIG1pbjogMCxcclxuICAgICAgbWF4OiAxMDAsXHJcbiAgICAgIHZhbHVlRnJvbTogMCxcclxuICAgICAgc3RlcDogMSxcclxuICAgICAgdmFsdWVUbzogdW5kZWZpbmVkLFxyXG4gICAgICBzdGVwUGVyY2VudDogMTAsXHJcbiAgICAgIHRodW1iUGVyY2VudEZyb206IHVuZGVmaW5lZCxcclxuICAgICAgdGh1bWJQZXJjZW50VG86IHVuZGVmaW5lZCxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzID0ge1xyXG4gICAgICBpc1RpcDogZmFsc2UsXHJcbiAgICAgIGlzVmVydGljYWw6IGZhbHNlLFxyXG4gICAgICBpc1Byb2dyZXNzOiBmYWxzZSxcclxuICAgICAgc2NhbGVNYXJrczogZmFsc2UsXHJcbiAgICAgIGlzUmFuZ2U6IGZhbHNlLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnZhbGlkYXRlRGF0YShkYXRhKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB2YWxpZGF0ZURhdGEoZGF0YTogTW9kZWxJbnB1dFN0YXRlKTogTW9kZWxPcHRpb25zIHtcclxuICAgIHRoaXMuc2V0Qm9vbGVhbnMoZGF0YSk7XHJcbiAgICB0aGlzLnNldERhdGEoZGF0YSk7XHJcbiAgICB0aGlzLnJlc3VsdE9iamVjdCA9IHtcclxuICAgICAgLi4uZGF0YSxcclxuICAgICAgLi4udGhpcy5ib29sZWFuVmFyaWFibGVzLFxyXG4gICAgICB0aHVtYlBlcmNlbnRGcm9tOiAwLFxyXG4gICAgICB0aHVtYlBlcmNlbnRUbzogdW5kZWZpbmVkLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNoZWNrUmFuZ2UoKTtcclxuICAgIHRoaXMuY2hlY2tTdGVwKCk7XHJcbiAgICB0aGlzLmNoZWNrVmFsdWVzKCk7XHJcbiAgICB0aGlzLmNoZWNrUGVyY2VudHMoKTtcclxuICAgIHJldHVybiB0aGlzLnJlc3VsdE9iamVjdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwZXJmb3JtTW92ZVRvUGVyY2VudChkYXRhOiBWYWxpZFNsaWRlckRhdGEpOiBudW1iZXIge1xyXG4gICAgY29uc3QgeyBjb29yZHNNb3ZlLCBzY2FsZVNpemUsIGtleUV2ZW50LCBUaHVtYkF0dHIgfSA9IGRhdGE7XHJcblxyXG4gICAgaWYgKGtleUV2ZW50ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5iYXNlUGFyYW1zLnN0ZXBQZXJjZW50ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudEZyb20gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBpZiAoa2V5RXZlbnQgPT09ICdpbmNyZW1lbnQnICYmIFRodW1iQXR0ciA9PT0gJ3ZhbHVlRnJvbScpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudEZyb20gKyB0aGlzLmJhc2VQYXJhbXMuc3RlcFBlcmNlbnQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChrZXlFdmVudCA9PT0gJ2RlY3JlbWVudCcgJiYgVGh1bWJBdHRyID09PSAndmFsdWVGcm9tJykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50RnJvbSAtIHRoaXMuYmFzZVBhcmFtcy5zdGVwUGVyY2VudDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGtleUV2ZW50ID09PSAnaW5jcmVtZW50JyAmJiBUaHVtYkF0dHIgPT09ICd2YWx1ZVRvJyAmJiB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50VG8gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50VG8gKyB0aGlzLmJhc2VQYXJhbXMuc3RlcFBlcmNlbnQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChrZXlFdmVudCA9PT0gJ2RlY3JlbWVudCcgJiYgVGh1bWJBdHRyID09PSAndmFsdWVUbycgJiYgdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvIC0gdGhpcy5iYXNlUGFyYW1zLnN0ZXBQZXJjZW50O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvb3Jkc01vdmUgPT09IHVuZGVmaW5lZCB8fCBzY2FsZVNpemUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIDA7XHJcblxyXG4gICAgY29uc3QgcGVyY2VudCA9IHNjYWxlU2l6ZSAvIDEwMDtcclxuICAgIGxldCBwZXJjZW50TW92ZSA9IE51bWJlcigoY29vcmRzTW92ZSAvIHBlcmNlbnQpLnRvRml4ZWQoMikpO1xyXG4gICAgaWYgKHBlcmNlbnRNb3ZlIDwgMCkgcGVyY2VudE1vdmUgPSAwO1xyXG4gICAgaWYgKHBlcmNlbnRNb3ZlID4gMTAwKSBwZXJjZW50TW92ZSA9IDEwMDtcclxuICAgIHJldHVybiBwZXJjZW50TW92ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB2YWxpZGF0ZU1hcmtzKG9wdGlvbnM6IHsgbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBzdGVwOiBudW1iZXIsIGdhcDogbnVtYmVyIH0pOiBTdGVwc01hcCB7XHJcbiAgICBjb25zdCB7IHN0ZXAsIG1heCwgbWluLCBnYXAgfSA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCBtYXBTdGVwczogU3RlcHNNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICBjb25zdCB2YWxpZEdhcCA9IHRoaXMudmFsaWRhdGVHYXAoZ2FwKTtcclxuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5maW5kUmFuZ2UoKTtcclxuICAgIGNvbnN0IHBlcmNlbnQgPSByYW5nZSAvIDEwMDtcclxuICAgIGNvbnN0IHN0ZXBQZXJjZW50ID0gc3RlcCAvIHBlcmNlbnQ7XHJcbiAgICBjb25zdCBzdGVwQ291bnRHYXAgPSBzdGVwICogTWF0aC5jZWlsKHZhbGlkR2FwIC8gc3RlcFBlcmNlbnQpO1xyXG4gICAgY29uc3QgcGVyY2VudENvdW50c0dhcCA9IE1hdGguY2VpbChzdGVwQ291bnRHYXAgLyBwZXJjZW50KTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSAxMDA7IGkgKz0gcGVyY2VudENvdW50c0dhcCkge1xyXG4gICAgICBpZiAoaSA8PSAxMDAgLSBwZXJjZW50Q291bnRzR2FwKSB7XHJcbiAgICAgICAgY29uc3Qgc3RlcENvdW50ID0gTWF0aC5yb3VuZChpIC8gc3RlcFBlcmNlbnQpO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlU3RlcHMgPSBzdGVwICogc3RlcENvdW50O1xyXG4gICAgICAgIGNvbnN0IHBlcmNlbnRTY2FsZSA9IHZhbHVlU3RlcHMgLyBwZXJjZW50O1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gbWluICsgdmFsdWVTdGVwcztcclxuXHJcbiAgICAgICAgbWFwU3RlcHMuc2V0KHZhbHVlLCBwZXJjZW50U2NhbGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWFwU3RlcHMuc2V0KG1heCwgMTAwKTtcclxuICAgIHJldHVybiBtYXBTdGVwcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyB2YWxpZGF0ZVRodW1iQXR0cihtb3ZlZFRvOiBudW1iZXIpOiBUaHVtYkF0dHIge1xyXG4gICAgaWYgKHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRGcm9tID09PSB1bmRlZmluZWQpIHJldHVybiAndmFsdWVUbyc7XHJcbiAgICBpZiAoIXRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlKSByZXR1cm4gJ3ZhbHVlRnJvbSc7XHJcbiAgICBpZiAobW92ZWRUbyA8IHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRGcm9tKSByZXR1cm4gJ3ZhbHVlRnJvbSc7XHJcbiAgICBpZiAodGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvICE9PSB1bmRlZmluZWQgJiYgbW92ZWRUbyA+IHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRUbykgcmV0dXJuICd2YWx1ZVRvJztcclxuXHJcbiAgICBpZiAodGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudFRvICE9PSB1bmRlZmluZWQgJiYgbW92ZWRUbyA+IHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRGcm9tICYmIG1vdmVkVG8gPCB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50VG8pIHtcclxuICAgICAgY29uc3QgZGlmZkZyb20gPSBtb3ZlZFRvIC0gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudEZyb207XHJcbiAgICAgIGNvbnN0IGRpZmZUbyA9IHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRUbyAtIG1vdmVkVG87XHJcblxyXG4gICAgICBpZiAoZGlmZkZyb20gPT09IGRpZmZUbyB8fCBkaWZmRnJvbSA8IGRpZmZUbykgcmV0dXJuICd2YWx1ZUZyb20nO1xyXG4gICAgICBpZiAoZGlmZkZyb20gPiBkaWZmVG8pIHJldHVybiAndmFsdWVUbyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICd2YWx1ZVRvJztcclxuICB9XHJcblxyXG4gIHB1YmxpYyB2YWxpZGF0ZVBlcmNlbnQocGVyY2VudDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyLCBvbGRTdGF0ZTogTW9kZWxPcHRpb25zKTogTW9kZWxPcHRpb25zIHtcclxuICAgIGNvbnN0IHsgaXNSYW5nZSB9ID0gb2xkU3RhdGU7XHJcblxyXG4gICAgaWYgKCFpc1JhbmdlKSB7XHJcbiAgICAgIGNvbnN0IG5ld0RhdGEgPSB7IC4uLm9sZFN0YXRlLCB2YWx1ZUZyb206IHZhbHVlLCB0aHVtYlBlcmNlbnRGcm9tOiBwZXJjZW50IH07XHJcbiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlRGF0YShuZXdEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob2xkU3RhdGUudGh1bWJQZXJjZW50VG8gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBjb25zdCB7IHRodW1iUGVyY2VudEZyb20sIHRodW1iUGVyY2VudFRvIH0gPSBvbGRTdGF0ZTtcclxuICAgICAgbGV0IHRodW1iUGVyY2VudCA9ICd0aHVtYlBlcmNlbnRGcm9tJztcclxuICAgICAgbGV0IHRodW1iVmFsdWU6IGtleW9mIE1vZGVsT3B0aW9ucyA9ICd2YWx1ZUZyb20nO1xyXG5cclxuICAgICAgaWYgKHBlcmNlbnQgPiB0aHVtYlBlcmNlbnRUbykge1xyXG4gICAgICAgIHRodW1iUGVyY2VudCA9ICd0aHVtYlBlcmNlbnRUbyc7XHJcbiAgICAgICAgdGh1bWJWYWx1ZSA9ICd2YWx1ZVRvJztcclxuICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID4gdGh1bWJQZXJjZW50RnJvbSAmJiBwZXJjZW50IDwgdGh1bWJQZXJjZW50VG8pIHtcclxuICAgICAgICBjb25zdCBkaWZmZXJlbnRQZXJjZW50ID0gdGh1bWJQZXJjZW50VG8gLSB0aHVtYlBlcmNlbnRGcm9tO1xyXG4gICAgICAgIGNvbnN0IHBlcmNlbnRWYWx1ZSA9IHBlcmNlbnQgLSB0aHVtYlBlcmNlbnRGcm9tO1xyXG4gICAgICAgIGNvbnN0IG1pZGRsZSA9IGRpZmZlcmVudFBlcmNlbnQgLyAyO1xyXG5cclxuICAgICAgICBpZiAocGVyY2VudFZhbHVlID49IG1pZGRsZSkge1xyXG4gICAgICAgICAgdGh1bWJQZXJjZW50ID0gJ3RodW1iUGVyY2VudFRvJztcclxuICAgICAgICAgIHRodW1iVmFsdWUgPSAndmFsdWVUbyc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBuZXdEYXRhID0geyAuLi5vbGRTdGF0ZSwgW3RodW1iVmFsdWVdOiB2YWx1ZSwgW3RodW1iUGVyY2VudF06IHBlcmNlbnQgfTtcclxuICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVEYXRhKG5ld0RhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvbGRTdGF0ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0RGF0YShkYXRhOiBNb2RlbElucHV0U3RhdGUpOiB2b2lkIHtcclxuICAgIGNvbnN0IHsgbWluLCBtYXgsIHZhbHVlRnJvbSwgc3RlcCwgc2NhbGVQZXJjZW50R2FwLCB2YWx1ZVRvIH0gPSBkYXRhO1xyXG4gICAgdGhpcy5iYXNlUGFyYW1zLm1pbiA9IG1pbjtcclxuICAgIHRoaXMuYmFzZVBhcmFtcy5tYXggPSBtYXg7XHJcbiAgICB0aGlzLmJhc2VQYXJhbXMudmFsdWVGcm9tID0gdmFsdWVGcm9tO1xyXG4gICAgdGhpcy5iYXNlUGFyYW1zLnN0ZXAgPSBzdGVwO1xyXG4gICAgdGhpcy5zY2FsZVBlcmNlbnRHYXAgPSB0eXBlb2Ygc2NhbGVQZXJjZW50R2FwID09PSAnbnVtYmVyJyA/IHNjYWxlUGVyY2VudEdhcCA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UgJiYgdmFsdWVUbyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuYmFzZVBhcmFtcy52YWx1ZVRvID0gdmFsdWVUbztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJhc2VQYXJhbXMuc3RlcFBlcmNlbnQgPSB0aGlzLmJhc2VQYXJhbXMuc3RlcCAvICh0aGlzLmZpbmRSYW5nZSgpIC8gMTAwKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0Qm9vbGVhbnMoZGF0YTogTW9kZWxJbnB1dFN0YXRlKTogdm9pZCB7XHJcbiAgICBjb25zdCB7IGlzUmFuZ2UsIGlzVGlwLCBpc1ZlcnRpY2FsLCBpc1Byb2dyZXNzLCBzY2FsZU1hcmtzIH0gPSBkYXRhO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UgPSB0eXBlb2YgaXNSYW5nZSA9PT0gJ2Jvb2xlYW4nID8gaXNSYW5nZSA6IGZhbHNlO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVGlwID0gdHlwZW9mIGlzVGlwID09PSAnYm9vbGVhbicgPyBpc1RpcCA6IGZhbHNlO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzVmVydGljYWwgPSB0eXBlb2YgaXNWZXJ0aWNhbCA9PT0gJ2Jvb2xlYW4nID8gaXNWZXJ0aWNhbCA6IGZhbHNlO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUHJvZ3Jlc3MgPSB0eXBlb2YgaXNQcm9ncmVzcyA9PT0gJ2Jvb2xlYW4nID8gaXNQcm9ncmVzcyA6IGZhbHNlO1xyXG4gICAgdGhpcy5ib29sZWFuVmFyaWFibGVzLnNjYWxlTWFya3MgPSB0eXBlb2Ygc2NhbGVNYXJrcyA9PT0gJ2Jvb2xlYW4nID8gc2NhbGVNYXJrcyA6IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB2YWxpZGF0ZUdhcChiYXNpc1BlcmNlbnQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBsZXQgcmVzdWx0ID0gYmFzaXNQZXJjZW50O1xyXG4gICAgaWYgKHJlc3VsdCA8IDAgfHwgcmVzdWx0ID4gMTAwKSByZXN1bHQgPSB0aGlzLkRFRkFVTFRfR0FQO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2hlY2tSYW5nZSgpOiB2b2lkIHtcclxuICAgIGlmIChOdW1iZXIuaXNOYU4odGhpcy5iYXNlUGFyYW1zLm1pbikpIHRoaXMuYmFzZVBhcmFtcy5taW4gPSAwO1xyXG4gICAgaWYgKE51bWJlci5pc05hTih0aGlzLmJhc2VQYXJhbXMubWF4KSkgdGhpcy5iYXNlUGFyYW1zLm1heCA9IDEwO1xyXG5cclxuICAgIGlmICh0aGlzLmJhc2VQYXJhbXMubWluID09PSB0aGlzLmJhc2VQYXJhbXMubWF4KSB7XHJcbiAgICAgIHRoaXMuYmFzZVBhcmFtcy5tYXggPSB0aGlzLmJhc2VQYXJhbXMubWluICsgdGhpcy5iYXNlUGFyYW1zLnN0ZXA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYmFzZVBhcmFtcy5taW4gPiB0aGlzLmJhc2VQYXJhbXMubWF4KSB7XHJcbiAgICAgIFt0aGlzLmJhc2VQYXJhbXMubWluLCB0aGlzLmJhc2VQYXJhbXMubWF4XSA9IFt0aGlzLmJhc2VQYXJhbXMubWF4LCB0aGlzLmJhc2VQYXJhbXMubWluXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlc3VsdE9iamVjdCEubWluID0gdGhpcy5iYXNlUGFyYW1zLm1pbjtcclxuICAgIHRoaXMucmVzdWx0T2JqZWN0IS5tYXggPSB0aGlzLmJhc2VQYXJhbXMubWF4O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjaGVja1N0ZXAoKTogdm9pZCB7XHJcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHRoaXMuYmFzZVBhcmFtcy5zdGVwKSkgdGhpcy5iYXNlUGFyYW1zLnN0ZXAgPSAxO1xyXG4gICAgY29uc3QgYWxsUmFuZ2UgPSB0aGlzLmZpbmRSYW5nZSgpO1xyXG5cclxuICAgIGlmICh0aGlzLmJhc2VQYXJhbXMuc3RlcCA+IGFsbFJhbmdlKSB7XHJcbiAgICAgIHRoaXMuYmFzZVBhcmFtcy5zdGVwID0gYWxsUmFuZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYmFzZVBhcmFtcy5zdGVwIDwgMC4wMDEpIHRoaXMuYmFzZVBhcmFtcy5zdGVwID0gMC4wMDE7XHJcblxyXG4gICAgdGhpcy5yZXN1bHRPYmplY3QhLnN0ZXAgPSB0aGlzLmJhc2VQYXJhbXMuc3RlcDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZmluZFJhbmdlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5iYXNlUGFyYW1zLm1heCAtIHRoaXMuYmFzZVBhcmFtcy5taW47XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoZWNrVmFsdWVzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5iYXNlUGFyYW1zLnZhbHVlRnJvbSA9IHRoaXMuY2hlY2tWYWx1ZSh0aGlzLmJhc2VQYXJhbXMudmFsdWVGcm9tKTtcclxuXHJcbiAgICBpZiAodGhpcy5ib29sZWFuVmFyaWFibGVzLmlzUmFuZ2UgJiYgdGhpcy5iYXNlUGFyYW1zLnZhbHVlVG8gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLmJhc2VQYXJhbXMudmFsdWVUbyA9IHRoaXMuY2hlY2tWYWx1ZSh0aGlzLmJhc2VQYXJhbXMudmFsdWVUbyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYmFzZVBhcmFtcy52YWx1ZVRvICE9PSB1bmRlZmluZWQgJiYgdGhpcy5iYXNlUGFyYW1zLnZhbHVlRnJvbSA+IHRoaXMuYmFzZVBhcmFtcy52YWx1ZVRvICYmIHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlKSB7XHJcbiAgICAgIFt0aGlzLmJhc2VQYXJhbXMudmFsdWVGcm9tLCB0aGlzLmJhc2VQYXJhbXMudmFsdWVUb10gPSBbdGhpcy5iYXNlUGFyYW1zLnZhbHVlVG8sIHRoaXMuYmFzZVBhcmFtcy52YWx1ZUZyb21dO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVzdWx0T2JqZWN0IS52YWx1ZUZyb20gPSB0aGlzLmJhc2VQYXJhbXMudmFsdWVGcm9tO1xyXG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlKSB0aGlzLnJlc3VsdE9iamVjdCEudmFsdWVUbyA9IHRoaXMuYmFzZVBhcmFtcy52YWx1ZVRvO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjaGVja1ZhbHVlKHZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgbGV0IHJlc3VsdCA9IHZhbHVlO1xyXG4gICAgaWYgKE51bWJlci5pc05hTihyZXN1bHQpKSByZXN1bHQgPSAwO1xyXG4gICAgaWYgKHJlc3VsdCA9PT0gdGhpcy5iYXNlUGFyYW1zLm1heCkgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgICBpZiAocmVzdWx0ICUgdGhpcy5iYXNlUGFyYW1zLnN0ZXAgIT09IDAgJiYgcmVzdWx0ICE9PSB0aGlzLmJhc2VQYXJhbXMubWluKSB7XHJcbiAgICAgIGNvbnN0IGNvdW50U3RlcCA9IE1hdGgucm91bmQoKHJlc3VsdCAtIHRoaXMuYmFzZVBhcmFtcy5taW4pIC8gdGhpcy5iYXNlUGFyYW1zLnN0ZXApO1xyXG4gICAgICBjb25zdCBjb3VudFZhbCA9IHRoaXMuYmFzZVBhcmFtcy5taW4gKyB0aGlzLmJhc2VQYXJhbXMuc3RlcCAqIGNvdW50U3RlcDtcclxuICAgICAgcmVzdWx0ID0gY291bnRWYWw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlc3VsdCA+IHRoaXMuYmFzZVBhcmFtcy5tYXgpIHtcclxuICAgICAgcmVzdWx0ID0gdGhpcy5iYXNlUGFyYW1zLm1heDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0IDwgdGhpcy5iYXNlUGFyYW1zLm1pbikge1xyXG4gICAgICByZXN1bHQgPSB0aGlzLmJhc2VQYXJhbXMubWluO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoZWNrUGVyY2VudHMoKTogdm9pZCB7XHJcbiAgICB0aGlzLmJhc2VQYXJhbXMudGh1bWJQZXJjZW50RnJvbSA9IHRoaXMuY2hlY2tQZXJjZW50KCd2YWx1ZUZyb20nKTtcclxuICAgIHRoaXMucmVzdWx0T2JqZWN0IS50aHVtYlBlcmNlbnRGcm9tID0gdGhpcy5iYXNlUGFyYW1zLnRodW1iUGVyY2VudEZyb207XHJcblxyXG4gICAgaWYgKHRoaXMuYm9vbGVhblZhcmlhYmxlcy5pc1JhbmdlKSB7XHJcbiAgICAgIHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRUbyA9IHRoaXMuY2hlY2tQZXJjZW50KCd2YWx1ZVRvJyk7XHJcbiAgICAgIHRoaXMucmVzdWx0T2JqZWN0IS50aHVtYlBlcmNlbnRUbyA9IHRoaXMuYmFzZVBhcmFtcy50aHVtYlBlcmNlbnRUbztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2hlY2tQZXJjZW50KHZhbHVlOiBUaHVtYkF0dHIpOiBudW1iZXIge1xyXG4gICAgbGV0IHZhcmlhYmxlOiBudW1iZXIgfCB1bmRlZmluZWQgPSAwO1xyXG4gICAgaWYgKHZhbHVlIGluIHRoaXMuYmFzZVBhcmFtcykge1xyXG4gICAgICB2YXJpYWJsZSA9ICh0aGlzLmJhc2VQYXJhbXMgYXMgYW55KVt2YWx1ZV0gYXMgbnVtYmVyO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhcmlhYmxlID09PSB1bmRlZmluZWQpIHJldHVybiAwO1xyXG4gICAgY29uc3QgdmFsdWVPZlJhbmdlID0gdmFyaWFibGUgLSB0aGlzLmJhc2VQYXJhbXMubWluO1xyXG4gICAgY29uc3QgY3VycmVudFBlcmNlbnQgPSBOdW1iZXIoKHZhbHVlT2ZSYW5nZSAvICh0aGlzLmZpbmRSYW5nZSgpIC8gMTAwKSkudG9GaXhlZCgzKSk7XHJcbiAgICByZXR1cm4gY3VycmVudFBlcmNlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWYWxpZGF0b3I7XHJcbiIsImltcG9ydCBPYnNlcnZlciBmcm9tICdAc3JjL09ic2VydmVyL09ic2VydmVyJztcclxuaW1wb3J0IHsgTU9ERUxfRVZFTlRTIH0gZnJvbSAnQHNyYy9PYnNlcnZlci9ldmVudHMnO1xyXG5pbXBvcnQge1xyXG4gIE1vZGVsSW5wdXRTdGF0ZSxcclxuICBNb2RlbE9wdGlvbnMsXHJcbiAgTW9kZWxWYWx1ZSxcclxuICBTbGlkZXJPcHRpb25zLFxyXG4gIFN0ZXBzTWFwLFxyXG4gIFZhbGlkU2xpZGVyRGF0YSxcclxufSBmcm9tICdAc3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XHJcbmltcG9ydCBNb2RlbCBmcm9tICcuL01vZGVsJztcclxuaW1wb3J0IFZhbGlkYXRvciBmcm9tICcuL1ZhbGlkYXRvcic7XHJcblxyXG5jbGFzcyBNb2RlbEZhY2FkZSBleHRlbmRzIE9ic2VydmVyIHtcclxuICBwcml2YXRlIG1vZGVsOiBNb2RlbDtcclxuICBwcml2YXRlIHZhbGlkYXRvcjogVmFsaWRhdG9yO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogTW9kZWxJbnB1dFN0YXRlKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy52YWxpZGF0b3IgPSBuZXcgVmFsaWRhdG9yKHN0YXRlKTtcclxuICAgIGNvbnN0IHZhbGlkU3RhdGUgPSB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZURhdGEoc3RhdGUpO1xyXG4gICAgdGhpcy5tb2RlbCA9IG5ldyBNb2RlbCh2YWxpZFN0YXRlKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRTdGF0ZShzdGF0ZTogTW9kZWxJbnB1dFN0YXRlKTogdm9pZCB7XHJcbiAgICBjb25zdCB2YWxpZFN0YXRlID0gdGhpcy52YWxpZGF0b3IudmFsaWRhdGVEYXRhKHN0YXRlKTtcclxuICAgIHRoaXMubW9kZWwuc2V0U3RhdGUodmFsaWRTdGF0ZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0U3RhdGUoKTogU2xpZGVyT3B0aW9ucyB7XHJcbiAgICBpZiAodGhpcy5tb2RlbC5nZXRTdGF0ZSgpLnNjYWxlTWFya3MpIHtcclxuICAgICAgY29uc3Qgc2xpZGVyTWFya3MgPSB0aGlzLnZhbGlkR2FwTWFya3MoKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi50aGlzLm1vZGVsLmdldFN0YXRlKCksXHJcbiAgICAgICAgc2NhbGVNYXA6IHNsaWRlck1hcmtzLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMubW9kZWwuZ2V0U3RhdGUoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRWYWx1ZSh2YWx1ZTogTW9kZWxWYWx1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kZWwuZ2V0U3RhdGUoKVt2YWx1ZV07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBkYXRlKGRhdGE6IFZhbGlkU2xpZGVyRGF0YSk6IHZvaWQge1xyXG4gICAgY29uc3QgaXNTY2FsZU1vdmUgPSBkYXRhLnBlcmNlbnQgPT09IHVuZGVmaW5lZDtcclxuXHJcbiAgICBpZiAoaXNTY2FsZU1vdmUpIHtcclxuICAgICAgY29uc3QgbW92ZWRUbyA9IHRoaXMudmFsaWRhdG9yLnBlcmZvcm1Nb3ZlVG9QZXJjZW50KGRhdGEpO1xyXG5cclxuICAgICAgaWYgKGRhdGEuVGh1bWJBdHRyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLm1vZGVsLmhhbmRsZU1vdXNlTW92ZShtb3ZlZFRvLCBkYXRhLlRodW1iQXR0cik7XHJcbiAgICAgIH0gXHJcblxyXG4gICAgICBpZiAoZGF0YS5UaHVtYkF0dHIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGNvbnN0IFRodW1iQXR0ciA9IHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlVGh1bWJBdHRyKG1vdmVkVG8pO1xyXG4gICAgICAgIHRoaXMubW9kZWwuaGFuZGxlU2xpZGVyQ2xpY2sobW92ZWRUbywgVGh1bWJBdHRyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbmV3U3RhdGUgPSB0aGlzLm1vZGVsLmdldFN0YXRlKCk7XHJcbiAgICAgIGNvbnN0IHZhbGlkU3RhdGUgPSB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZURhdGEobmV3U3RhdGUpO1xyXG4gICAgICB0aGlzLm1vZGVsLnNldFN0YXRlKHZhbGlkU3RhdGUpO1xyXG5cclxuICAgICAgaWYgKG5ld1N0YXRlLnNjYWxlTWFya3MpIHtcclxuICAgICAgICB0aGlzLmVtaXQoTU9ERUxfRVZFTlRTLlZBTFVFX0NIQU5HRUQsIHtcclxuICAgICAgICAgIC4uLnRoaXMubW9kZWwuZ2V0U3RhdGUoKSxcclxuICAgICAgICAgIHNjYWxlTWFwOiB0aGlzLnZhbGlkR2FwTWFya3MoKSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmVtaXQoTU9ERUxfRVZFTlRTLlZBTFVFX0NIQU5HRUQsIHRoaXMubW9kZWwuZ2V0U3RhdGUoKSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHsgcGVyY2VudCwgdmFsdWUgfSA9IGRhdGE7XHJcbiAgICAgIGNvbnN0IHBlcmZvcm1lZERhdGEgPSB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZVBlcmNlbnQoXHJcbiAgICAgICAgcGVyY2VudCEsXHJcbiAgICAgICAgdmFsdWUhLFxyXG4gICAgICAgIHRoaXMubW9kZWwuZ2V0U3RhdGUoKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLm1vZGVsLnNldFN0YXRlKHBlcmZvcm1lZERhdGEpO1xyXG4gICAgICB0aGlzLmVtaXQoTU9ERUxfRVZFTlRTLlZBTFVFX0NIQU5HRUQsIHRoaXMubW9kZWwuZ2V0U3RhdGUoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0VmFsdWUocGFyYW06IE1vZGVsVmFsdWUsIHZhbHVlOiBudW1iZXIgfCBib29sZWFuKTogdm9pZCB7XHJcbiAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMubW9kZWwuZ2V0U3RhdGUoKTtcclxuICAgIGNvbnN0IG5ld1N0YXRlOiBNb2RlbE9wdGlvbnMgPSB7IC4uLm9sZFN0YXRlLCBbcGFyYW1dOiB2YWx1ZSB9O1xyXG4gICAgY29uc3QgdmFsaWRTdGF0ZSA9IHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlRGF0YShuZXdTdGF0ZSk7XHJcbiAgICB0aGlzLm1vZGVsLnNldFN0YXRlKHZhbGlkU3RhdGUpO1xyXG4gICAgdGhpcy5lbWl0KE1PREVMX0VWRU5UUy5WQUxVRV9DSEFOR0VELCB0aGlzLm1vZGVsLmdldFN0YXRlKCkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHZhbGlkR2FwTWFya3MoKTogU3RlcHNNYXAge1xyXG4gICAgY29uc3QgeyBzY2FsZVBlcmNlbnRHYXAsIG1pbiwgbWF4LCBzdGVwIH0gPSB0aGlzLm1vZGVsLmdldFN0YXRlKCk7XHJcbiAgICBjb25zdCBnYXAgPSBzY2FsZVBlcmNlbnRHYXAgPz8gMjA7XHJcbiAgICBjb25zdCBzbGlkZXJNYXJrcyA9IHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlTWFya3MoeyBtaW4sIG1heCwgc3RlcCwgZ2FwIH0pO1xyXG4gICAgcmV0dXJuIHNsaWRlck1hcmtzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTW9kZWxGYWNhZGU7XHJcbiIsImltcG9ydCB7IE1PREVMX0VWRU5UUywgU0xJREVSX0VWRU5UUyB9IGZyb20gJ0BzcmMvT2JzZXJ2ZXIvZXZlbnRzJztcclxuaW1wb3J0IE9ic2VydmVyIGZyb20gJ0BzcmMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xyXG5pbXBvcnQgeyBNb2RlbElucHV0U3RhdGUsIE1vZGVsVmFsdWUsIFNsaWRlck9wdGlvbnMgfSBmcm9tICdAc3JjL2NvbXBvbmVudHMvSW50ZXJmYWNlcyc7XHJcbmltcG9ydCBWaWV3IGZyb20gJy4uL1ZpZXcvVmlldyc7XHJcbmltcG9ydCBNb2RlbEZhY2FkZSBmcm9tICcuLi9Nb2RlbC9Nb2RlbEZhY2FkZSc7XHJcblxyXG5jbGFzcyBQcmVzZW50ZXIgZXh0ZW5kcyBPYnNlcnZlciB7XHJcbiAgcHJpdmF0ZSBtb2RlbEZhY2FkZTogTW9kZWxGYWNhZGU7XHJcblxyXG4gIHByaXZhdGUgdmlldzogVmlldztcclxuXHJcbiAgY29uc3RydWN0b3Iocm9vdDogSFRNTEVsZW1lbnQsIHN0YXRlOiBNb2RlbElucHV0U3RhdGUpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLm1vZGVsRmFjYWRlID0gbmV3IE1vZGVsRmFjYWRlKHN0YXRlKTtcclxuICAgIHRoaXMudmlldyA9IG5ldyBWaWV3KHJvb3QsIHRoaXMubW9kZWxGYWNhZGUuZ2V0U3RhdGUoKSk7XHJcbiAgICB0aGlzLnN1YnNjcmliZU1vZGVsKCk7XHJcbiAgICB0aGlzLnN1YnNjcmliZVNsaWRlcigpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFN0YXRlKCk6IFNsaWRlck9wdGlvbnMge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kZWxGYWNhZGUuZ2V0U3RhdGUoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRTdGF0ZShzdGF0ZTogTW9kZWxJbnB1dFN0YXRlKTogdm9pZCB7XHJcbiAgICB0aGlzLm1vZGVsRmFjYWRlLnNldFN0YXRlKHN0YXRlKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRWYWx1ZShwYXJhbTogTW9kZWxWYWx1ZSwgdmFsdWU6IG51bWJlciB8IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRoaXMubW9kZWxGYWNhZGUuc2V0VmFsdWUocGFyYW0sIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRWYWx1ZShwYXJhbTogTW9kZWxWYWx1ZSk6IG51bWJlciB8IGJvb2xlYW4gfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kZWxGYWNhZGUuZ2V0VmFsdWUocGFyYW0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdWJzY3JpYmVTbGlkZXIoKTogdm9pZCB7XHJcbiAgICB0aGlzLnZpZXcuYWRkU3Vic2NyaWJlcihTTElERVJfRVZFTlRTLlZBTFVFX0NIQU5HRUQsIHRoaXMubW9kZWxGYWNhZGUpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdWJzY3JpYmVNb2RlbCgpOiB2b2lkIHtcclxuICAgIHRoaXMubW9kZWxGYWNhZGUuYWRkU3Vic2NyaWJlcihNT0RFTF9FVkVOVFMuVkFMVUVfQ0hBTkdFRCwgdGhpcy52aWV3KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFByZXNlbnRlcjtcclxuIiwiY29uc3QgaW5pdGlhbFN0YXRlID0ge1xyXG4gIG1pbjogMCxcclxuICBtYXg6IDEwMCxcclxuICB2YWx1ZUZyb206IDAsXHJcbiAgdmFsdWVUbzogMCxcclxuICBzdGVwOiAxLFxyXG4gIHNjYWxlUGVyY2VudEdhcDogMTAsXHJcbiAgc2NhbGVNYXJrczogZmFsc2UsXHJcbiAgaXNUaXA6IGZhbHNlLFxyXG4gIGlzUHJvZ3Jlc3M6IGZhbHNlLFxyXG4gIGlzUmFuZ2U6IGZhbHNlLFxyXG4gIGlzVmVydGljYWw6IGZhbHNlLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5pdGlhbFN0YXRlO1xyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgUHJlc2VudGVyIGZyb20gJy4vY29tcG9uZW50cy9QcmVzZW50ZXIvUHJlc2VudGVyJztcclxuaW1wb3J0IGluaXRpYWxTdGF0ZSBmcm9tICcuL3N0YXRlJztcclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICBpbnRlcmZhY2UgSlF1ZXJ5IHtcclxuICAgIHNsaWRlclBsdWdpbihvcHRpb25zOiBvYmplY3QpOiBQcmVzZW50ZXJcclxuICB9XHJcbn1cclxuXHJcbiQuZm4uc2xpZGVyUGx1Z2luID0gZnVuY3Rpb24gc2xpZGVyUGx1Z2luKG9wdGlvbnM6IG9iamVjdCk6IFByZXNlbnRlciB7XHJcbiAgY29uc3Qgc3RhdGUgPSB7IC4uLmluaXRpYWxTdGF0ZSwgLi4ub3B0aW9ucyB9O1xyXG4gIGNvbnN0IHNsaWRlciA9IG5ldyBQcmVzZW50ZXIodGhpc1swXSwgc3RhdGUpO1xyXG4gIHJldHVybiBzbGlkZXI7XHJcbn07Il0sIm5hbWVzIjpbIk1PREVMX0VWRU5UUyIsIlNMSURFUl9FVkVOVFMiLCJjb25zdHJ1Y3RvciIsIm9ic2VydmVycyIsIk9iamVjdCIsImNyZWF0ZSIsImFkZFN1YnNjcmliZXIiLCJldmVudCIsIm9ic2VydmVyIiwidGhpcyIsImtleXMiLCJyZW1vdmVTdWJzY3JpYmVyIiwiZmlsdGVyIiwib2JzIiwiZW1pdCIsImRhdGEiLCJmb3JFYWNoIiwidXBkYXRlIiwiT2JzZXJ2ZXIiLCJyb290IiwiaXNWZXJ0aWNhbCIsInN1cGVyIiwiZGlyZWN0aW9uIiwic3RhcnRQb2ludCIsInNpemUiLCJtb2QiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiZWxlbWVudCIsImRvY3VtZW50IiwicGVyZm9ybVBvaW50ZXJNb3ZlIiwidGh1bWJQb3MiLCJhdHRyIiwiaGFuZGxlVGh1bWJQb2ludGVyTW92ZSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImVsZW1TaXplIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibmV3UG9zIiwiY29vcmRzTW92ZSIsIlRodW1iQXR0ciIsImhhbmRsZVRodW1iUG9pbnRlclVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJwZXJmb3JtVG91Y2hNb3ZlIiwiaWQiLCJoYW5kbGVUaHVtYlRvdWNoTW92ZSIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsInRvdWNoZXMiLCJoYW5kbGVUaHVtYlRvdWNoRW5kIiwicGVyZm9ybUtleURvd24iLCJrZXlFdmVudCIsInBlcmZvcm1DbGlja01hcmsiLCJwZXJjZW50IiwidmFsdWUiLCJTbGlkZXJDb21wb25lbnRzIiwicG9zaXRpb25TdGFydCIsInBvc2l0aW9uRW5kIiwicHJvZ3Jlc3MiLCJzZXRQcm9ncmVzcyIsInN0eWxlIiwiYXBwZW5kIiwic2V0UHJvZ3Jlc3NQb3NpdGlvbiIsInNjYWxlIiwiaGFuZGxlU2NhbGVQb2ludGVyRG93biIsImJpbmQiLCJpbml0IiwiZ2V0U2NhbGUiLCJzY2FsZUNsYXNzIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkU2NhbGUiLCJhZGRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiY29udGFpbnMiLCJzY2FsZVJlY3QiLCJzY2FsZVNpemUiLCJzY2FsZVN0YXJ0IiwiZW1pdERhdGEiLCJNQVJLU19ISURERU4iLCJtYXJrcyIsImNyZWF0ZU1hcmtzIiwiYWRqdXN0TWFya1Zpc2liaWxpdHkiLCJoYW5kbGVSb290Q2xpY2siLCJkYXRhc2V0IiwidW5kZWZpbmVkIiwiTnVtYmVyIiwiY3JlYXRlTWFyayIsIm1hcmsiLCJjcmVhdGVNYXJrRWxlbWVudCIsIm1hcmtWYWx1ZSIsImNyZWF0ZU1hcmtWYWx1ZUVsZW1lbnQiLCJpbm5lclRleHQiLCJtYXJrRWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwibGFzdFZpc2libGVNYXJrUG9zaXRpb24iLCJtYXJrVmFsdWVFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm1hcmtQZXJjZW50IiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlIiwidmFsdWVzIiwidGh1bWJQZXJjZW50IiwibWluVmFsdWUiLCJtYXhWYWx1ZSIsInRodW1iQXR0ciIsImhhbmRsZVRodW1iUG9pbnRlckRvd24iLCJoYW5kbGVUaHVtYktleURvd24iLCJoYW5kbGVUaHVtYlRvdWNoIiwidGh1bWJFbGVtZW50IiwiY3JlYXRlVGh1bWIiLCJzZXRBdHRyaWJ1dGUiLCJ0YWJJbmRleCIsInNldFBvc2l0aW9uIiwiY2hlY2taSW5kIiwic2NhbGVWYWx1ZSIsInRvU3RyaW5nIiwiZ2V0VGh1bWIiLCJnZXRUaHVtYkF0dHIiLCJ6SW5kZXgiLCJzaXplRWxlbWVudCIsIm1vdmVkIiwia2V5IiwicGVyY2VudFBvc2l0aW9uIiwidmFsdWVUaXAiLCJ0aXAiLCJjcmVhdGVUaXAiLCJhZGRUaXAiLCJzZXRWYWx1ZVRpcCIsImhpZGVUaXAiLCJkaXNwbGF5Iiwic2hvd1RpcCIsIlNsaWRlciIsInN0YXRlIiwiZG9tIiwic2xpZGVyIiwic2NhbGVFbGVtZW50IiwibnVtYmVyVmFyaWFibGVzIiwidGlwVmFsdWVGcm9tIiwidGh1bWJQZXJjZW50RnJvbSIsInRodW1iUGVyY2VudFRvIiwidGlwVmFsdWVUbyIsImJvb2xlYW5WYXJpYWJsZXMiLCJpc1Byb2dyZXNzIiwiaXNSYW5nZSIsImlzVGlwIiwiaXNTY2FsZU1hcmtzIiwiY2xhc3NFbGVtZW50cyIsInRodW1iRnJvbSIsInRodW1iVG8iLCJzY2FsZU1hcmtzIiwidGlwRnJvbSIsInRpcFRvIiwic2xpZGVyQ29tcG9uZW50cyIsImNyZWF0ZVZhcmlhYmxlcyIsInNldFN0YXRlIiwiY3JlYXRlU2xpZGVyIiwic2xpZGVyV3JhcHBlciIsInNsaWRlckRhdGEiLCJ2YWx1ZUZyb20iLCJ2YWx1ZVRvIiwic2V0VGh1bWJzIiwic2V0VGlwcyIsInNldFRodW1iIiwidGh1bWIiLCJUaHVtYiIsIm1pbiIsIm1heCIsImlzTmVlZERvdWJsZVRpcCIsInNldFRpcCIsInZhbHVlRGlyZWN0aW9uIiwidGlwVmFsdWUiLCJUaXAiLCJQcm9ncmVzcyIsImNyZWF0ZUVsZW1lbnRzIiwiYWRkU2xpZGVyIiwic2NhbGVNYXAiLCJTY2FsZSIsIlNjYWxlTWFya3MiLCJ1cGRhdGVTbGlkZXIiLCJnZXRSb290Iiwic2V0Um9vdCIsImdldFNsaWRlciIsInNldFNsaWRlciIsImFkZFN1YnNjcmliZVNsaWRlciIsImhhbmRsZVNsaWRlckNsaWNrIiwiY2xpY2tQb3MiLCJ2YWx1ZVRodW1iT2JqZWN0IiwiZmluZFN1aXRhYmxlUGVyY2VudCIsInVwZGF0ZVN0YXRlTW92ZSIsImhhbmRsZU1vdXNlTW92ZSIsIm1vdmVkVG8iLCJmaW5kUGVyY2VudCIsImdldFZhbHVlIiwidmFsIiwiZ2V0UGVyY2VudFZhbCIsInRvRml4ZWQiLCJnZXRTdGVwc0NvdW50IiwiTWF0aCIsImNlaWwiLCJzdGVwIiwiaXNOYU4iLCJFcnJvciIsImdldFN0YXRlIiwicGVyY2VudE1vdmUiLCJuZWFyZXN0U3RlcCIsInJvdW5kIiwicGVyY2VudFZhbHVlIiwiY3VycmVudFBlcmNlbnQiLCJjdXJyZW50VmFsdWUiLCJuZXh0UGVyY2VudCIsInByZXZQZXJjZW50IiwibmVhcmVzdFByZXZWYWx1ZSIsImZsb29yIiwibmVhcmVzdE5leHRWYWx1ZSIsIkRFRkFVTFRfR0FQIiwiYmFzZVBhcmFtcyIsInN0ZXBQZXJjZW50IiwidmFsaWRhdGVEYXRhIiwic2V0Qm9vbGVhbnMiLCJzZXREYXRhIiwicmVzdWx0T2JqZWN0IiwiY2hlY2tSYW5nZSIsImNoZWNrU3RlcCIsImNoZWNrVmFsdWVzIiwiY2hlY2tQZXJjZW50cyIsInBlcmZvcm1Nb3ZlVG9QZXJjZW50IiwidmFsaWRhdGVNYXJrcyIsIm9wdGlvbnMiLCJnYXAiLCJtYXBTdGVwcyIsIk1hcCIsInZhbGlkR2FwIiwidmFsaWRhdGVHYXAiLCJmaW5kUmFuZ2UiLCJzdGVwQ291bnRHYXAiLCJwZXJjZW50Q291bnRzR2FwIiwiaSIsInZhbHVlU3RlcHMiLCJwZXJjZW50U2NhbGUiLCJzZXQiLCJ2YWxpZGF0ZVRodW1iQXR0ciIsImRpZmZGcm9tIiwiZGlmZlRvIiwidmFsaWRhdGVQZXJjZW50Iiwib2xkU3RhdGUiLCJuZXdEYXRhIiwidGh1bWJWYWx1ZSIsInNjYWxlUGVyY2VudEdhcCIsImJhc2lzUGVyY2VudCIsInJlc3VsdCIsImFsbFJhbmdlIiwiY2hlY2tWYWx1ZSIsImNvdW50U3RlcCIsImNoZWNrUGVyY2VudCIsInZhcmlhYmxlIiwidmFsdWVPZlJhbmdlIiwidmFsaWRhdG9yIiwiVmFsaWRhdG9yIiwidmFsaWRTdGF0ZSIsIm1vZGVsIiwiTW9kZWwiLCJzbGlkZXJNYXJrcyIsInZhbGlkR2FwTWFya3MiLCJuZXdTdGF0ZSIsInBlcmZvcm1lZERhdGEiLCJzZXRWYWx1ZSIsInBhcmFtIiwibW9kZWxGYWNhZGUiLCJNb2RlbEZhY2FkZSIsInZpZXciLCJWaWV3Iiwic3Vic2NyaWJlTW9kZWwiLCJzdWJzY3JpYmVTbGlkZXIiLCIkIiwic2xpZGVyUGx1Z2luIiwiaW5pdGlhbFN0YXRlIiwiUHJlc2VudGVyIl0sInNvdXJjZVJvb3QiOiIifQ==